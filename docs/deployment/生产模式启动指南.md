# ç”Ÿäº§æ¨¡å¼å¯åŠ¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨äº†è§£å¦‚ä½•åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹å¯åŠ¨å’Œéƒ¨ç½²uni-appé¡¹ç›®ã€‚

## ğŸ“‹ é¡¹ç›®ä¿¡æ¯

### é¡¹ç›®ç±»å‹
- **æ¡†æ¶**: uni-app (Vue 3)
- **æ„å»ºå·¥å…·**: Vite
- **åŒ…ç®¡ç†å™¨**: npm/yarn

### æ”¯æŒå¹³å°
- H5 (Web)
- å¾®ä¿¡å°ç¨‹åº
- æ”¯ä»˜å®å°ç¨‹åº
- APP (Android/iOS)

## ğŸš€ ç”Ÿäº§æ¨¡å¼å¯åŠ¨æ–¹æ³•

### 1. **H5ç”Ÿäº§æ¨¡å¼**

#### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# æ„å»ºH5ç”Ÿäº§ç‰ˆæœ¬
npm run build:h5

# æˆ–è€…ä½¿ç”¨yarn
yarn build:h5
```

#### å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
```bash
# å®‰è£…serveå…¨å±€åŒ…ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install -g serve

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
serve -s dist/build/h5

# æŒ‡å®šç«¯å£å¯åŠ¨
serve -s dist/build/h5 -l 3000

# æŒ‡å®šä¸»æœºå’Œç«¯å£
serve -s dist/build/h5 -l 0.0.0.0:3000
```

#### ä½¿ç”¨å…¶ä»–é™æ€æœåŠ¡å™¨
```bash
# ä½¿ç”¨http-server
npx http-server dist/build/h5 -p 3000

# ä½¿ç”¨live-server
npx live-server dist/build/h5 --port=3000

# ä½¿ç”¨nginx (éœ€è¦é…ç½®nginx.conf)
# å°†dist/build/h5ç›®å½•éƒ¨ç½²åˆ°nginxçš„htmlç›®å½•
```

### 2. **å¾®ä¿¡å°ç¨‹åºç”Ÿäº§æ¨¡å¼**

#### æ„å»ºå°ç¨‹åº
```bash
# æ„å»ºå¾®ä¿¡å°ç¨‹åº
npm run build:mp-weixin

# æˆ–è€…ä½¿ç”¨yarn
yarn build:mp-weixin
```

#### ä¸Šä¼ åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. é€‰æ‹©"å¯¼å…¥é¡¹ç›®"
3. é€‰æ‹© `dist/build/mp-weixin` ç›®å½•
4. å¡«å†™AppIDå’Œé¡¹ç›®åç§°
5. ç‚¹å‡»"å¯¼å…¥"
6. åœ¨å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®
7. å¡«å†™ç‰ˆæœ¬å·å’Œé¡¹ç›®å¤‡æ³¨
8. ç‚¹å‡»"ä¸Šä¼ "

### 3. **APPç”Ÿäº§æ¨¡å¼**

#### æ„å»ºAPP
```bash
# æ„å»ºAPP (éœ€è¦HBuilderX)
# åœ¨HBuilderXä¸­æ‰“å¼€é¡¹ç›®
# é€‰æ‹©"å‘è¡Œ" -> "åŸç”ŸApp-äº‘æ‰“åŒ…"
```

#### äº‘æ‰“åŒ…æ­¥éª¤
1. åœ¨HBuilderXä¸­æ‰“å¼€é¡¹ç›®
2. é€‰æ‹©"å‘è¡Œ" -> "åŸç”ŸApp-äº‘æ‰“åŒ…"
3. é€‰æ‹©å¹³å°ï¼ˆAndroid/iOSï¼‰
4. é…ç½®è¯ä¹¦å’Œç­¾å
5. ç‚¹å‡»"æ‰“åŒ…"
6. ç­‰å¾…æ‰“åŒ…å®Œæˆ
7. ä¸‹è½½å®‰è£…åŒ…

## ğŸ”§ ç¯å¢ƒé…ç½®

### 1. **APIåœ°å€é…ç½®**

å½“å‰APIé…ç½®åœ¨ `src/utils/api.js` ä¸­ï¼š

```javascript
const API_CONFIG = {
  // ç”Ÿäº§ç¯å¢ƒåœ°å€
  PROD_BASE_URL: 'https://uauotggfeiao.sealosbja.site',
  // å¼€å‘ç¯å¢ƒåœ°å€
  DEV_BASE_URL: 'http://localhost:3000',
  // è¯·æ±‚è¶…æ—¶æ—¶é—´
  TIMEOUT: 10000
}
```

### 2. **ç¯å¢ƒåˆ¤æ–­é€»è¾‘**

```javascript
function getBaseUrl() {
  // æ–¹æ³•1ï¼šé€šè¿‡ uni-app çš„æ¡ä»¶ç¼–è¯‘åˆ¤æ–­
  // #ifdef APP-PLUS || H5
  //   return API_CONFIG.DEV_BASE_URL // å¼€å‘æ—¶ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨
  // #endif
  // #ifdef MP-WEIXIN || MP-ALIPAY
  //   return API_CONFIG.PROD_BASE_URL // å°ç¨‹åºä½¿ç”¨ç”Ÿäº§ç¯å¢ƒ
  // #endif

  // æ–¹æ³•2ï¼šé€šè¿‡ç¯å¢ƒå˜é‡åˆ¤æ–­ï¼ˆæ¨èï¼‰
  if (process.env.NODE_ENV === 'development') {
    return API_CONFIG.DEV_BASE_URL
  } else {
    return API_CONFIG.PROD_BASE_URL
  }
}
```

## ğŸ“± å¹³å°ç‰¹å®šé…ç½®

### 1. **H5å¹³å°**

#### éƒ¨ç½²åˆ°æœåŠ¡å™¨
```bash
# 1. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:h5

# 2. å°†dist/build/h5ç›®å½•ä¸Šä¼ åˆ°æœåŠ¡å™¨
# 3. é…ç½®nginxæˆ–apacheæœåŠ¡å™¨
# 4. ç¡®ä¿HTTPSé…ç½®æ­£ç¡®
```

#### Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/dist/build/h5;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # APIä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
    location /api/ {
        proxy_pass https://uauotggfeiao.sealosbja.site/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 2. **å¾®ä¿¡å°ç¨‹åºå¹³å°**

#### å°ç¨‹åºé…ç½®
```json
// manifest.json
{
  "mp-weixin": {
    "appid": "your-appid",
    "setting": {
      "urlCheck": false,
      "es6": true,
      "enhance": true,
      "postcss": true,
      "minified": true
    },
    "usingComponents": true
  }
}
```

#### åŸŸåé…ç½®
- åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®æœåŠ¡å™¨åŸŸå
- æ·»åŠ  `https://uauotggfeiao.sealosbja.site` åˆ°requeståˆæ³•åŸŸå

### 3. **APPå¹³å°**

#### APPé…ç½®
```json
// manifest.json
{
  "app-plus": {
    "usingComponents": true,
    "nvueStyleCompiler": "uni-app",
    "compilerVersion": 3,
    "splashscreen": {
      "alwaysShowBeforeRender": true,
      "waiting": true,
      "autoclose": true,
      "delay": 0
    }
  }
}
```

## ğŸ› ï¸ æ„å»ºä¼˜åŒ–

### 1. **ä»£ç å‹ç¼©**

ç”Ÿäº§æ¨¡å¼ä¼šè‡ªåŠ¨å¯ç”¨ï¼š
- JavaScriptä»£ç å‹ç¼©
- CSSä»£ç å‹ç¼©
- å›¾ç‰‡å‹ç¼©
- èµ„æºåˆå¹¶

### 2. **æ€§èƒ½ä¼˜åŒ–**

```javascript
// vite.config.js
export default defineConfig({
  plugins: [uni()],
  build: {
    // ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true, // ç§»é™¤console.log
        drop_debugger: true, // ç§»é™¤debugger
      },
    },
    // èµ„æºåˆ†å—
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-i18n'],
          utils: ['axios', 'qrcode'],
        },
      },
    },
  },
})
```

### 3. **ç¯å¢ƒå˜é‡**

åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š

```bash
# .env.production
NODE_ENV=production
VITE_API_BASE_URL=https://uauotggfeiao.sealosbja.site
```

```bash
# .env.development
NODE_ENV=development
VITE_API_BASE_URL=http://localhost:3000
```

## ğŸ“Š éƒ¨ç½²æ£€æŸ¥æ¸…å•

### 1. **æ„å»ºå‰æ£€æŸ¥**
- [ ] ç¡®è®¤APIåœ°å€æ­£ç¡®
- [ ] æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- [ ] éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
- [ ] æ¸…ç†å¼€å‘ç¯å¢ƒä»£ç 

### 2. **æ„å»ºåæ£€æŸ¥**
- [ ] æ£€æŸ¥æ„å»ºäº§ç‰©å®Œæ•´æ€§
- [ ] éªŒè¯é™æ€èµ„æºåŠ è½½
- [ ] æµ‹è¯•APIæ¥å£è°ƒç”¨
- [ ] æ£€æŸ¥æ§åˆ¶å°é”™è¯¯

### 3. **éƒ¨ç½²åæ£€æŸ¥**
- [ ] æµ‹è¯•æ‰€æœ‰é¡µé¢åŠŸèƒ½
- [ ] éªŒè¯ç”¨æˆ·ç™»å½•
- [ ] æ£€æŸ¥æ•°æ®åŠ è½½
- [ ] æµ‹è¯•æ”¯ä»˜åŠŸèƒ½ï¼ˆå¦‚æœ‰ï¼‰

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. **æ„å»ºå¤±è´¥**
```bash
# æ¸…ç†ç¼“å­˜
rm -rf node_modules
rm -rf dist
npm install
npm run build:h5
```

### 2. **APIè°ƒç”¨å¤±è´¥**
- æ£€æŸ¥åŸŸåé…ç½®
- éªŒè¯HTTPSè¯ä¹¦
- ç¡®è®¤CORSè®¾ç½®

### 3. **é™æ€èµ„æº404**
- æ£€æŸ¥èµ„æºè·¯å¾„
- éªŒè¯æœåŠ¡å™¨é…ç½®
- ç¡®è®¤æ–‡ä»¶ä¸Šä¼ å®Œæ•´

### 4. **å°ç¨‹åºå®¡æ ¸å¤±è´¥**
- æ£€æŸ¥åŸŸåç™½åå•
- éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
- ç¡®è®¤éšç§æ”¿ç­–

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### 1. **H5æ€§èƒ½ç›‘æ§**
```javascript
// æ·»åŠ æ€§èƒ½ç›‘æ§
window.addEventListener('load', () => {
  const perfData = performance.getEntriesByType('navigation')[0]
  console.log('é¡µé¢åŠ è½½æ—¶é—´:', perfData.loadEventEnd - perfData.loadEventStart)
})
```

### 2. **é”™è¯¯ç›‘æ§**
```javascript
// å…¨å±€é”™è¯¯æ•è·
window.addEventListener('error', (event) => {
  console.error('å…¨å±€é”™è¯¯:', event.error)
  // å‘é€é”™è¯¯æŠ¥å‘Šåˆ°æœåŠ¡å™¨
})
```

## ğŸ‰ æ€»ç»“

ç”Ÿäº§æ¨¡å¼å¯åŠ¨æ­¥éª¤ï¼š

1. **H5**: `npm run build:h5` â†’ éƒ¨ç½²åˆ°æœåŠ¡å™¨
2. **å°ç¨‹åº**: `npm run build:mp-weixin` â†’ ä¸Šä¼ åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·
3. **APP**: åœ¨HBuilderXä¸­è¿›è¡Œäº‘æ‰“åŒ…

### å…³é”®é…ç½®
- APIåœ°å€: `https://uauotggfeiao.sealosbja.site`
- æ„å»ºå‘½ä»¤: `npm run build:[platform]`
- éƒ¨ç½²ç›®å½•: `dist/build/[platform]`

ç°åœ¨æ‚¨å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ç›¸åº”çš„å¹³å°è¿›è¡Œç”Ÿäº§æ¨¡å¼å¯åŠ¨å’Œéƒ¨ç½²ï¼
