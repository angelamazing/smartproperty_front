# é€šçŸ¥åŠŸèƒ½ä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•ä½¿ç”¨å·²å®ç°çš„é€šçŸ¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç³»ç»Ÿå…¬å‘Šã€é€šçŸ¥è®¾ç½®ã€å…¬å‘Šç®¡ç†ç­‰ã€‚

## âœ… å·²å®ç°çš„åŠŸèƒ½

### 1. ç³»ç»Ÿå…¬å‘Šç»„ä»¶ (SystemNotice.vue)

#### åŸºæœ¬ä½¿ç”¨
```vue
<template>
  <SystemNotice 
    :notice="systemNotice" 
    :show-notice="showSystemNotice"
    :closable="true"
    :refreshable="true"
    @close="closeSystemNotice"
    @refresh="refreshSystemNotice"
  />
</template>

<script>
import SystemNotice from '@/components/SystemNotice.vue'

export default {
  components: {
    SystemNotice
  },
  data() {
    return {
      systemNotice: {
        title: 'ç³»ç»Ÿå…¬å‘Š',
        content: 'è¿™æ˜¯ä¸€æ¡ç³»ç»Ÿå…¬å‘Šå†…å®¹',
        type: 'info', // info, warning, error, success
        time: '2025-01-27T10:30:00.000Z',
        priority: 1 // 1-4, 4ä¸ºç´§æ€¥
      },
      showSystemNotice: true
    }
  },
  methods: {
    closeSystemNotice() {
      this.showSystemNotice = false
    },
    refreshSystemNotice() {
      // åˆ·æ–°å…¬å‘Šé€»è¾‘
    }
  }
}
</script>
```

#### å…¬å‘Šç±»å‹
- `info`: ä¿¡æ¯ç±»å…¬å‘Šï¼ˆè“è‰²ï¼‰
- `warning`: è­¦å‘Šç±»å…¬å‘Šï¼ˆæ©™è‰²ï¼‰
- `error`: é”™è¯¯ç±»å…¬å‘Šï¼ˆçº¢è‰²ï¼‰
- `success`: æˆåŠŸç±»å…¬å‘Šï¼ˆç»¿è‰²ï¼‰

### 2. é€šçŸ¥ç®¡ç†å™¨ç»„ä»¶ (NotificationManager.vue)

#### åŸºæœ¬ä½¿ç”¨
```vue
<template>
  <NotificationManager 
    @notification-added="onNotificationAdded"
    @notification-removed="onNotificationRemoved"
  />
</template>

<script>
import NotificationManager from '@/components/NotificationManager.vue'

export default {
  components: {
    NotificationManager
  },
  methods: {
    onNotificationAdded(notification) {
      console.log('æ–°é€šçŸ¥:', notification)
    },
    onNotificationRemoved(notification) {
      console.log('é€šçŸ¥å·²ç§»é™¤:', notification)
    }
  }
}
</script>
```

### 3. å…¨å±€é€šçŸ¥ç®¡ç†å™¨ (notificationManager.js)

#### åŸºæœ¬ä½¿ç”¨
```javascript
import notificationManager from '@/utils/notificationManager.js'

// æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
notificationManager.showSuccess('æ“ä½œæˆåŠŸ', 'æ•°æ®å·²ä¿å­˜')

// æ˜¾ç¤ºé”™è¯¯é€šçŸ¥
notificationManager.showError('æ“ä½œå¤±è´¥', 'è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥')

// æ˜¾ç¤ºè­¦å‘Šé€šçŸ¥
notificationManager.showWarning('æ³¨æ„', 'æ•°æ®å³å°†è¿‡æœŸ')

// æ˜¾ç¤ºä¿¡æ¯é€šçŸ¥
notificationManager.showInfo('æç¤º', 'æ–°åŠŸèƒ½å·²ä¸Šçº¿')

// æ˜¾ç¤ºç³»ç»Ÿå…¬å‘Š
notificationManager.showSystemNotice({
  title: 'ç³»ç»Ÿç»´æŠ¤é€šçŸ¥',
  content: 'ç³»ç»Ÿå°†äºä»Šæ™š22:00-24:00è¿›è¡Œç»´æŠ¤',
  type: 'warning',
  priority: 3
})
```

#### é«˜çº§åŠŸèƒ½
```javascript
// æ·»åŠ è‡ªå®šä¹‰é€šçŸ¥
notificationManager.addNotification({
  type: 'meal',
  title: 'ç”¨é¤æé†’',
  content: 'åˆé¤æ—¶é—´åˆ°äº†ï¼Œè®°å¾—æŠ¥é¤å“¦ï¼',
  priority: 2,
  actions: [
    {
      id: 'go-to-dining',
      text: 'å»æŠ¥é¤',
      type: 'primary'
    },
    {
      id: 'dismiss',
      text: 'ç¨åæé†’',
      type: 'default'
    }
  ]
})

// è·å–é€šçŸ¥ç»Ÿè®¡
const stats = notificationManager.getStats()
console.log('æ€»é€šçŸ¥æ•°:', stats.total)
console.log('æœªè¯»é€šçŸ¥:', stats.unread)
console.log('ä»Šæ—¥é€šçŸ¥:', stats.today)

// ç›‘å¬é€šçŸ¥äº‹ä»¶
notificationManager.on('notification-added', (notification) => {
  console.log('æ–°é€šçŸ¥æ·»åŠ :', notification)
})

// æ ‡è®°é€šçŸ¥ä¸ºå·²è¯»
notificationManager.markAsRead(notificationId)

// æ¸…é™¤æ‰€æœ‰é€šçŸ¥
notificationManager.clearAll()
```

### 4. é€šçŸ¥è®¾ç½®é¡µé¢

#### åŠŸèƒ½ç‰¹æ€§
- ç³»ç»Ÿå…¬å‘Šå¼€å…³æ§åˆ¶
- å¼€å‘ç¯å¢ƒåŠŸèƒ½æµ‹è¯•
- é€šçŸ¥å†å²ç»Ÿè®¡
- é€šçŸ¥æµ‹è¯•åŠŸèƒ½

#### è®¿é—®è·¯å¾„
```
/pages/notification-settings/notification-settings
```

### 5. å…¬å‘Šç®¡ç†é¡µé¢

#### åŠŸèƒ½ç‰¹æ€§
- å…¬å‘Šçš„å¢åˆ æ”¹æŸ¥
- æ‰¹é‡æ“ä½œï¼ˆé€‰æ‹©ã€åˆ é™¤ï¼‰
- æœç´¢å’Œç­›é€‰
- çŠ¶æ€ç®¡ç†ï¼ˆè‰ç¨¿ã€å·²å‘å¸ƒã€å·²å½’æ¡£ï¼‰
- ä¼˜å…ˆçº§è®¾ç½®

#### è®¿é—®è·¯å¾„
```
/pages/admin/notices
```

#### ç®¡ç†å‘˜åŠŸèƒ½
```javascript
// åˆ›å»ºå…¬å‘Š
const noticeData = {
  title: 'æ–°åŠŸèƒ½ä¸Šçº¿',
  content: 'ç³»ç»Ÿæ–°å¢äº†é€šçŸ¥åŠŸèƒ½',
  type: 'success',
  priority: 2,
  status: 'published',
  isSticky: false
}
await api.admin.createNotice(noticeData)

// æ‰¹é‡åˆ é™¤å…¬å‘Š
await api.admin.batchDeleteNotices(['id1', 'id2', 'id3'])

// å‘å¸ƒå…¬å‘Š
await api.admin.publishNotice(noticeId)

// å–æ¶ˆå‘å¸ƒ
await api.admin.unpublishNotice(noticeId)
```

## ğŸ”§ API æ¥å£

### ç³»ç»Ÿå…¬å‘Šæ¥å£
```javascript
// è·å–ç³»ç»Ÿå…¬å‘Š
api.system.getNotice()

// è·å–å…¬å‘Šåˆ—è¡¨
api.admin.getNotices({ page: 1, pageSize: 20 })

// åˆ›å»ºå…¬å‘Š
api.admin.createNotice(noticeData)

// æ›´æ–°å…¬å‘Š
api.admin.updateNotice(noticeId, noticeData)

// åˆ é™¤å…¬å‘Š
api.admin.deleteNotice(noticeId)
```

### ç”¨æˆ·é€šçŸ¥è®¾ç½®æ¥å£
```javascript
// è·å–ç”¨æˆ·é€šçŸ¥è®¾ç½®
api.user.getNotificationSettings()

// æ›´æ–°ç”¨æˆ·é€šçŸ¥è®¾ç½®
api.user.updateNotificationSettings(settings)

// é‡ç½®ç”¨æˆ·é€šçŸ¥è®¾ç½®
api.user.resetUserNotificationSettings()
```

### é€šçŸ¥å†å²æ¥å£
```javascript
// è·å–é€šçŸ¥å†å²
api.user.getNotificationHistory({ page: 1, pageSize: 20 })

// æ ‡è®°é€šçŸ¥ä¸ºå·²è¯»
api.user.markNotificationAsRead(notificationId)

// æ ‡è®°æ‰€æœ‰é€šçŸ¥ä¸ºå·²è¯»
api.user.markAllNotificationsAsRead()

// åˆ é™¤é€šçŸ¥
api.user.deleteNotification(notificationId)

// æ¸…ç©ºé€šçŸ¥å†å²
api.user.clearNotificationHistory()
```

## ğŸ¨ æ ·å¼å®šåˆ¶

### å…¬å‘Šç±»å‹æ ·å¼
```css
.notice-card.info {
  border-left-color: #007aff;
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
}

.notice-card.warning {
  border-left-color: #f59e0b;
  background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
}

.notice-card.error {
  border-left-color: #ef4444;
  background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
}

.notice-card.success {
  border-left-color: #10b981;
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
}
```

### é€šçŸ¥ç®¡ç†å™¨æ ·å¼
```css
.notification-item {
  background: white;
  border-radius: 12rpx;
  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);
  border-left: 6rpx solid #007aff;
  animation: slideInRight 0.3s ease-out;
}
```

## ğŸ“± å“åº”å¼è®¾è®¡

æ‰€æœ‰é€šçŸ¥ç»„ä»¶éƒ½æ”¯æŒå“åº”å¼è®¾è®¡ï¼Œåœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºï¼š

- æ¡Œé¢ç«¯ï¼šé€šçŸ¥æ˜¾ç¤ºåœ¨å³ä¸Šè§’
- ç§»åŠ¨ç«¯ï¼šé€šçŸ¥å…¨å®½æ˜¾ç¤ºï¼Œé€‚é…å°å±å¹•
- å¹³æ¿ç«¯ï¼šä¸­ç­‰å°ºå¯¸æ˜¾ç¤º

## ğŸ”„ æ•°æ®æŒä¹…åŒ–

é€šçŸ¥æ•°æ®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼š

```javascript
// è‡ªåŠ¨ä¿å­˜
notificationManager.saveNotifications()

// è‡ªåŠ¨åŠ è½½
notificationManager.loadNotifications()
```

## ğŸš€ æœ€ä½³å®è·µ

### 1. é€šçŸ¥ä¼˜å…ˆçº§
- 1: ä½ä¼˜å…ˆçº§ï¼ˆä¿¡æ¯é€šçŸ¥ï¼‰
- 2: ä¸­ä¼˜å…ˆçº§ï¼ˆè­¦å‘Šé€šçŸ¥ï¼‰
- 3: é«˜ä¼˜å…ˆçº§ï¼ˆé”™è¯¯é€šçŸ¥ï¼‰
- 4: ç´§æ€¥ä¼˜å…ˆçº§ï¼ˆç³»ç»Ÿå…¬å‘Šï¼‰

### 2. é€šçŸ¥ç±»å‹
- `info`: ä¸€èˆ¬ä¿¡æ¯
- `success`: æˆåŠŸæ“ä½œ
- `warning`: è­¦å‘Šä¿¡æ¯
- `error`: é”™è¯¯ä¿¡æ¯
- `system`: ç³»ç»Ÿé€šçŸ¥
- `meal`: ç”¨é¤ç›¸å…³
- `reservation`: é¢„çº¦ç›¸å…³
- `verification`: éªŒè¯ç›¸å…³
- `court`: çƒé¦†ç›¸å…³

### 3. è‡ªåŠ¨æ¸…ç†
- é€šçŸ¥è¶…è¿‡7å¤©è‡ªåŠ¨æ¸…ç†
- æœ€å¤šä¿ç•™10æ¡é€šçŸ¥
- è‡ªåŠ¨éšè—å»¶è¿Ÿ5ç§’

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **é€šçŸ¥ä¸æ˜¾ç¤º**
   - æ£€æŸ¥é€šçŸ¥è®¾ç½®æ˜¯å¦å¼€å¯
   - ç¡®è®¤ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥
   - æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

2. **é€šçŸ¥æ ·å¼å¼‚å¸¸**
   - æ£€æŸ¥CSSæ˜¯å¦æ­£ç¡®åŠ è½½
   - ç¡®è®¤å“åº”å¼æ ·å¼æ˜¯å¦ç”Ÿæ•ˆ

3. **æ•°æ®ä¸ä¿å­˜**
   - æ£€æŸ¥æœ¬åœ°å­˜å‚¨æƒé™
   - ç¡®è®¤æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

### è°ƒè¯•æ–¹æ³•

```javascript
// å¼€å¯è°ƒè¯•æ¨¡å¼
notificationManager.on('notification-added', (notification) => {
  console.log('é€šçŸ¥æ·»åŠ :', notification)
})

// æŸ¥çœ‹é€šçŸ¥ç»Ÿè®¡
console.log('é€šçŸ¥ç»Ÿè®¡:', notificationManager.getStats())

// å¯¼å‡ºé€šçŸ¥æ•°æ®
console.log('é€šçŸ¥æ•°æ®:', notificationManager.exportNotifications())
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€
3. ç¡®è®¤APIæ¥å£æ˜¯å¦æ­£å¸¸
4. æŸ¥çœ‹æœ¬åœ°å­˜å‚¨æ•°æ®

---

**æ³¨æ„**: æœ¬æ–‡æ¡£åŸºäºå½“å‰å®ç°çš„åŠŸèƒ½ç¼–å†™ï¼Œéšç€åŠŸèƒ½æ›´æ–°ä¼šæŒç»­ç»´æŠ¤ã€‚
