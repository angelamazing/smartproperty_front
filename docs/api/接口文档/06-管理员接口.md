# ç®¡ç†å‘˜æ¥å£æ–‡æ¡£

## ğŸ“‹ æ¥å£æ¦‚è¿°

ç®¡ç†å‘˜æ¥å£æä¾›ç³»ç»Ÿç®¡ç†ã€èœå•ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€æ•°æ®ç»Ÿè®¡ç­‰ç®¡ç†å‘˜åŠŸèƒ½ã€‚

**åŸºç¡€è·¯å¾„**: `/api/admin`

**è®¤è¯è¦æ±‚**: æ‰€æœ‰æ¥å£éƒ½éœ€è¦æœ‰æ•ˆçš„JWT Tokenå’Œç®¡ç†å‘˜æƒé™

## ğŸ” æ¥å£åˆ—è¡¨

### 1. è·å–ç³»ç»Ÿç»Ÿè®¡æ•°æ®

**æ¥å£åœ°å€**: `GET /api/admin/system-stats`

**æ¥å£æè¿°**: è·å–ç³»ç»Ÿæ•´ä½“ç»Ÿè®¡æ•°æ®

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–ç³»ç»Ÿç»Ÿè®¡æˆåŠŸ",
  "data": {
    "userStats": {
      "totalUsers": 156,
      "activeUsers": 142,
      "newUsersThisMonth": 12,
      "userGrowthRate": "8.3%"
    },
    "diningStats": {
      "totalOrders": 2340,
      "ordersThisMonth": 456,
      "averageOrderAmount": 28.5,
      "popularMealType": "lunch"
    },
    "reservationStats": {
      "totalReservations": 890,
      "reservationsThisMonth": 67,
      "averageUtilization": "65.2%",
      "popularVenue": "ä¼šè®®å®¤A"
    },
    "systemStats": {
      "uptime": "99.8%",
      "lastBackup": "2024-01-15T02:00:00.000Z",
      "diskUsage": "45.2%",
      "memoryUsage": "62.1%"
    }
  }
}
```

---

### 2. è·å–ç³»ç»ŸçŠ¶æ€

**æ¥å£åœ°å€**: `GET /api/admin/system/status`

**æ¥å£æè¿°**: è·å–ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ä¿¡æ¯

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–ç³»ç»ŸçŠ¶æ€æˆåŠŸ",
  "data": {
    "serverStatus": "running",
    "databaseStatus": "connected",
    "redisStatus": "connected",
    "uptime": "15å¤© 8å°æ—¶ 32åˆ†é’Ÿ",
    "cpuUsage": "23.5%",
    "memoryUsage": "62.1%",
    "diskUsage": "45.2%",
    "networkStatus": "normal",
    "lastHealthCheck": "2024-01-15T15:30:00.000Z",
    "activeConnections": 45,
    "errorLogs": {
      "last24Hours": 3,
      "last7Days": 12,
      "criticalErrors": 0
    }
  }
}
```

---

## ğŸ½ï¸ èœå•ç®¡ç†æ¨¡å—

### 3. ä¿å­˜èœå•è‰ç¨¿

**æ¥å£åœ°å€**: `POST /api/admin/menu/draft`

**æ¥å£æè¿°**: ä¿å­˜èœå•è‰ç¨¿

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "date": "2024-01-16",
  "mealType": "lunch",
  "dishes": [
    {
      "dishId": "dish_id_1",
      "name": "å®«ä¿é¸¡ä¸",
      "price": 15.0,
      "category": "è¤èœ"
    },
    {
      "dishId": "dish_id_2",
      "name": "éº»å©†è±†è…",
      "price": 12.0,
      "category": "ç´ èœ"
    }
  ],
  "status": "draft"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "èœå•è‰ç¨¿ä¿å­˜æˆåŠŸ",
  "data": {
    "menuId": "menu_id_123",
    "date": "2024-01-16",
    "mealType": "lunch",
    "status": "draft",
    "createTime": "2024-01-15T16:30:00.000Z"
  }
}
```

---

### 4. å‘å¸ƒèœå•

**æ¥å£åœ°å€**: `POST /api/admin/menu/publish`

**æ¥å£æè¿°**: å‘å¸ƒèœå•

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "date": "2024-01-16",
  "mealType": "lunch",
  "dishes": [
    {
      "dishId": "dish_id_1",
      "name": "å®«ä¿é¸¡ä¸",
      "price": 15.0,
      "category": "è¤èœ"
    },
    {
      "dishId": "dish_id_2",
      "name": "éº»å©†è±†è…",
      "price": 12.0,
      "category": "ç´ èœ"
    }
  ],
  "publishTime": "2024-01-15T17:00:00.000Z",
  "effectiveTime": "2024-01-16T11:30:00.000Z"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "èœå•å‘å¸ƒæˆåŠŸ",
  "data": {
    "menuId": "menu_id_123",
    "date": "2024-01-16",
    "mealType": "lunch",
    "status": "published",
    "publishTime": "2024-01-15T17:00:00.000Z",
    "effectiveTime": "2024-01-16T11:30:00.000Z"
  }
}
```

---

### 5. è·å–èœå•å†å²

**æ¥å£åœ°å€**: `GET /api/admin/menu/history`

**æ¥å£æè¿°**: è·å–èœå•å‘å¸ƒå†å²

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
page: number          // é¡µç ï¼Œé»˜è®¤1
pageSize: number      // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
startDate: string     // å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼ˆå¯é€‰ï¼‰
endDate: string       // ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼ˆå¯é€‰ï¼‰
mealType: string      // é¤æ¬¡ç±»å‹ç­›é€‰ï¼ˆå¯é€‰ï¼‰
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–èœå•å†å²æˆåŠŸ",
  "data": {
    "list": [
      {
        "_id": "menu_id_1",
        "date": "2024-01-15",
        "mealType": "lunch",
        "status": "published",
        "dishes": [
          {
            "name": "å®«ä¿é¸¡ä¸",
            "price": 15.0
          },
          {
            "name": "éº»å©†è±†è…",
            "price": 12.0
          }
        ],
        "publishTime": "2024-01-14T17:00:00.000Z",
        "effectiveTime": "2024-01-15T11:30:00.000Z",
        "orderCount": 245,
        "totalAmount": 3675.0
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 45,
      "totalPages": 3
    }
  }
}
```

---

### 6. è·å–èœå•æ¨¡æ¿

**æ¥å£åœ°å€**: `GET /api/admin/menu/templates`

**æ¥å£æè¿°**: è·å–èœå•æ¨¡æ¿åˆ—è¡¨

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–èœå•æ¨¡æ¿æˆåŠŸ",
  "data": [
    {
      "_id": "template_id_1",
      "name": "å·¥ä½œæ—¥åˆé¤æ¨¡æ¿",
      "mealType": "lunch",
      "dishes": [
        {
          "dishId": "dish_id_1",
          "name": "å®«ä¿é¸¡ä¸",
          "price": 15.0,
          "category": "è¤èœ"
        },
        {
          "dishId": "dish_id_2",
          "name": "éº»å©†è±†è…",
          "price": 12.0,
          "category": "ç´ èœ"
        }
      ],
      "usageCount": 25,
      "createTime": "2024-01-01T00:00:00.000Z"
    }
  ]
}
```

---

### 7. æ’¤å›èœå•

**æ¥å£åœ°å€**: `PUT /api/admin/menu/:menuId/revoke`

**æ¥å£æè¿°**: æ’¤å›å·²å‘å¸ƒçš„èœå•

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**:
```
menuId: string  // èœå•ID
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "èœå•æ’¤å›æˆåŠŸ",
  "data": {
    "menuId": "menu_id_1",
    "oldStatus": "published",
    "newStatus": "revoked",
    "revokeTime": "2024-01-15T16:30:00.000Z",
    "revokedBy": "admin_id"
  }
}
```

---

### 8. åˆ é™¤èœå•æ¨¡æ¿

**æ¥å£åœ°å€**: `DELETE /api/admin/menu/templates/:templateId`

**æ¥å£æè¿°**: åˆ é™¤èœå•æ¨¡æ¿

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**è·¯å¾„å‚æ•°**:
```
templateId: string  // æ¨¡æ¿ID
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "èœå•æ¨¡æ¿åˆ é™¤æˆåŠŸ",
  "data": {
    "templateId": "template_id_1",
    "deleteTime": "2024-01-15T16:30:00.000Z",
    "deletedBy": "admin_id"
  }
}
```

---

## ğŸ‘¥ ç”¨æˆ·ç®¡ç†æ¨¡å—

### 9. è·å–ç”¨æˆ·åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/admin/users`

**æ¥å£æè¿°**: è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œç­›é€‰

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
page: number          // é¡µç ï¼Œé»˜è®¤1
size: number          // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
departmentId: string  // éƒ¨é—¨IDç­›é€‰ï¼ˆå¯é€‰ï¼‰
role: string          // è§’è‰²ç­›é€‰ï¼ˆå¯é€‰ï¼‰
status: string        // çŠ¶æ€ç­›é€‰ï¼ˆå¯é€‰ï¼‰
keyword: string       // å…³é”®è¯æœç´¢ï¼ˆå§“å/æ‰‹æœºå·/é‚®ç®±ï¼‰
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–ç”¨æˆ·åˆ—è¡¨æˆåŠŸ",
  "data": {
    "list": [
      {
        "_id": "user_id_1",
        "nickName": "å¼ ä¸‰",
        "realName": "å¼ ä¸‰",
        "phoneNumber": "13800138000",
        "email": "zhangsan@example.com",
        "department": "æŠ€æœ¯éƒ¨",
        "position": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "role": "user",
        "status": "active",
        "createTime": "2023-01-01T00:00:00.000Z",
        "lastLoginTime": "2024-01-15T10:30:00.000Z"
      }
    ],
    "pagination": {
      "page": 1,
      "size": 20,
      "total": 156,
      "totalPages": 8
    }
  }
}
```

---

### 10. åˆ›å»ºç”¨æˆ·

**æ¥å£åœ°å€**: `POST /api/admin/users`

**æ¥å£æè¿°**: åˆ›å»ºæ–°ç”¨æˆ·

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "nickName": "æå››",
  "realName": "æå››",
  "phoneNumber": "13800138001",
  "email": "lisi@example.com",
  "departmentId": "dept_id_1",
  "position": "äº§å“ç»ç†",
  "role": "user",
  "employeeId": "EMP002",
  "joinDate": "2024-01-01"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·åˆ›å»ºæˆåŠŸ",
  "data": {
    "userId": "user_id_2",
    "nickName": "æå››",
    "realName": "æå››",
    "phoneNumber": "13800138001",
    "createTime": "2024-01-15T16:30:00.000Z"
  }
}
```

---

### 11. æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**: `PUT /api/admin/users/:userId`

**æ¥å£æè¿°**: æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**:
```
userId: string  // ç”¨æˆ·ID
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "nickName": "æå››",
  "realName": "æå››",
  "email": "lisi@example.com",
  "departmentId": "dept_id_1",
  "position": "é«˜çº§äº§å“ç»ç†",
  "role": "dept_admin"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ",
  "data": {
    "userId": "user_id_2",
    "updateTime": "2024-01-15T16:30:00.000Z",
    "updatedFields": ["position", "role"]
  }
}
```

---

### 12. åˆ é™¤ç”¨æˆ·

**æ¥å£åœ°å€**: `DELETE /api/admin/users/:userId`

**æ¥å£æè¿°**: åˆ é™¤ç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼‰

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**è·¯å¾„å‚æ•°**:
```
userId: string  // ç”¨æˆ·ID
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·åˆ é™¤æˆåŠŸ",
  "data": {
    "userId": "user_id_2",
    "deleteTime": "2024-01-15T16:30:00.000Z",
    "deletedBy": "admin_id"
  }
}
```

---

## ğŸ¢ éƒ¨é—¨ç®¡ç†æ¨¡å—

### 13. è·å–éƒ¨é—¨åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/admin/departments`

**æ¥å£æè¿°**: è·å–éƒ¨é—¨åˆ—è¡¨

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–éƒ¨é—¨åˆ—è¡¨æˆåŠŸ",
  "data": [
    {
      "_id": "dept_id_1",
      "name": "æŠ€æœ¯éƒ¨",
      "code": "TECH",
      "parentId": null,
      "level": 1,
      "sort": 1,
      "managerId": "user_id_1",
      "managerName": "å¼ ä¸‰",
      "memberCount": 45,
      "status": "active",
      "createTime": "2023-01-01T00:00:00.000Z"
    }
  ]
}
```

---

### 14. åˆ›å»ºéƒ¨é—¨

**æ¥å£åœ°å€**: `POST /api/admin/departments`

**æ¥å£æè¿°**: åˆ›å»ºæ–°éƒ¨é—¨

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "name": "å‰ç«¯ç»„",
  "code": "FE",
  "parentId": "dept_id_1",
  "managerId": "user_id_2",
  "sort": 2,
  "description": "è´Ÿè´£å‰ç«¯å¼€å‘å·¥ä½œ"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "éƒ¨é—¨åˆ›å»ºæˆåŠŸ",
  "data": {
    "departmentId": "dept_id_2",
    "name": "å‰ç«¯ç»„",
    "code": "FE",
    "createTime": "2024-01-15T16:30:00.000Z"
  }
}
```

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡æ¨¡å—

### 15. è·å–æŠ¥é¤ç»Ÿè®¡

**æ¥å£åœ°å€**: `GET /api/admin/dining/stats`

**æ¥å£æè¿°**: è·å–æŠ¥é¤ç»Ÿè®¡æ•°æ®

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
startDate: string  // å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD
endDate: string    // ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–æŠ¥é¤ç»Ÿè®¡æˆåŠŸ",
  "data": {
    "period": "2024-01-01 è‡³ 2024-01-15",
    "totalOrders": 2340,
    "totalAmount": 66750.0,
    "averageOrderAmount": 28.5,
    "byMealType": {
      "breakfast": {
        "orders": 780,
        "amount": 15600.0,
        "percentage": "33.3%"
      },
      "lunch": {
        "orders": 1200,
        "amount": 36000.0,
        "percentage": "51.3%"
      },
      "dinner": {
        "orders": 360,
        "amount": 15150.0,
        "percentage": "15.4%"
      }
    },
    "byDepartment": [
      {
        "deptName": "æŠ€æœ¯éƒ¨",
        "orders": 890,
        "amount": 25350.0,
        "percentage": "38.0%"
      },
      {
        "deptName": "äººäº‹éƒ¨",
        "orders": 450,
        "amount": 12800.0,
        "percentage": "19.2%"
      }
    ],
    "trends": {
      "daily": [
        {
          "date": "2024-01-01",
          "orders": 156,
          "amount": 4450.0
        }
      ]
    }
  }
}
```

---

### 16. è·å–é¢„çº¦ç»Ÿè®¡

**æ¥å£åœ°å€**: `GET /api/admin/reservation/stats`

**æ¥å£æè¿°**: è·å–é¢„çº¦ç»Ÿè®¡æ•°æ®

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
startDate: string  // å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD
endDate: string    // ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–é¢„çº¦ç»Ÿè®¡æˆåŠŸ",
  "data": {
    "period": "2024-01-01 è‡³ 2024-01-15",
    "totalReservations": 890,
    "approvedReservations": 756,
    "rejectedReservations": 45,
    "cancelledReservations": 89,
    "approvalRate": "85.0%",
    "byVenue": [
      {
        "venueName": "ä¼šè®®å®¤A",
        "reservations": 234,
        "utilization": "65.2%",
        "amount": 23400.0
      },
      {
        "venueName": "æ´»åŠ¨å®¤B",
        "reservations": 156,
        "utilization": "52.1%",
        "amount": 31200.0
      }
    ],
    "byTimeSlot": [
      {
        "timeSlot": "09:00-12:00",
        "reservations": 234,
        "percentage": "26.3%"
      },
      {
        "timeSlot": "14:00-18:00",
        "reservations": 456,
        "percentage": "51.2%"
      }
    ]
  }
}
```

---

## ğŸ“± å‰ç«¯é›†æˆç¤ºä¾‹

### JavaScriptç¤ºä¾‹

```javascript
// è·å–ç³»ç»Ÿç»Ÿè®¡
async function getSystemStats() {
  try {
    const token = localStorage.getItem('token');
    const response = await fetch('/api/admin/system-stats', {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('è·å–ç³»ç»Ÿç»Ÿè®¡å¤±è´¥:', error);
    throw error;
  }
}

// å‘å¸ƒèœå•
async function publishMenu(menuData) {
  try {
    const token = localStorage.getItem('token');
    const response = await fetch('/api/admin/menu/publish', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(menuData)
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('å‘å¸ƒèœå•å¤±è´¥:', error);
    throw error;
  }
}

// è·å–ç”¨æˆ·åˆ—è¡¨
async function getUserList(params = {}) {
  try {
    const token = localStorage.getItem('token');
    const queryString = new URLSearchParams(params).toString();
    
    const response = await fetch(`/api/admin/users?${queryString}`, {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥:', error);
    throw error;
  }
}

// åˆ›å»ºç”¨æˆ·
async function createUser(userData) {
  try {
    const token = localStorage.getItem('token');
    const response = await fetch('/api/admin/users', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(userData)
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('åˆ›å»ºç”¨æˆ·å¤±è´¥:', error);
    throw error;
  }
}
```

### Reactç»„ä»¶ç¤ºä¾‹

```jsx
import React, { useState, useEffect } from 'react';

// ç³»ç»ŸçŠ¶æ€ç»„ä»¶
function SystemStatus() {
  const [status, setStatus] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchSystemStatus();
  }, []);

  const fetchSystemStatus = async () => {
    try {
      setLoading(true);
      const data = await getSystemStatus();
      setStatus(data);
    } catch (error) {
      console.error('è·å–ç³»ç»ŸçŠ¶æ€å¤±è´¥:', error);
    } finally {
      setLoading(false);
    }
  };

  if (loading) return <div>åŠ è½½ä¸­...</div>;
  if (!status) return <div>æš‚æ— æ•°æ®</div>;

  return (
    <div className="system-status">
      <h3>ç³»ç»ŸçŠ¶æ€</h3>
      <div className="status-grid">
        <div className="status-item">
          <span className="status-label">æœåŠ¡å™¨çŠ¶æ€</span>
          <span className={`status-value ${status.serverStatus}`}>
            {status.serverStatus === 'running' ? 'è¿è¡Œä¸­' : 'åœæ­¢'}
          </span>
        </div>
        <div className="status-item">
          <span className="status-label">æ•°æ®åº“çŠ¶æ€</span>
          <span className={`status-value ${status.databaseStatus}`}>
            {status.databaseStatus === 'connected' ? 'å·²è¿æ¥' : 'æœªè¿æ¥'}
          </span>
        </div>
        <div className="status-item">
          <span className="status-label">CPUä½¿ç”¨ç‡</span>
          <span className="status-value">{status.cpuUsage}</span>
        </div>
        <div className="status-item">
          <span className="status-label">å†…å­˜ä½¿ç”¨ç‡</span>
          <span className="status-value">{status.memoryUsage}</span>
        </div>
        <div className="status-item">
          <span className="status-label">ç£ç›˜ä½¿ç”¨ç‡</span>
          <span className="status-value">{status.diskUsage}</span>
        </div>
        <div className="status-item">
          <span className="status-label">è¿è¡Œæ—¶é—´</span>
          <span className="status-value">{status.uptime}</span>
        </div>
      </div>
    </div>
  );
}

// èœå•ç®¡ç†ç»„ä»¶
function MenuManagement() {
  const [menus, setMenus] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchMenuHistory();
  }, []);

  const fetchMenuHistory = async () => {
    try {
      setLoading(true);
      const data = await getMenuHistory();
      setMenus(data.list);
    } catch (error) {
      console.error('è·å–èœå•å†å²å¤±è´¥:', error);
    } finally {
      setLoading(false);
    }
  };

  const handlePublishMenu = async (menuData) => {
    try {
      await publishMenu(menuData);
      fetchMenuHistory(); // åˆ·æ–°åˆ—è¡¨
    } catch (error) {
      console.error('å‘å¸ƒèœå•å¤±è´¥:', error);
    }
  };

  if (loading) return <div>åŠ è½½ä¸­...</div>;

  return (
    <div className="menu-management">
      <h3>èœå•ç®¡ç†</h3>
      <div className="menu-list">
        {menus.map((menu) => (
          <div key={menu._id} className="menu-item">
            <div className="menu-header">
              <h4>{menu.date} - {getMealTypeName(menu.mealType)}</h4>
              <span className={`status-badge ${menu.status}`}>
                {getStatusName(menu.status)}
              </span>
            </div>
            <div className="menu-dishes">
              {menu.dishes.map((dish, index) => (
                <span key={index} className="dish-tag">
                  {dish.name} Â¥{dish.price}
                </span>
              ))}
            </div>
            <div className="menu-footer">
              <span>è®¢å•æ•°: {menu.orderCount}</span>
              <span>æ€»é‡‘é¢: Â¥{menu.totalAmount}</span>
              <span>å‘å¸ƒæ—¶é—´: {formatDateTime(menu.publishTime)}</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// è·å–é¤æ¬¡åç§°
function getMealTypeName(mealType) {
  const mealTypeNames = {
    'breakfast': 'æ—©é¤',
    'lunch': 'åˆé¤',
    'dinner': 'æ™šé¤'
  };
  return mealTypeNames[mealType] || mealType;
}

// è·å–çŠ¶æ€åç§°
function getStatusName(status) {
  const statusNames = {
    'draft': 'è‰ç¨¿',
    'published': 'å·²å‘å¸ƒ',
    'revoked': 'å·²æ’¤å›'
  };
  return statusNames[status] || status;
}

// æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
function formatDateTime(dateTime) {
  return new Date(dateTime).toLocaleString('zh-CN');
}
```

## ğŸ”’ æƒé™è¯´æ˜

### ç®¡ç†å‘˜è§’è‰²

| è§’è‰² | æƒé™ç­‰çº§ | åŠŸèƒ½æè¿° |
|------|----------|----------|
| `dept_admin` | 1 | éƒ¨é—¨ç®¡ç†å‘˜ï¼Œå¯ç®¡ç†æœ¬éƒ¨é—¨ç”¨æˆ·å’ŒæŸ¥çœ‹ç»Ÿè®¡æ•°æ® |
| `admin` | 2 | ç®¡ç†å‘˜ï¼Œå¯è¿›è¡Œç³»ç»Ÿç®¡ç†å’Œç”¨æˆ·ç®¡ç† |
| `sys_admin` | 3 | ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™ï¼ŒåŒ…æ‹¬è§’è‰²ç®¡ç† |

### æƒé™éªŒè¯

```javascript
// æ£€æŸ¥ç®¡ç†å‘˜æƒé™
function checkAdminPermission(userRole, requiredLevel) {
  const roleLevels = {
    'dept_admin': 1,
    'admin': 2,
    'sys_admin': 3
  };
  
  return roleLevels[userRole] >= requiredLevel;
}

// ä½¿ç”¨ç¤ºä¾‹
if (checkAdminPermission(user.role, 2)) {
  // å¯ä»¥è®¿é—®ç®¡ç†å‘˜åŠŸèƒ½
  showAdminFeatures();
} else {
  // éšè—ç®¡ç†å‘˜åŠŸèƒ½
  hideAdminFeatures();
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æƒé™æ§åˆ¶**: æ‰€æœ‰ç®¡ç†å‘˜æ¥å£éƒ½éœ€è¦ç›¸åº”çš„æƒé™ç­‰çº§ï¼Œå‰ç«¯éœ€è¦æ ¹æ®ç”¨æˆ·è§’è‰²æ§åˆ¶æ˜¾ç¤º
2. **æ•°æ®å®‰å…¨**: ç®¡ç†å‘˜æ¥å£æ¶‰åŠæ•æ„Ÿæ•°æ®ï¼Œå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HTTPS
3. **æ“ä½œæ—¥å¿—**: æ‰€æœ‰ç®¡ç†æ“ä½œéƒ½ä¼šè®°å½•è¯¦ç»†æ—¥å¿—ï¼Œä¾¿äºå®¡è®¡
4. **æ•°æ®éªŒè¯**: æ‰€æœ‰è¾“å…¥æ•°æ®éƒ½ä¼šè¿›è¡Œä¸¥æ ¼éªŒè¯ï¼Œå‰ç«¯ä¹Ÿéœ€è¦è¿›è¡Œç›¸åº”çš„éªŒè¯
5. **é”™è¯¯å¤„ç†**: æ¥å£è¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œå‰ç«¯éœ€è¦å¦¥å–„å¤„ç†å„ç§é”™è¯¯æƒ…å†µ
6. **æ‰¹é‡æ“ä½œ**: æ‰¹é‡æ“ä½œæ¥å£æœ‰æ•°é‡é™åˆ¶ï¼Œé¿å…ä¸€æ¬¡æ€§å¤„ç†è¿‡å¤šæ•°æ®
7. **å®æ—¶æ›´æ–°**: ç»Ÿè®¡æ•°æ®ä¼šå®æ—¶æ›´æ–°ï¼Œå»ºè®®å®šæœŸåˆ·æ–°æ•°æ®
8. **å¤‡ä»½æé†’**: é‡è¦æ“ä½œå‰å»ºè®®è¿›è¡Œæ•°æ®å¤‡ä»½
