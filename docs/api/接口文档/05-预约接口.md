# é¢„çº¦æ¥å£æ–‡æ¡£

## ğŸ“‹ æ¥å£æ¦‚è¿°

é¢„çº¦æ¥å£æä¾›åœºåœ°é¢„çº¦ã€é¢„çº¦ç®¡ç†ã€å®¡æ ¸æµç¨‹ç­‰é¢„çº¦ç›¸å…³åŠŸèƒ½ã€‚

**åŸºç¡€è·¯å¾„**: `/api/reservation`

**è®¤è¯è¦æ±‚**: æ‰€æœ‰æ¥å£éƒ½éœ€è¦æœ‰æ•ˆçš„JWT Token

## ğŸ” æ¥å£åˆ—è¡¨

### 1. è·å–å¯é¢„çº¦åœºåœ°

**æ¥å£åœ°å€**: `GET /api/reservation/venues`

**æ¥å£æè¿°**: è·å–å¯é¢„çº¦çš„åœºåœ°åˆ—è¡¨

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
venueType: string  // åœºåœ°ç±»å‹ï¼šmeeting_room/activity_room/officeï¼ˆå¯é€‰ï¼‰
capacity: number   // å®¹çº³äººæ•°ç­›é€‰ï¼ˆå¯é€‰ï¼‰
date: string       // æ—¥æœŸç­›é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼ˆå¯é€‰ï¼‰
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–åœºåœ°åˆ—è¡¨æˆåŠŸ",
  "data": [
    {
      "_id": "venue_id_1",
      "name": "ä¼šè®®å®¤A",
      "type": "meeting_room",
      "capacity": 20,
      "location": "3æ¥¼ä¸œä¾§",
      "facilities": ["æŠ•å½±ä»ª", "ç™½æ¿", "éŸ³å“"],
      "images": ["https://example.com/venue1.jpg"],
      "description": "é€‚åˆå°å‹ä¼šè®®å’Œè®¨è®º",
      "hourlyRate": 100,
      "dailyRate": 800,
      "status": "available",
      "businessHours": "09:00-18:00"
    },
    {
      "_id": "venue_id_2",
      "name": "æ´»åŠ¨å®¤B",
      "type": "activity_room",
      "capacity": 50,
      "location": "1æ¥¼å¤§å…",
      "facilities": ["éŸ³å“", "ç¯å…‰", "èˆå°"],
      "images": ["https://example.com/venue2.jpg"],
      "description": "é€‚åˆä¸¾åŠæ´»åŠ¨å’ŒåŸ¹è®­",
      "hourlyRate": 200,
      "dailyRate": 1500,
      "status": "available",
      "businessHours": "08:00-22:00"
    }
  ]
}
```

---

### 2. æ£€æŸ¥åœºåœ°å¯ç”¨æ€§

**æ¥å£åœ°å€**: `GET /api/reservation/venues/:venueId/availability`

**æ¥å£æè¿°**: æ£€æŸ¥æŒ‡å®šåœºåœ°åœ¨æŒ‡å®šæ—¶é—´æ®µçš„å¯ç”¨æ€§

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**è·¯å¾„å‚æ•°**:
```
venueId: string  // åœºåœ°ID
```

**æŸ¥è¯¢å‚æ•°**:
```
date: string           // æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD
startTime: string      // å¼€å§‹æ—¶é—´ï¼Œæ ¼å¼ï¼šHH:mm
endTime: string        // ç»“æŸæ—¶é—´ï¼Œæ ¼å¼ï¼šHH:mm
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æ£€æŸ¥å¯ç”¨æ€§æˆåŠŸ",
  "data": {
    "venueId": "venue_id_1",
    "date": "2024-01-15",
    "startTime": "14:00",
    "endTime": "16:00",
    "available": true,
    "conflictingReservations": [],
    "availableSlots": [
      {
        "startTime": "09:00",
        "endTime": "12:00"
      },
      {
        "startTime": "14:00",
        "endTime": "18:00"
      }
    ]
  }
}
```

**æ—¶é—´å†²çªæ—¶çš„å“åº”**:
```json
{
  "success": true,
  "message": "æ£€æŸ¥å¯ç”¨æ€§æˆåŠŸ",
  "data": {
    "venueId": "venue_id_1",
    "date": "2024-01-15",
    "startTime": "14:00",
    "endTime": "16:00",
    "available": false,
    "conflictingReservations": [
      {
        "reservationId": "res_id_1",
        "startTime": "13:00",
        "endTime": "15:00",
        "userName": "å¼ ä¸‰",
        "purpose": "éƒ¨é—¨ä¼šè®®"
      }
    ],
    "availableSlots": [
      {
        "startTime": "09:00",
        "endTime": "12:00"
      },
      {
        "startTime": "16:00",
        "endTime": "18:00"
      }
    ]
  }
}
```

---

### 3. æäº¤åœºåœ°é¢„çº¦

**æ¥å£åœ°å€**: `POST /api/reservation/submit`

**æ¥å£æè¿°**: æäº¤åœºåœ°é¢„çº¦ç”³è¯·

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "venueId": "string",           // åœºåœ°ID
  "venueName": "string",         // åœºåœ°åç§°
  "reservationDate": "2024-01-15", // é¢„çº¦æ—¥æœŸ
  "startTime": "14:00",          // å¼€å§‹æ—¶é—´
  "endTime": "16:00",            // ç»“æŸæ—¶é—´
  "purpose": "éƒ¨é—¨ä¼šè®®",          // ä½¿ç”¨ç›®çš„
  "attendeeCount": 15,           // å‚ä¸äººæ•°
  "contactPerson": "å¼ ä¸‰",        // è”ç³»äºº
  "contactPhone": "13800138000", // è”ç³»ç”µè¯
  "facilities": ["æŠ•å½±ä»ª", "ç™½æ¿"], // éœ€è¦çš„è®¾æ–½ï¼ˆå¯é€‰ï¼‰
  "remark": "éœ€è¦å‡†å¤‡èŒ¶æ°´"        // å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "é¢„çº¦ç”³è¯·æäº¤æˆåŠŸ",
  "data": {
    "reservationId": "res_id_123",
    "venueName": "ä¼šè®®å®¤A",
    "reservationDate": "2024-01-15",
    "startTime": "14:00",
    "endTime": "16:00",
    "purpose": "éƒ¨é—¨ä¼šè®®",
    "status": "pending",
    "createTime": "2024-01-15T10:30:00.000Z"
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "message": "é¢„çº¦å¤±è´¥",
  "error": "è¯¥æ—¶é—´æ®µå·²è¢«é¢„çº¦"
}
```

---

### 4. è·å–æˆ‘çš„é¢„çº¦

**æ¥å£åœ°å€**: `GET /api/reservation/my-reservations`

**æ¥å£æè¿°**: è·å–å½“å‰ç”¨æˆ·çš„é¢„çº¦è®°å½•

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
page: number          // é¡µç ï¼Œé»˜è®¤1
size: number          // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
status: string        // çŠ¶æ€ç­›é€‰ï¼špending/approved/rejected/completed/cancelledï¼ˆå¯é€‰ï¼‰
startDate: string     // å¼€å§‹æ—¥æœŸç­›é€‰ï¼ˆå¯é€‰ï¼‰
endDate: string       // ç»“æŸæ—¥æœŸç­›é€‰ï¼ˆå¯é€‰ï¼‰
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–é¢„çº¦è®°å½•æˆåŠŸ",
  "data": {
    "list": [
      {
        "_id": "res_id_1",
        "venueId": "venue_id_1",
        "venueName": "ä¼šè®®å®¤A",
        "reservationDate": "2024-01-15",
        "startTime": "14:00",
        "endTime": "16:00",
        "purpose": "éƒ¨é—¨ä¼šè®®",
        "attendeeCount": 15,
        "status": "approved",
        "createTime": "2024-01-15T10:30:00.000Z",
        "approveTime": "2024-01-15T11:00:00.000Z",
        "approvedBy": "admin_id"
      }
    ],
    "pagination": {
      "page": 1,
      "size": 20,
      "total": 8,
      "totalPages": 1
    }
  }
}
```

---

### 5. è·å–é¢„çº¦è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/reservation/:reservationId/detail`

**æ¥å£æè¿°**: è·å–æŒ‡å®šé¢„çº¦çš„è¯¦ç»†ä¿¡æ¯

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**è·¯å¾„å‚æ•°**:
```
reservationId: string  // é¢„çº¦ID
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–é¢„çº¦è¯¦æƒ…æˆåŠŸ",
  "data": {
    "_id": "res_id_1",
    "userId": "user_id_1",
    "userName": "å¼ ä¸‰",
    "venueId": "venue_id_1",
    "venueName": "ä¼šè®®å®¤A",
    "venueType": "meeting_room",
    "venueLocation": "3æ¥¼ä¸œä¾§",
    "reservationDate": "2024-01-15",
    "startTime": "14:00",
    "endTime": "16:00",
    "purpose": "éƒ¨é—¨ä¼šè®®",
    "attendeeCount": 15,
    "contactPerson": "å¼ ä¸‰",
    "contactPhone": "13800138000",
    "facilities": ["æŠ•å½±ä»ª", "ç™½æ¿"],
    "remark": "éœ€è¦å‡†å¤‡èŒ¶æ°´",
    "status": "approved",
    "createTime": "2024-01-15T10:30:00.000Z",
    "approveTime": "2024-01-15T11:00:00.000Z",
    "approvedBy": "admin_id",
    "approvedByName": "ç®¡ç†å‘˜",
    "rejectReason": null,
    "venue": {
      "images": ["https://example.com/venue1.jpg"],
      "description": "é€‚åˆå°å‹ä¼šè®®å’Œè®¨è®º",
      "hourlyRate": 100,
      "dailyRate": 800
    }
  }
}
```

---

### 6. å–æ¶ˆé¢„çº¦

**æ¥å£åœ°å€**: `PUT /api/reservation/:reservationId/cancel`

**æ¥å£æè¿°**: å–æ¶ˆæŒ‡å®šçš„é¢„çº¦

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**:
```
reservationId: string  // é¢„çº¦ID
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "reason": "string"  // å–æ¶ˆåŸå› ï¼ˆå¯é€‰ï¼‰
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "é¢„çº¦å–æ¶ˆæˆåŠŸ",
  "data": {
    "reservationId": "res_id_1",
    "oldStatus": "approved",
    "newStatus": "cancelled",
    "cancelTime": "2024-01-15T13:30:00.000Z",
    "cancelReason": "ä¼šè®®æ”¹æœŸ"
  }
}
```

---

## ğŸ‘¥ ç®¡ç†å‘˜åŠŸèƒ½æ¥å£

### 7. è·å–é¢„çº¦åˆ—è¡¨ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰

**æ¥å£åœ°å€**: `GET /api/reservation/list`

**æ¥å£æè¿°**: è·å–æ‰€æœ‰é¢„çº¦è®°å½•ï¼ˆéœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™ï¼‰

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
page: number          // é¡µç ï¼Œé»˜è®¤1
size: number          // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
status: string        // çŠ¶æ€ç­›é€‰ï¼ˆå¯é€‰ï¼‰
venueId: string       // åœºåœ°IDç­›é€‰ï¼ˆå¯é€‰ï¼‰
startDate: string     // å¼€å§‹æ—¥æœŸç­›é€‰ï¼ˆå¯é€‰ï¼‰
endDate: string       // ç»“æŸæ—¥æœŸç­›é€‰ï¼ˆå¯é€‰ï¼‰
userId: string        // ç”¨æˆ·IDç­›é€‰ï¼ˆå¯é€‰ï¼‰
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–é¢„çº¦åˆ—è¡¨æˆåŠŸ",
  "data": {
    "list": [
      {
        "_id": "res_id_1",
        "userId": "user_id_1",
        "userName": "å¼ ä¸‰",
        "department": "æŠ€æœ¯éƒ¨",
        "venueName": "ä¼šè®®å®¤A",
        "reservationDate": "2024-01-15",
        "startTime": "14:00",
        "endTime": "16:00",
        "purpose": "éƒ¨é—¨ä¼šè®®",
        "attendeeCount": 15,
        "status": "pending",
        "createTime": "2024-01-15T10:30:00.000Z"
      }
    ],
    "pagination": {
      "page": 1,
      "size": 20,
      "total": 25,
      "totalPages": 2
    }
  }
}
```

---

### 8. å®¡æ ¸é¢„çº¦ç”³è¯·ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰

**æ¥å£åœ°å€**: `PUT /api/reservation/:reservationId/review`

**æ¥å£æè¿°**: å®¡æ ¸é¢„çº¦ç”³è¯·ï¼ˆéœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™ï¼‰

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**:
```
reservationId: string  // é¢„çº¦ID
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "action": "approve",     // å®¡æ ¸åŠ¨ä½œï¼šapprove/reject
  "remark": "åŒæ„ä½¿ç”¨",     // å®¡æ ¸å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰
  "rejectReason": null     // æ‹’ç»åŸå› ï¼ˆrejectæ—¶å¿…å¡«ï¼‰
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "é¢„çº¦å®¡æ ¸æˆåŠŸ",
  "data": {
    "reservationId": "res_id_1",
    "oldStatus": "pending",
    "newStatus": "approved",
    "reviewTime": "2024-01-15T11:00:00.000Z",
    "reviewedBy": "admin_id",
    "remark": "åŒæ„ä½¿ç”¨"
  }
}
```

---

### 9. æ‰¹é‡å®¡æ ¸é¢„çº¦ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰

**æ¥å£åœ°å€**: `PUT /api/reservation/batch/review`

**æ¥å£æè¿°**: æ‰¹é‡å®¡æ ¸å¤šä¸ªé¢„çº¦ç”³è¯·ï¼ˆéœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™ï¼‰

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "reservationIds": ["res_id_1", "res_id_2", "res_id_3"],  // é¢„çº¦IDæ•°ç»„
  "action": "approve",     // å®¡æ ¸åŠ¨ä½œï¼šapprove/reject
  "remark": "æ‰¹é‡å®¡æ ¸é€šè¿‡"  // å®¡æ ¸å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æ‰¹é‡å®¡æ ¸æˆåŠŸ",
  "data": {
    "approvedCount": 3,
    "failedCount": 0,
    "failedReservationIds": [],
    "reviewTime": "2024-01-15T11:00:00.000Z",
    "reviewedBy": "admin_id"
  }
}
```

---

### 10. è·å–é¢„çº¦ç»Ÿè®¡ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰

**æ¥å£åœ°å€**: `GET /api/reservation/stats`

**æ¥å£æè¿°**: è·å–é¢„çº¦ç»Ÿè®¡æ•°æ®ï¼ˆéœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™ï¼‰

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer {token}
```

**æŸ¥è¯¢å‚æ•°**:
```
date: string  // ç»Ÿè®¡æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼Œé»˜è®¤ä»Šæ—¥
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–é¢„çº¦ç»Ÿè®¡æˆåŠŸ",
  "data": {
    "date": "2024-01-15",
    "totalReservations": 12,
    "pendingReservations": 3,
    "approvedReservations": 8,
    "rejectedReservations": 1,
    "cancelledReservations": 0,
    "byVenue": [
      {
        "venueName": "ä¼šè®®å®¤A",
        "reservations": 5,
        "utilization": "62.5%"
      },
      {
        "venueName": "æ´»åŠ¨å®¤B",
        "reservations": 4,
        "utilization": "50.0%"
      }
    ],
    "byTimeSlot": [
      {
        "timeSlot": "09:00-12:00",
        "reservations": 4
      },
      {
        "timeSlot": "14:00-18:00",
        "reservations": 8
      }
    ]
  }
}
```

---

## ğŸ“Š æ•°æ®ç»“æ„è¯´æ˜

### åœºåœ°ç±»å‹ (venueType)

| å€¼ | è¯´æ˜ | æè¿° |
|----|------|------|
| `meeting_room` | ä¼šè®®å®¤ | é€‚åˆä¼šè®®å’Œè®¨è®º |
| `activity_room` | æ´»åŠ¨å®¤ | é€‚åˆæ´»åŠ¨å’ŒåŸ¹è®­ |
| `office` | åŠå…¬å®¤ | é€‚åˆåŠå…¬å’Œæ´½è°ˆ |

### é¢„çº¦çŠ¶æ€ (status)

| å€¼ | è¯´æ˜ | æè¿° |
|----|------|------|
| `pending` | å¾…å®¡æ ¸ | é¢„çº¦ç”³è¯·å·²æäº¤ï¼Œç­‰å¾…å®¡æ ¸ |
| `approved` | å·²æ‰¹å‡† | é¢„çº¦ç”³è¯·å·²æ‰¹å‡†ï¼Œå¯ä»¥ä½¿ç”¨ |
| `rejected` | å·²æ‹’ç» | é¢„çº¦ç”³è¯·è¢«æ‹’ç» |
| `completed` | å·²å®Œæˆ | é¢„çº¦æ—¶é—´å·²è¿‡ï¼Œé¢„çº¦å®Œæˆ |
| `cancelled` | å·²å–æ¶ˆ | é¢„çº¦è¢«å–æ¶ˆ |

### åœºåœ°çŠ¶æ€ (status)

| å€¼ | è¯´æ˜ | æè¿° |
|----|------|------|
| `available` | å¯ç”¨ | åœºåœ°å¯ä»¥é¢„çº¦ |
| `maintenance` | ç»´æŠ¤ä¸­ | åœºåœ°æ­£åœ¨ç»´æŠ¤ï¼Œä¸å¯é¢„çº¦ |
| `unavailable` | ä¸å¯ç”¨ | åœºåœ°æš‚æ—¶ä¸å¯ç”¨ |

## ğŸ“± å‰ç«¯é›†æˆç¤ºä¾‹

### JavaScriptç¤ºä¾‹

```javascript
// è·å–å¯é¢„çº¦åœºåœ°
async function getVenues(params = {}) {
  try {
    const token = localStorage.getItem('token');
    const queryString = new URLSearchParams(params).toString();
    
    const response = await fetch(`/api/reservation/venues?${queryString}`, {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('è·å–åœºåœ°åˆ—è¡¨å¤±è´¥:', error);
    throw error;
  }
}

// æ£€æŸ¥åœºåœ°å¯ç”¨æ€§
async function checkAvailability(venueId, date, startTime, endTime) {
  try {
    const token = localStorage.getItem('token');
    const params = new URLSearchParams({
      date,
      startTime,
      endTime
    });
    
    const response = await fetch(`/api/reservation/venues/${venueId}/availability?${params.toString()}`, {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('æ£€æŸ¥å¯ç”¨æ€§å¤±è´¥:', error);
    throw error;
  }
}

// æäº¤é¢„çº¦ç”³è¯·
async function submitReservation(reservationData) {
  try {
    const token = localStorage.getItem('token');
    const response = await fetch('/api/reservation/submit', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(reservationData)
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('æäº¤é¢„çº¦å¤±è´¥:', error);
    throw error;
  }
}

// è·å–æˆ‘çš„é¢„çº¦
async function getMyReservations(params = {}) {
  try {
    const token = localStorage.getItem('token');
    const queryString = new URLSearchParams(params).toString();
    
    const response = await fetch(`/api/reservation/my-reservations?${queryString}`, {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('è·å–é¢„çº¦è®°å½•å¤±è´¥:', error);
    throw error;
  }
}
```

### Reactç»„ä»¶ç¤ºä¾‹

```jsx
import React, { useState, useEffect } from 'react';

// åœºåœ°é€‰æ‹©ç»„ä»¶
function VenueSelection({ onVenueSelect }) {
  const [venues, setVenues] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedVenue, setSelectedVenue] = useState(null);

  useEffect(() => {
    fetchVenues();
  }, []);

  const fetchVenues = async () => {
    try {
      setLoading(true);
      const data = await getVenues();
      setVenues(data);
    } catch (error) {
      console.error('è·å–åœºåœ°å¤±è´¥:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleVenueSelect = (venue) => {
    setSelectedVenue(venue);
    onVenueSelect(venue);
  };

  if (loading) return <div>åŠ è½½ä¸­...</div>;

  return (
    <div className="venue-selection">
      <h3>é€‰æ‹©åœºåœ°</h3>
      <div className="venues-grid">
        {venues.map((venue) => (
          <div 
            key={venue._id} 
            className={`venue-item ${selectedVenue?._id === venue._id ? 'selected' : ''}`}
            onClick={() => handleVenueSelect(venue)}
          >
            <img src={venue.images[0]} alt={venue.name} />
            <h4>{venue.name}</h4>
            <p className="venue-type">{getVenueTypeName(venue.type)}</p>
            <p className="venue-capacity">å®¹çº³ {venue.capacity} äºº</p>
            <p className="venue-location">{venue.location}</p>
            <p className="venue-rate">Â¥{venue.hourlyRate}/å°æ—¶</p>
            <div className="venue-facilities">
              {venue.facilities.map((facility, index) => (
                <span key={index} className="facility-tag">{facility}</span>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// æ—¶é—´é€‰æ‹©ç»„ä»¶
function TimeSelection({ venue, onTimeSelect }) {
  const [selectedDate, setSelectedDate] = useState('');
  const [selectedStartTime, setSelectedStartTime] = useState('');
  const [selectedEndTime, setSelectedEndTime] = useState('');
  const [availability, setAvailability] = useState(null);

  const handleTimeCheck = async () => {
    if (!selectedDate || !selectedStartTime || !selectedEndTime) return;
    
    try {
      const data = await checkAvailability(
        venue._id,
        selectedDate,
        selectedStartTime,
        selectedEndTime
      );
      setAvailability(data);
      
      if (data.available) {
        onTimeSelect({
          date: selectedDate,
          startTime: selectedStartTime,
          endTime: selectedEndTime
        });
      }
    } catch (error) {
      console.error('æ£€æŸ¥å¯ç”¨æ€§å¤±è´¥:', error);
    }
  };

  return (
    <div className="time-selection">
      <h3>é€‰æ‹©æ—¶é—´</h3>
      <div className="time-inputs">
        <input
          type="date"
          value={selectedDate}
          onChange={(e) => setSelectedDate(e.target.value)}
          min={new Date().toISOString().split('T')[0]}
        />
        <input
          type="time"
          value={selectedStartTime}
          onChange={(e) => setSelectedStartTime(e.target.value)}
        />
        <input
          type="time"
          value={selectedEndTime}
          onChange={(e) => setSelectedEndTime(e.target.value)}
        />
        <button onClick={handleTimeCheck}>æ£€æŸ¥å¯ç”¨æ€§</button>
      </div>
      
      {availability && (
        <div className={`availability-result ${availability.available ? 'available' : 'unavailable'}`}>
          {availability.available ? (
            <p>âœ… è¯¥æ—¶é—´æ®µå¯ç”¨</p>
          ) : (
            <div>
              <p>âŒ è¯¥æ—¶é—´æ®µä¸å¯ç”¨</p>
              <p>å†²çªé¢„çº¦ï¼š</p>
              <ul>
                {availability.conflictingReservations.map((conflict) => (
                  <li key={conflict.reservationId}>
                    {conflict.startTime}-{conflict.endTime} - {conflict.userName} ({conflict.purpose})
                  </li>
                ))}
              </ul>
            </div>
          )}
        </div>
      )}
    </div>
  );
}

// è·å–åœºåœ°ç±»å‹åç§°
function getVenueTypeName(type) {
  const typeNames = {
    'meeting_room': 'ä¼šè®®å®¤',
    'activity_room': 'æ´»åŠ¨å®¤',
    'office': 'åŠå…¬å®¤'
  };
  return typeNames[type] || type;
}
```

## ğŸ”„ ä¸šåŠ¡æµç¨‹è¯´æ˜

### é¢„çº¦æµç¨‹

1. **é€‰æ‹©åœºåœ°**: ç”¨æˆ·æµè§ˆå¯ç”¨åœºåœ°åˆ—è¡¨
2. **æ£€æŸ¥å¯ç”¨æ€§**: ç”¨æˆ·é€‰æ‹©æ—¶é—´å¹¶æ£€æŸ¥åœºåœ°å¯ç”¨æ€§
3. **æäº¤ç”³è¯·**: ç”¨æˆ·å¡«å†™é¢„çº¦ä¿¡æ¯å¹¶æäº¤ç”³è¯·
4. **ç®¡ç†å‘˜å®¡æ ¸**: ç®¡ç†å‘˜å®¡æ ¸é¢„çº¦ç”³è¯·
5. **é¢„çº¦ç¡®è®¤**: ç”³è¯·é€šè¿‡åï¼Œé¢„çº¦ç”Ÿæ•ˆ
6. **ä½¿ç”¨åœºåœ°**: ç”¨æˆ·åœ¨é¢„çº¦æ—¶é—´ä½¿ç”¨åœºåœ°
7. **é¢„çº¦å®Œæˆ**: é¢„çº¦æ—¶é—´ç»“æŸåï¼Œé¢„çº¦çŠ¶æ€å˜ä¸ºå®Œæˆ

### å–æ¶ˆæµç¨‹

1. **ç”³è¯·å–æ¶ˆ**: ç”¨æˆ·åœ¨é¢„çº¦æ—¶é—´å‰ç”³è¯·å–æ¶ˆ
2. **ç³»ç»Ÿå¤„ç†**: ç³»ç»Ÿè‡ªåŠ¨å¤„ç†å–æ¶ˆç”³è¯·
3. **é¢„çº¦å–æ¶ˆ**: é¢„çº¦çŠ¶æ€å˜ä¸ºå·²å–æ¶ˆ

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æƒé™æ§åˆ¶**: ç®¡ç†å‘˜åŠŸèƒ½éœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™ï¼Œå‰ç«¯éœ€è¦æ ¹æ®ç”¨æˆ·è§’è‰²æ§åˆ¶æ˜¾ç¤º
2. **æ—¶é—´é™åˆ¶**: é¢„çº¦éœ€è¦æå‰ç”³è¯·ï¼Œå–æ¶ˆä¹Ÿéœ€è¦æå‰æ“ä½œ
3. **åœºåœ°å†²çª**: åŒä¸€æ—¶é—´æ®µåªèƒ½æœ‰ä¸€ä¸ªé¢„çº¦ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥å†²çª
4. **çŠ¶æ€ç®¡ç†**: é¢„çº¦çŠ¶æ€å˜æ›´ä¼šè®°å½•æ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡
5. **æ•°æ®éªŒè¯**: æ‰€æœ‰è¾“å…¥æ•°æ®éƒ½ä¼šè¿›è¡ŒéªŒè¯ï¼Œå‰ç«¯ä¹Ÿéœ€è¦è¿›è¡Œç›¸åº”çš„éªŒè¯
6. **é”™è¯¯å¤„ç†**: æ¥å£è¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œå‰ç«¯éœ€è¦å¦¥å–„å¤„ç†å„ç§é”™è¯¯æƒ…å†µ
7. **å®æ—¶æ›´æ–°**: åœºåœ°å¯ç”¨æ€§ä¼šå®æ—¶æ›´æ–°ï¼Œå»ºè®®åœ¨å…³é”®æ“ä½œååˆ·æ–°æ•°æ®
