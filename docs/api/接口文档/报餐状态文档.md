'''# 个人报餐状态接口文档

## 📋 接口概述

**接口名称**: 获取个人报餐状态  
**接口路径**: `GET /api/dining/personal-status`  
**功能描述**: 获取用户指定日期的个人报餐状态信息，包含早中晚三个餐次的报餐情况，用于前端生成用餐卡片。

## 🔐 权限要求

- 需要用户认证Token
- 用户只能查看自己的报餐状态

## 📥 请求参数

### Query Parameters

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| date | string | 否 | 今天 | 查询日期，格式：YYYY-MM-DD |

### 请求示例

```http
GET /api/dining/personal-status?date=2025-09-04
Authorization: Bearer {your-jwt-token}
Content-Type: application/json
```

## 📤 响应数据

### 成功响应 (200)

```json
{
  "success": true,
  "message": "获取个人报餐状态成功",
  "code": "200",
  "timestamp": "2025-09-04T10:15:08.638Z",
  "data": {
    "userId": "user_123",
    "userName": "张三",
    "department": "技术部",
    "queryDate": "2025-09-04",
    "mealStatus": {
      "breakfast": {
        "isRegistered": true,
        "status": "confirmed",
        "statusText": "已确认",
        "orderId": "order_123",
        "menuId": "menu_123",
        "menuName": "今日早餐",
        "dishes": [
          {
            "dishId": "dish_1",
            "dishName": "小笼包",
            "dishImage": "",
            "originalPrice": 10.00,
            "menuPrice": 8.00,
            "sort": 1
          },
          {
            "dishId": "dish_2",
            "dishName": "豆浆",
            "dishImage": "",
            "originalPrice": 5.00,
            "menuPrice": 4.00,
            "sort": 2
          }
        ],
        "totalAmount": 12.00,
        "registerTime": "2025-09-04T08:30:00.000Z",
        "registrantName": "部门管理员",
        "remark": "备注信息"
      },
      "lunch": {
        "isRegistered": true,
        "status": "pending",
        "statusText": "待确认",
        "orderId": "order_124",
        "menuId": "menu_124",
        "menuName": "今日午餐",
        "dishes": [
          {
            "dishId": "dish_3",
            "dishName": "宫保鸡丁",
            "dishImage": "",
            "originalPrice": 18.00,
            "menuPrice": 15.00,
            "sort": 1
          }
        ],
        "totalAmount": 15.00,
        "registerTime": "2025-09-04T10:15:00.000Z",
        "registrantName": "部门管理员",
        "remark": ""
      },
      "dinner": {
        "isRegistered": false,
        "status": null,
        "statusText": "未报餐",
        "orderId": null,
        "menuId": null,
        "menuName": null,
        "dishes": [],
        "totalAmount": 0.00,
        "registerTime": null,
        "registrantName": null,
        "remark": null
      }
    },
    "summary": {
      "totalRegistered": 2,
      "totalAmount": 27.00,
      "confirmedCount": 1,
      "pendingCount": 1,
      "unregisteredCount": 1
    },
    "availableMenus": {
      "breakfast": {
        "menuId": "menu_123",
        "menuName": "今日早餐",
        "publishStatus": "published",
        "dishes": [
          {
            "dishId": "dish_1",
            "dishName": "小笼包",
            "dishImage": "",
            "originalPrice": 10.00,
            "menuPrice": 8.00,
            "sort": 1
          }
        ]
      },
      "lunch": {
        "menuId": "menu_124",
        "menuName": "今日午餐",
        "publishStatus": "published",
        "dishes": [
          {
            "dishId": "dish_3",
            "dishName": "宫保鸡丁",
            "dishImage": "",
            "originalPrice": 18.00,
            "menuPrice": 15.00,
            "sort": 1
          }
        ]
      },
      "dinner": {
        "menuId": null,
        "menuName": null,
        "publishStatus": null,
        "dishes": []
      }
    }
  }
}
```

### 错误响应

#### 400 - 参数错误
```json
{
  "success": false,
  "message": "日期格式不正确，请使用YYYY-MM-DD格式",
  "code": "400",
  "timestamp": "2025-09-04T10:15:08.638Z"
}
```

#### 401 - 未授权
```json
{
  "success": false,
  "message": "未授权访问",
  "code": "401",
  "timestamp": "2025-09-04T10:15:08.638Z"
}
```

#### 404 - 用户不存在
```json
{
  "success": false,
  "message": "用户不存在",
  "code": "404",
  "timestamp": "2025-09-04T10:15:08.638Z"
}
```

#### 500 - 服务器错误
```json
{
  "success": false,
  "message": "获取个人报餐状态失败",
  "code": "500",
  "timestamp": "2025-09-04T10:15:08.638Z"
}
```

## 📊 数据结构说明

### mealStatus 对象

每个餐次（breakfast/lunch/dinner）包含以下字段：

| 字段名 | 类型 | 说明 |
|--------|------|------|
| isRegistered | boolean | 是否已报餐 |
| status | string\|null | 报餐状态：pending/confirmed/completed/cancelled |
| statusText | string | 状态文本：待确认/已确认/已完成/已取消/未报餐 |
| orderId | string\|null | 订单ID |
| menuId | string\|null | 菜单ID |
| menuName | string\|null | 菜单名称 |
| dishes | array | 菜品列表 |
| totalAmount | number | 总金额 |
| registerTime | string\|null | 报餐时间 |
| registrantName | string\|null | 报餐人姓名 |
| remark | string\|null | 备注信息 |

### dishes 数组

每个菜品包含以下字段：

| 字段名 | 类型 | 说明 |
|--------|------|------|
| dishId | string | 菜品ID |
| dishName | string | 菜品名称 |
| dishImage | string | 菜品图片URL |
| originalPrice | number | 原始价格 |
| menuPrice | number | 菜单价格 |
| sort | number | 排序 |

### summary 对象

汇总统计信息：

| 字段名 | 类型 | 说明 |
|--------|------|------|
| totalRegistered | number | 已报餐餐次数量 |
| totalAmount | number | 总金额 |
| confirmedCount | number | 已确认数量 |
| pendingCount | number | 待确认数量 |
| unregisteredCount | number | 未报餐数量 |

## 🎨 前端使用示例

### React 组件示例

```jsx
import React, { useState, useEffect } from 'react';

const DiningCard = () => {
  const [diningStatus, setDiningStatus] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchPersonalDiningStatus();
  }, []);

  const fetchPersonalDiningStatus = async () => {
    try {
      const response = await fetch('/api/dining/personal-status', {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        }
      });
      const data = await response.json();
      setDiningStatus(data.data);
