å¥½çš„ï¼æˆ‘æ¥ä¸ºå‰ç«¯å¼€å‘æä¾›å®Œæ•´çš„èœå“ç®¡ç†å’Œèœå•ç®¡ç†æ¨¡å—APIæ–‡æ¡£ã€‚

## ğŸ½ï¸ èœå“ç®¡ç†æ¨¡å— API æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **åŸºç¡€è·¯å¾„**: `/api/admin/dishes`
- **è®¤è¯æ–¹å¼**: JWT Token
- **æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜åŠä»¥ä¸Š

---

### 1. è·å–èœå“åˆ—è¡¨
```http
GET /api/admin/dishes
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `page` | number | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| `pageSize` | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100 |
| `keyword` | string | å¦ | æœç´¢å…³é”®è¯ï¼ˆèœå“åç§°ã€æè¿°ï¼‰ |
| `categoryId` | string | å¦ | èœå“åˆ†ç±»ID |
| `status` | string | å¦ | èœå“çŠ¶æ€ï¼š`active`(ä¸Šæ¶)ã€`inactive`(ä¸‹æ¶)ã€`deleted`(å·²åˆ é™¤) |
| `isRecommended` | boolean | å¦ | æ˜¯å¦æ¨èèœå“ |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "è·å–èœå“åˆ—è¡¨æˆåŠŸ",
  "data": {
    "list": [
      {
        "_id": "dish-001",
        "name": "å®«ä¿é¸¡ä¸",
        "description": "ç»å…¸å·èœï¼Œå£æ„Ÿéº»è¾£é²œé¦™",
        "price": 28.00,
        "categoryId": "cat-001",
        "categoryName": "å·èœ",
        "image": "https://example.com/dish-image.jpg",
        "calories": 320,
        "protein": 25.5,
        "fat": 18.2,
        "carbohydrate": 12.8,
        "tags": ["éº»è¾£", "ç»å…¸", "å·èœ"],
        "isRecommended": true,
        "status": "active",
        "createBy": "admin-001",
        "createByName": "å¼ ç®¡ç†å‘˜",
        "createTime": "2025-08-30T10:00:00.000Z"
      }
    ],
    "total": 150,
    "page": 1,
    "pageSize": 20
  }
}
```

---

### 2. è·å–èœå“è¯¦æƒ…
```http
GET /api/admin/dishes/:dishId
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `dishId` | string | æ˜¯ | èœå“ID |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "è·å–èœå“è¯¦æƒ…æˆåŠŸ",
  "data": {
    "_id": "dish-001",
    "name": "å®«ä¿é¸¡ä¸",
    "description": "ç»å…¸å·èœï¼Œå£æ„Ÿéº»è¾£é²œé¦™",
    "price": 28.00,
    "categoryId": "cat-001",
    "categoryName": "å·èœ",
    "image": "https://example.com/dish-image.jpg",
    "calories": 320,
    "protein": 25.5,
    "fat": 18.2,
    "carbohydrate": 12.8,
    "tags": ["éº»è¾£", "ç»å…¸", "å·èœ"],
    "isRecommended": true,
    "status": "active",
    "createBy": "admin-001",
    "createByName": "å¼ ç®¡ç†å‘˜",
    "createTime": "2025-08-30T10:00:00.000Z"
  }
}
```

---

### 3. åˆ›å»ºèœå“
```http
POST /api/admin/dishes
```

**è¯·æ±‚ä½“:**
```json
{
  "name": "å®«ä¿é¸¡ä¸",
  "description": "ç»å…¸å·èœï¼Œå£æ„Ÿéº»è¾£é²œé¦™",
  "price": 28.00,
  "categoryId": "cat-001",
  "image": "https://example.com/dish-image.jpg",
  "calories": 320,
  "protein": 25.5,
  "fat": 18.2,
  "carbohydrate": 12.8,
  "tags": ["éº»è¾£", "ç»å…¸", "å·èœ"],
  "isRecommended": true
}
```

**å­—æ®µè¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `name` | string | æ˜¯ | èœå“åç§°ï¼Œæœ€å¤§100å­—ç¬¦ |
| `description` | string | å¦ | èœå“æè¿° |
| `price` | number | æ˜¯ | ä»·æ ¼ï¼Œä¿ç•™2ä½å°æ•° |
| `categoryId` | string | æ˜¯ | åˆ†ç±»ID |
| `image` | string | å¦ | å›¾ç‰‡URL |
| `calories` | number | å¦ | å¡è·¯é‡Œ |
| `protein` | number | å¦ | è›‹ç™½è´¨å«é‡ |
| `fat` | number | å¦ | è„‚è‚ªå«é‡ |
| `carbohydrate` | number | å¦ | ç¢³æ°´åŒ–åˆç‰©å«é‡ |
| `tags` | array | å¦ | æ ‡ç­¾æ•°ç»„ |
| `isRecommended` | boolean | å¦ | æ˜¯å¦æ¨èï¼Œé»˜è®¤false |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå“åˆ›å»ºæˆåŠŸ",
  "data": {
    "_id": "dish-001",
    "name": "å®«ä¿é¸¡ä¸",
    "createTime": "2025-08-30T10:00:00.000Z"
  }
}
```

---

### 4. æ›´æ–°èœå“
```http
PUT /api/admin/dishes/:dishId
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `dishId` | string | æ˜¯ | èœå“ID |

**è¯·æ±‚ä½“:** åŒåˆ›å»ºèœå“ï¼Œæ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå“æ›´æ–°æˆåŠŸ",
  "data": {
    "_id": "dish-001",
    "updateTime": "2025-08-30T10:30:00.000Z"
  }
}
```

---

### 5. åˆ é™¤èœå“
```http
DELETE /api/admin/dishes/:dishId
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `dishId` | string | æ˜¯ | èœå“ID |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå“åˆ é™¤æˆåŠŸ",
  "data": null
}
```

---

### 6. æ‰¹é‡æ›´æ–°èœå“çŠ¶æ€
```http
PUT /api/admin/dishes/batch/status
```

**è¯·æ±‚ä½“:**
```json
{
  "dishIds": ["dish-001", "dish-002"],
  "status": "inactive"
}
```

**å­—æ®µè¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `dishIds` | array | æ˜¯ | èœå“IDæ•°ç»„ |
| `status` | string | æ˜¯ | ç›®æ ‡çŠ¶æ€ï¼š`active`ã€`inactive`ã€`deleted` |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "æ‰¹é‡æ›´æ–°çŠ¶æ€æˆåŠŸ",
  "data": {
    "updatedCount": 2
  }
}
```

---

### 7. ä¸Šä¼ èœå“å›¾ç‰‡
```http
POST /api/admin/dishes/:dishId/image
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `dishId` | string | æ˜¯ | èœå“ID |

**è¯·æ±‚ä½“:** `multipart/form-data`
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `image` | file | æ˜¯ | å›¾ç‰‡æ–‡ä»¶ |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",
  "data": {
    "imageUrl": "https://example.com/dish-image.jpg",
    "fileId": "img-001"
  }
}
```

---

### 8. è·å–èœå“åˆ†ç±»åˆ—è¡¨
```http
GET /api/admin/dishes/categories
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "è·å–èœå“åˆ†ç±»æˆåŠŸ",
  "data": [
    {
      "_id": "cat-001",
      "name": "å·èœ",
      "description": "å››å·ç‰¹è‰²èœç³»",
      "sort": 1,
      "status": "active",
      "createTime": "2025-08-30T10:00:00.000Z"
    }
  ]
}
```

---

### 9. åˆ›å»ºèœå“åˆ†ç±»
```http
POST /api/admin/dishes/categories
```

**è¯·æ±‚ä½“:**
```json
{
  "name": "ç²¤èœ",
  "description": "å¹¿ä¸œç‰¹è‰²èœç³»",
  "sort": 2
}
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå“åˆ†ç±»åˆ›å»ºæˆåŠŸ",
  "data": {
    "_id": "cat-002",
    "name": "ç²¤èœ"
  }
}
```

---

### 10. æ›´æ–°èœå“åˆ†ç±»
```http
PUT /api/admin/dishes/categories/:categoryId
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `categoryId` | string | æ˜¯ | åˆ†ç±»ID |

**è¯·æ±‚ä½“:** åŒåˆ›å»ºåˆ†ç±»

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå“åˆ†ç±»æ›´æ–°æˆåŠŸ",
  "data": {
    "_id": "cat-002"
  }
}
```

---

### 11. è·å–å¯ç”¨èœå“åˆ—è¡¨ï¼ˆç”¨äºèœå•é€‰æ‹©ï¼‰
```http
GET /api/admin/dishes/available
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `pageSize` | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤100 |
| `categoryId` | string | å¦ | èœå“åˆ†ç±»ID |
| `keyword` | string | å¦ | æœç´¢å…³é”®è¯ |
| `status` | string | å¦ | èœå“çŠ¶æ€ï¼Œé»˜è®¤'active' |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "è·å–å¯ç”¨èœå“æˆåŠŸ",
  "data": [
    {
      "_id": "dish-001",
      "name": "å®«ä¿é¸¡ä¸",
      "description": "ç»å…¸å·èœï¼Œå£æ„Ÿéº»è¾£é²œé¦™",
      "price": 28.00,
      "categoryId": "cat-001",
      "categoryName": "å·èœ",
      "image": "https://example.com/dish-image.jpg",
      "calories": 320,
      "protein": 25.5,
      "fat": 18.2,
      "carbohydrate": 12.8,
      "tags": ["éº»è¾£", "ç»å…¸", "å·èœ"],
      "isRecommended": true
    }
  ]
}
```

---

## ï¿½ï¿½ èœå•ç®¡ç†æ¨¡å— API æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **åŸºç¡€è·¯å¾„**: `/api/admin/menu`
- **è®¤è¯æ–¹å¼**: JWT Token
- **æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜åŠä»¥ä¸Š

---

### 1. ä¿å­˜èœå•è‰ç¨¿
```http
POST /api/admin/menu/draft
```

**è¯·æ±‚ä½“:**
```json
{
  "date": "2025-08-30",
  "mealType": "lunch",
  "description": "ä»Šæ—¥åˆé¤èœå•",
  "dishes": [
    {
      "dishId": "dish-001",
      "price": 28.00,
      "sort": 1
    },
    {
      "dishId": "dish-002",
      "price": 32.00,
      "sort": 2
    }
  ]
}
```

**å­—æ®µè¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `date` | string | æ˜¯ | èœå•æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD |
| `mealType` | string | æ˜¯ | é¤æ¬¡ç±»å‹ï¼š`breakfast`ã€`lunch`ã€`dinner` |
| `description` | string | å¦ | èœå•æè¿° |
| `dishes` | array | å¦ | èœå“æ•°ç»„ |
| `dishes[].dishId` | string | æ˜¯ | èœå“ID |
| `dishes[].price` | number | å¦ | è‡ªå®šä¹‰ä»·æ ¼ï¼Œé»˜è®¤ä½¿ç”¨èœå“åŸä»· |
| `dishes[].sort` | number | å¦ | æ’åºï¼Œé»˜è®¤æŒ‰æ·»åŠ é¡ºåº |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå•è‰ç¨¿ä¿å­˜æˆåŠŸ",
  "data": {
    "id": "menu-001",
    "date": "2025-08-30",
    "mealType": "lunch",
    "description": "ä»Šæ—¥åˆé¤èœå•",
    "dishes": [...]
  }
}
```

---

### 2. å‘å¸ƒèœå•
```http
POST /api/admin/menu/publish
```

**è¯·æ±‚ä½“:** åŒä¿å­˜è‰ç¨¿

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå•å‘å¸ƒæˆåŠŸ",
  "data": {
    "id": "menu-001",
    "publishTime": "2025-08-30T10:00:00.000Z"
  }
}
```

---

### 3. è·å–èœå•å†å²
```http
GET /api/admin/menu/history
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `page` | number | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| `pageSize` | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |
| `startDate` | string | å¦ | å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD |
| `endDate` | string | å¦ | ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD |
| `mealType` | string | å¦ | é¤æ¬¡ç±»å‹ |
| `status` | string | å¦ | èœå•çŠ¶æ€ï¼š`draft`ã€`published`ã€`revoked` |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "è·å–èœå•å†å²æˆåŠŸ",
  "data": {
    "list": [
      {
        "_id": "menu-001",
        "name": "2025-08-30 åˆé¤èœå•",
        "publishDate": "2025-08-30",
        "mealType": "lunch",
        "description": "ä»Šæ—¥åˆé¤èœå•",
        "publishStatus": "published",
        "publisherId": "admin-001",
        "publish_by_name": "å¼ ç®¡ç†å‘˜",
        "createTime": "2025-08-30T10:00:00.000Z"
      }
    ],
    "total": 50,
    "page": 1,
    "pageSize": 20
  }
}
```

---

### 4. è·å–èœå•æ¨¡æ¿
```http
GET /api/admin/menu/templates
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "è·å–èœå•æ¨¡æ¿æˆåŠŸ",
  "data": [
    {
      "_id": "template-001",
      "name": "æ ‡å‡†åˆé¤æ¨¡æ¿",
      "description": "åŒ…å«ä¸»é£Ÿã€æ±¤å“ã€é…èœçš„åˆé¤æ¨¡æ¿",
      "dishes": [...],
      "status": "active",
      "createTime": "2025-08-30T10:00:00.000Z"
    }
  ]
}
```

---

### 5. æ’¤å›èœå•
```http
PUT /api/admin/menu/:menuId/revoke
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `menuId` | string | æ˜¯ | èœå•ID |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå•æ’¤å›æˆåŠŸ",
  "data": null
}
```

---

### 6. åˆ é™¤èœå•æ¨¡æ¿
```http
DELETE /api/admin/menu/templates/:templateId
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `templateId` | string | æ˜¯ | æ¨¡æ¿ID |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "åˆ é™¤èœå•æ¨¡æ¿æˆåŠŸ",
  "data": null
}
```

---

### 7. è·å–èœå•çš„èœå“åˆ—è¡¨
```http
GET /api/admin/menu/:menuId/dishes
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `menuId` | string | æ˜¯ | èœå•ID |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "è·å–èœå•èœå“æˆåŠŸ",
  "data": [
    {
      "_id": "md-001",
      "menuId": "menu-001",
      "dishId": "dish-001",
      "price": 28.00,
      "sort": 1,
      "dishName": "å®«ä¿é¸¡ä¸",
      "dishDescription": "ç»å…¸å·èœï¼Œå£æ„Ÿéº»è¾£é²œé¦™",
      "dishImage": "https://example.com/dish-image.jpg",
      "categoryName": "å·èœ"
    }
  ]
}
```

---

### 8. è®¾ç½®èœå•èœå“
```http
POST /api/admin/menu/:menuId/dishes
```

**è·¯å¾„å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `menuId` | string | æ˜¯ | èœå•ID |

**è¯·æ±‚ä½“:**
```json
{
  "dishItems": [
    {
      "dishId": "dish-001",
      "price": 28.00,
      "sort": 1
    },
    {
      "dishId": "dish-002",
      "price": 32.00,
      "sort": 2
    }
  ]
}
```

**å­—æ®µè¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `dishItems` | array | æ˜¯ | èœå“é¡¹ç›®æ•°ç»„ |
| `dishItems[].dishId` | string | æ˜¯ | èœå“ID |
| `dishItems[].price` | number | å¦ | è‡ªå®šä¹‰ä»·æ ¼ï¼Œé»˜è®¤0 |
| `dishItems[].sort` | number | å¦ | æ’åºï¼Œé»˜è®¤0 |

**å“åº”ç¤ºä¾‹:**
```json
{
  "success": true,
  "message": "èœå•èœå“è®¾ç½®æˆåŠŸ",
  "data": {
    "success": true,
    "message": "èœå•èœå“è®¾ç½®æˆåŠŸ"
  }
}
```

---

## ï¿½ï¿½ æƒé™è¯´æ˜

### èœå“ç®¡ç†æƒé™
- **æŸ¥çœ‹èœå“åˆ—è¡¨**: æ— éœ€è®¤è¯
- **æŸ¥çœ‹èœå“è¯¦æƒ…**: æ— éœ€è®¤è¯
- **åˆ›å»º/ç¼–è¾‘/åˆ é™¤èœå“**: éœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™
- **ä¸Šä¼ å›¾ç‰‡**: éœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™

### èœå•ç®¡ç†æƒé™
- **æ‰€æœ‰æ“ä½œ**: éœ€è¦éƒ¨é—¨ç®¡ç†å‘˜æƒé™

## ğŸ“ å‰ç«¯é›†æˆå»ºè®®

### 1. èœå“ç®¡ç†é¡µé¢
- å®ç°èœå“åˆ—è¡¨å±•ç¤ºï¼ˆæ”¯æŒåˆ†é¡µã€æœç´¢ã€ç­›é€‰ï¼‰
- èœå“åˆ›å»º/ç¼–è¾‘è¡¨å•
- èœå“çŠ¶æ€ç®¡ç†ï¼ˆä¸Šæ¶/ä¸‹æ¶/åˆ é™¤ï¼‰
- å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- åˆ†ç±»ç®¡ç†

### 2. èœå•ç®¡ç†é¡µé¢
- èœå•åˆ›å»ºå‘å¯¼ï¼ˆé€‰æ‹©æ—¥æœŸã€é¤æ¬¡ã€èœå“ï¼‰
- èœå“é€‰æ‹©å™¨ï¼ˆä»å¯ç”¨èœå“ä¸­é€‰æ‹©ï¼‰
- èœå•ç¼–è¾‘ï¼ˆè°ƒæ•´èœå“ã€ä»·æ ¼ã€æ’åºï¼‰
- èœå•å‘å¸ƒ/æ’¤å›åŠŸèƒ½
- èœå•å†å²æŸ¥çœ‹

### 3. èœå“é€‰æ‹©å™¨ç»„ä»¶
- æœç´¢å’Œç­›é€‰åŠŸèƒ½
- èœå“å¡ç‰‡å±•ç¤º
- å¤šé€‰åŠŸèƒ½
- ä»·æ ¼å’Œæ’åºè®¾ç½®
- å·²é€‰èœå“ç®¡ç†

### 4. æ•°æ®çŠ¶æ€ç®¡ç†
- èœå“æ•°æ®ç¼“å­˜
- åˆ†ç±»æ•°æ®ç¼“å­˜
- èœå•è‰ç¨¿ä¿å­˜
- å®æ—¶æ•°æ®åŒæ­¥

è¿™ä¸ªAPIæ–‡æ¡£ä¸ºå‰ç«¯å¼€å‘æä¾›äº†å®Œæ•´çš„æ¥å£è§„èŒƒï¼Œæ”¯æŒèœå“ç®¡ç†å’Œèœå•ç®¡ç†çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼ğŸ‰