好的！我来为前端开发提供完整的菜品管理和菜单管理模块API文档。

## 🍽️ 菜品管理模块 API 文档

### 基础信息
- **基础路径**: `/api/admin/dishes`
- **认证方式**: JWT Token
- **权限要求**: 部门管理员及以上

---

### 1. 获取菜品列表
```http
GET /api/admin/dishes
```

**查询参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `page` | number | 否 | 页码，默认1 |
| `pageSize` | number | 否 | 每页数量，默认20，最大100 |
| `keyword` | string | 否 | 搜索关键词（菜品名称、描述） |
| `categoryId` | string | 否 | 菜品分类ID |
| `status` | string | 否 | 菜品状态：`active`(上架)、`inactive`(下架)、`deleted`(已删除) |
| `isRecommended` | boolean | 否 | 是否推荐菜品 |

**响应示例:**
```json
{
  "success": true,
  "message": "获取菜品列表成功",
  "data": {
    "list": [
      {
        "_id": "dish-001",
        "name": "宫保鸡丁",
        "description": "经典川菜，口感麻辣鲜香",
        "price": 28.00,
        "categoryId": "cat-001",
        "categoryName": "川菜",
        "image": "https://example.com/dish-image.jpg",
        "calories": 320,
        "protein": 25.5,
        "fat": 18.2,
        "carbohydrate": 12.8,
        "tags": ["麻辣", "经典", "川菜"],
        "isRecommended": true,
        "status": "active",
        "createBy": "admin-001",
        "createByName": "张管理员",
        "createTime": "2025-08-30T10:00:00.000Z"
      }
    ],
    "total": 150,
    "page": 1,
    "pageSize": 20
  }
}
```

---

### 2. 获取菜品详情
```http
GET /api/admin/dishes/:dishId
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `dishId` | string | 是 | 菜品ID |

**响应示例:**
```json
{
  "success": true,
  "message": "获取菜品详情成功",
  "data": {
    "_id": "dish-001",
    "name": "宫保鸡丁",
    "description": "经典川菜，口感麻辣鲜香",
    "price": 28.00,
    "categoryId": "cat-001",
    "categoryName": "川菜",
    "image": "https://example.com/dish-image.jpg",
    "calories": 320,
    "protein": 25.5,
    "fat": 18.2,
    "carbohydrate": 12.8,
    "tags": ["麻辣", "经典", "川菜"],
    "isRecommended": true,
    "status": "active",
    "createBy": "admin-001",
    "createByName": "张管理员",
    "createTime": "2025-08-30T10:00:00.000Z"
  }
}
```

---

### 3. 创建菜品
```http
POST /api/admin/dishes
```

**请求体:**
```json
{
  "name": "宫保鸡丁",
  "description": "经典川菜，口感麻辣鲜香",
  "price": 28.00,
  "categoryId": "cat-001",
  "image": "https://example.com/dish-image.jpg",
  "calories": 320,
  "protein": 25.5,
  "fat": 18.2,
  "carbohydrate": 12.8,
  "tags": ["麻辣", "经典", "川菜"],
  "isRecommended": true
}
```

**字段说明:**
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `name` | string | 是 | 菜品名称，最大100字符 |
| `description` | string | 否 | 菜品描述 |
| `price` | number | 是 | 价格，保留2位小数 |
| `categoryId` | string | 是 | 分类ID |
| `image` | string | 否 | 图片URL |
| `calories` | number | 否 | 卡路里 |
| `protein` | number | 否 | 蛋白质含量 |
| `fat` | number | 否 | 脂肪含量 |
| `carbohydrate` | number | 否 | 碳水化合物含量 |
| `tags` | array | 否 | 标签数组 |
| `isRecommended` | boolean | 否 | 是否推荐，默认false |

**响应示例:**
```json
{
  "success": true,
  "message": "菜品创建成功",
  "data": {
    "_id": "dish-001",
    "name": "宫保鸡丁",
    "createTime": "2025-08-30T10:00:00.000Z"
  }
}
```

---

### 4. 更新菜品
```http
PUT /api/admin/dishes/:dishId
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `dishId` | string | 是 | 菜品ID |

**请求体:** 同创建菜品，所有字段都是可选的

**响应示例:**
```json
{
  "success": true,
  "message": "菜品更新成功",
  "data": {
    "_id": "dish-001",
    "updateTime": "2025-08-30T10:30:00.000Z"
  }
}
```

---

### 5. 删除菜品
```http
DELETE /api/admin/dishes/:dishId
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `dishId` | string | 是 | 菜品ID |

**响应示例:**
```json
{
  "success": true,
  "message": "菜品删除成功",
  "data": null
}
```

---

### 6. 批量更新菜品状态
```http
PUT /api/admin/dishes/batch/status
```

**请求体:**
```json
{
  "dishIds": ["dish-001", "dish-002"],
  "status": "inactive"
}
```

**字段说明:**
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `dishIds` | array | 是 | 菜品ID数组 |
| `status` | string | 是 | 目标状态：`active`、`inactive`、`deleted` |

**响应示例:**
```json
{
  "success": true,
  "message": "批量更新状态成功",
  "data": {
    "updatedCount": 2
  }
}
```

---

### 7. 上传菜品图片
```http
POST /api/admin/dishes/:dishId/image
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `dishId` | string | 是 | 菜品ID |

**请求体:** `multipart/form-data`
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `image` | file | 是 | 图片文件 |

**响应示例:**
```json
{
  "success": true,
  "message": "图片上传成功",
  "data": {
    "imageUrl": "https://example.com/dish-image.jpg",
    "fileId": "img-001"
  }
}
```

---

### 8. 获取菜品分类列表
```http
GET /api/admin/dishes/categories
```

**响应示例:**
```json
{
  "success": true,
  "message": "获取菜品分类成功",
  "data": [
    {
      "_id": "cat-001",
      "name": "川菜",
      "description": "四川特色菜系",
      "sort": 1,
      "status": "active",
      "createTime": "2025-08-30T10:00:00.000Z"
    }
  ]
}
```

---

### 9. 创建菜品分类
```http
POST /api/admin/dishes/categories
```

**请求体:**
```json
{
  "name": "粤菜",
  "description": "广东特色菜系",
  "sort": 2
}
```

**响应示例:**
```json
{
  "success": true,
  "message": "菜品分类创建成功",
  "data": {
    "_id": "cat-002",
    "name": "粤菜"
  }
}
```

---

### 10. 更新菜品分类
```http
PUT /api/admin/dishes/categories/:categoryId
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `categoryId` | string | 是 | 分类ID |

**请求体:** 同创建分类

**响应示例:**
```json
{
  "success": true,
  "message": "菜品分类更新成功",
  "data": {
    "_id": "cat-002"
  }
}
```

---

### 11. 获取可用菜品列表（用于菜单选择）
```http
GET /api/admin/dishes/available
```

**查询参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `pageSize` | number | 否 | 每页数量，默认100 |
| `categoryId` | string | 否 | 菜品分类ID |
| `keyword` | string | 否 | 搜索关键词 |
| `status` | string | 否 | 菜品状态，默认'active' |

**响应示例:**
```json
{
  "success": true,
  "message": "获取可用菜品成功",
  "data": [
    {
      "_id": "dish-001",
      "name": "宫保鸡丁",
      "description": "经典川菜，口感麻辣鲜香",
      "price": 28.00,
      "categoryId": "cat-001",
      "categoryName": "川菜",
      "image": "https://example.com/dish-image.jpg",
      "calories": 320,
      "protein": 25.5,
      "fat": 18.2,
      "carbohydrate": 12.8,
      "tags": ["麻辣", "经典", "川菜"],
      "isRecommended": true
    }
  ]
}
```

---

## �� 菜单管理模块 API 文档

### 基础信息
- **基础路径**: `/api/admin/menu`
- **认证方式**: JWT Token
- **权限要求**: 部门管理员及以上

---

### 1. 保存菜单草稿
```http
POST /api/admin/menu/draft
```

**请求体:**
```json
{
  "date": "2025-08-30",
  "mealType": "lunch",
  "description": "今日午餐菜单",
  "dishes": [
    {
      "dishId": "dish-001",
      "price": 28.00,
      "sort": 1
    },
    {
      "dishId": "dish-002",
      "price": 32.00,
      "sort": 2
    }
  ]
}
```

**字段说明:**
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `date` | string | 是 | 菜单日期，格式：YYYY-MM-DD |
| `mealType` | string | 是 | 餐次类型：`breakfast`、`lunch`、`dinner` |
| `description` | string | 否 | 菜单描述 |
| `dishes` | array | 否 | 菜品数组 |
| `dishes[].dishId` | string | 是 | 菜品ID |
| `dishes[].price` | number | 否 | 自定义价格，默认使用菜品原价 |
| `dishes[].sort` | number | 否 | 排序，默认按添加顺序 |

**响应示例:**
```json
{
  "success": true,
  "message": "菜单草稿保存成功",
  "data": {
    "id": "menu-001",
    "date": "2025-08-30",
    "mealType": "lunch",
    "description": "今日午餐菜单",
    "dishes": [...]
  }
}
```

---

### 2. 发布菜单
```http
POST /api/admin/menu/publish
```

**请求体:** 同保存草稿

**响应示例:**
```json
{
  "success": true,
  "message": "菜单发布成功",
  "data": {
    "id": "menu-001",
    "publishTime": "2025-08-30T10:00:00.000Z"
  }
}
```

---

### 3. 获取菜单历史
```http
GET /api/admin/menu/history
```

**查询参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `page` | number | 否 | 页码，默认1 |
| `pageSize` | number | 否 | 每页数量，默认20 |
| `startDate` | string | 否 | 开始日期，格式：YYYY-MM-DD |
| `endDate` | string | 否 | 结束日期，格式：YYYY-MM-DD |
| `mealType` | string | 否 | 餐次类型 |
| `status` | string | 否 | 菜单状态：`draft`、`published`、`revoked` |

**响应示例:**
```json
{
  "success": true,
  "message": "获取菜单历史成功",
  "data": {
    "list": [
      {
        "_id": "menu-001",
        "name": "2025-08-30 午餐菜单",
        "publishDate": "2025-08-30",
        "mealType": "lunch",
        "description": "今日午餐菜单",
        "publishStatus": "published",
        "publisherId": "admin-001",
        "publish_by_name": "张管理员",
        "createTime": "2025-08-30T10:00:00.000Z"
      }
    ],
    "total": 50,
    "page": 1,
    "pageSize": 20
  }
}
```

---

### 4. 获取菜单模板
```http
GET /api/admin/menu/templates
```

**响应示例:**
```json
{
  "success": true,
  "message": "获取菜单模板成功",
  "data": [
    {
      "_id": "template-001",
      "name": "标准午餐模板",
      "description": "包含主食、汤品、配菜的午餐模板",
      "dishes": [...],
      "status": "active",
      "createTime": "2025-08-30T10:00:00.000Z"
    }
  ]
}
```

---

### 5. 撤回菜单
```http
PUT /api/admin/menu/:menuId/revoke
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `menuId` | string | 是 | 菜单ID |

**响应示例:**
```json
{
  "success": true,
  "message": "菜单撤回成功",
  "data": null
}
```

---

### 6. 删除菜单模板
```http
DELETE /api/admin/menu/templates/:templateId
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `templateId` | string | 是 | 模板ID |

**响应示例:**
```json
{
  "success": true,
  "message": "删除菜单模板成功",
  "data": null
}
```

---

### 7. 获取菜单的菜品列表
```http
GET /api/admin/menu/:menuId/dishes
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `menuId` | string | 是 | 菜单ID |

**响应示例:**
```json
{
  "success": true,
  "message": "获取菜单菜品成功",
  "data": [
    {
      "_id": "md-001",
      "menuId": "menu-001",
      "dishId": "dish-001",
      "price": 28.00,
      "sort": 1,
      "dishName": "宫保鸡丁",
      "dishDescription": "经典川菜，口感麻辣鲜香",
      "dishImage": "https://example.com/dish-image.jpg",
      "categoryName": "川菜"
    }
  ]
}
```

---

### 8. 设置菜单菜品
```http
POST /api/admin/menu/:menuId/dishes
```

**路径参数:**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `menuId` | string | 是 | 菜单ID |

**请求体:**
```json
{
  "dishItems": [
    {
      "dishId": "dish-001",
      "price": 28.00,
      "sort": 1
    },
    {
      "dishId": "dish-002",
      "price": 32.00,
      "sort": 2
    }
  ]
}
```

**字段说明:**
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `dishItems` | array | 是 | 菜品项目数组 |
| `dishItems[].dishId` | string | 是 | 菜品ID |
| `dishItems[].price` | number | 否 | 自定义价格，默认0 |
| `dishItems[].sort` | number | 否 | 排序，默认0 |

**响应示例:**
```json
{
  "success": true,
  "message": "菜单菜品设置成功",
  "data": {
    "success": true,
    "message": "菜单菜品设置成功"
  }
}
```

---

## �� 权限说明

### 菜品管理权限
- **查看菜品列表**: 无需认证
- **查看菜品详情**: 无需认证
- **创建/编辑/删除菜品**: 需要部门管理员权限
- **上传图片**: 需要部门管理员权限

### 菜单管理权限
- **所有操作**: 需要部门管理员权限

## 📝 前端集成建议

### 1. 菜品管理页面
- 实现菜品列表展示（支持分页、搜索、筛选）
- 菜品创建/编辑表单
- 菜品状态管理（上架/下架/删除）
- 图片上传功能
- 分类管理

### 2. 菜单管理页面
- 菜单创建向导（选择日期、餐次、菜品）
- 菜品选择器（从可用菜品中选择）
- 菜单编辑（调整菜品、价格、排序）
- 菜单发布/撤回功能
- 菜单历史查看

### 3. 菜品选择器组件
- 搜索和筛选功能
- 菜品卡片展示
- 多选功能
- 价格和排序设置
- 已选菜品管理

### 4. 数据状态管理
- 菜品数据缓存
- 分类数据缓存
- 菜单草稿保存
- 实时数据同步

这个API文档为前端开发提供了完整的接口规范，支持菜品管理和菜单管理的所有核心功能！🎉