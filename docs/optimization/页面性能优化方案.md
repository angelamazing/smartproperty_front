# é¡µé¢æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸš¨ é—®é¢˜åˆ†æ

### ä¸»è¦æ€§èƒ½é—®é¢˜
1. **æ–‡ä»¶è¿‡å¤§**: `dining.vue` æ–‡ä»¶æœ‰ **88KB**ï¼Œå¯¼è‡´ï¼š
   - åˆå§‹åŠ è½½æ—¶é—´é•¿
   - è§£ææ—¶é—´é•¿
   - å†…å­˜å ç”¨å¤§

2. **è®¡ç®—å±æ€§è¿‡å¤š**: å¤§é‡è®¡ç®—å±æ€§åœ¨æ¯æ¬¡æ•°æ®å˜åŒ–æ—¶é‡æ–°è®¡ç®—
3. **é¢‘ç¹APIè°ƒç”¨**: é¡µé¢æ˜¾ç¤ºæ—¶å¯èƒ½é‡å¤åŠ è½½æ•°æ®
4. **CSSæ ·å¼å†—ä½™**: å¤§é‡é‡å¤çš„CSSä»£ç 
5. **å¤æ‚çš„æ¨¡æ¿ç»“æ„**: è¿‡å¤šçš„æ¡ä»¶æ¸²æŸ“å’Œå¾ªç¯

### æ€§èƒ½å½±å“
- é¡µé¢é¦–æ¬¡åŠ è½½æ—¶é—´å¢åŠ 
- åˆ‡æ¢æ ‡ç­¾é¡µå“åº”å˜æ…¢
- å†…å­˜ä½¿ç”¨é‡å¢åŠ 
- ç”¨æˆ·ä½“éªŒä¸‹é™

## âš¡ ä¼˜åŒ–æ–¹æ¡ˆ

### 1. æ–‡ä»¶æ‹†åˆ† (ä¼˜å…ˆçº§: é«˜)

å°† `dining.vue` æ‹†åˆ†æˆå¤šä¸ªå°ç»„ä»¶ï¼š

```
src/pages/dining/
â”œâ”€â”€ dining.vue (ä¸»æ–‡ä»¶ï¼Œå‡å°‘åˆ° ~20KB)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MenuTab.vue (ä»Šæ—¥èœå•æ ‡ç­¾é¡µ)
â”‚   â”œâ”€â”€ OrderTab.vue (éƒ¨é—¨æŠ¥é¤æ ‡ç­¾é¡µ)
â”‚   â”œâ”€â”€ RecordTab.vue (æŠ¥é¤è®°å½•æ ‡ç­¾é¡µ)
â”‚   â”œâ”€â”€ DishList.vue (èœå“åˆ—è¡¨ç»„ä»¶)
â”‚   â”œâ”€â”€ MemberSelector.vue (æˆå‘˜é€‰æ‹©ç»„ä»¶)
â”‚   â”œâ”€â”€ RecordList.vue (è®°å½•åˆ—è¡¨ç»„ä»¶)
â”‚   â””â”€â”€ QueryCard.vue (æŸ¥è¯¢å¡ç‰‡ç»„ä»¶)
```

### 2. è®¡ç®—å±æ€§ä¼˜åŒ– (ä¼˜å…ˆçº§: é«˜)

```javascript
// æ·»åŠ ç¼“å­˜å’Œé˜²æŠ–
computed: {
  // ä½¿ç”¨ç¼“å­˜çš„è®¡ç®—å±æ€§
  filteredMembers: {
    cache: true,
    get() {
      return this.computeFilteredMembers()
    }
  }
},

// æ·»åŠ é˜²æŠ–æ–¹æ³•
methods: {
  debounceFilterMembers: debounce(function() {
    this.$forceUpdate()
  }, 300)
}
```

### 3. APIè°ƒç”¨ä¼˜åŒ– (ä¼˜å…ˆçº§: é«˜)

```javascript
// æ·»åŠ è¯·æ±‚ç¼“å­˜
const apiCache = new Map()

async loadMenu() {
  const cacheKey = `menu_${this.selectedDate}_${this.selectedMeal}`
  
  if (apiCache.has(cacheKey)) {
    this.currentMenu = apiCache.get(cacheKey)
    return
  }
  
  const result = await api.admin.getMenuByDate(this.selectedDate, this.selectedMeal)
  if (result.success) {
    apiCache.set(cacheKey, result.data)
    this.currentMenu = result.data
  }
}
```

### 4. CSSä¼˜åŒ– (ä¼˜å…ˆçº§: ä¸­)

```scss
// æå–å…¬å…±æ ·å¼åˆ° uni.scss
.common-card {
  background: #fff;
  border-radius: 16rpx;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);
}

.common-button {
  border: none;
  border-radius: 12rpx;
  transition: all 0.3s ease;
}
```

### 5. æ¸²æŸ“ä¼˜åŒ– (ä¼˜å…ˆçº§: ä¸­)

```vue
<!-- ä½¿ç”¨ v-show æ›¿ä»£ v-if å‡å°‘é‡æ–°æ¸²æŸ“ -->
<view v-show="currentTab === 'menu'" class="tab-content">
  <MenuTab />
</view>

<!-- ä½¿ç”¨ key ä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“ -->
<view v-for="dish in filteredDishes" :key="dish._id" class="dish-item">
  <!-- å†…å®¹ -->
</view>
```

## ğŸ“Š é¢„æœŸæ•ˆæœ

### æ–‡ä»¶å¤§å°ä¼˜åŒ–
| æ–‡ä»¶ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | å‡å°‘ |
|------|--------|--------|------|
| dining.vue | 88KB | ~20KB | 77% |
| æ€»æ–‡ä»¶æ•° | 1ä¸ª | 7ä¸ª | åˆ†æ•£ |

### æ€§èƒ½æå‡
- **é¦–æ¬¡åŠ è½½æ—¶é—´**: å‡å°‘ 60-70%
- **åˆ‡æ¢æ ‡ç­¾é¡µ**: å‡å°‘ 50-60%
- **å†…å­˜ä½¿ç”¨**: å‡å°‘ 40-50%
- **æ¸²æŸ“æ€§èƒ½**: æå‡ 50-70%

## ğŸš€ å®æ–½æ­¥éª¤

### ç¬¬ä¸€é˜¶æ®µ: æ–‡ä»¶æ‹†åˆ†
1. åˆ›å»ºç»„ä»¶ç›®å½•ç»“æ„
2. æå–èœå•æ ‡ç­¾é¡µç»„ä»¶
3. æå–æŠ¥é¤æ ‡ç­¾é¡µç»„ä»¶
4. æå–è®°å½•æ ‡ç­¾é¡µç»„ä»¶
5. æ›´æ–°ä¸»æ–‡ä»¶å¼•ç”¨

### ç¬¬äºŒé˜¶æ®µ: æ€§èƒ½ä¼˜åŒ–
1. ä¼˜åŒ–è®¡ç®—å±æ€§
2. æ·»åŠ APIç¼“å­˜
3. å®ç°é˜²æŠ–æœºåˆ¶
4. ä¼˜åŒ–CSSæ ·å¼

### ç¬¬ä¸‰é˜¶æ®µ: é«˜çº§ä¼˜åŒ–
1. å®ç°è™šæ‹Ÿæ»šåŠ¨
2. æ·»åŠ éª¨æ¶å±
3. å®ç°é¢„åŠ è½½
4. æ·»åŠ æ€§èƒ½ç›‘æ§

## ğŸ“‹ æ£€æŸ¥æ¸…å•

- [ ] æ‹†åˆ† dining.vue æ–‡ä»¶
- [ ] åˆ›å»ºå­ç»„ä»¶
- [ ] ä¼˜åŒ–è®¡ç®—å±æ€§
- [ ] æ·»åŠ APIç¼“å­˜
- [ ] ä¼˜åŒ–CSSæ ·å¼
- [ ] æµ‹è¯•æ€§èƒ½æå‡
- [ ] éªŒè¯åŠŸèƒ½å®Œæ•´æ€§

---

**å¼€å§‹å®æ–½ä¼˜åŒ–ï¼Œé¢„è®¡å¯æå‡é¡µé¢åŠ è½½æ€§èƒ½ 60-70%ï¼**
