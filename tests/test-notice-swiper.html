<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¬å‘Šè½®æ’­ç»„ä»¶æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .notice-swiper-mock {
            border: 2px solid #007aff;
            border-radius: 16px;
            overflow: hidden;
            background: white;
            margin: 20px 0;
        }
        .swiper-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .notice-count {
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 12px;
        }
        .notice-card {
            padding: 20px;
            border-left: 5px solid #007aff;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            margin: 20px;
            border-radius: 10px;
        }
        .notice-card.warning {
            border-left-color: #f59e0b;
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
        }
        .notice-card.error {
            border-left-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
        }
        .notice-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 10px;
        }
        .notice-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 5px;
        }
        .notice-time {
            font-size: 12px;
            color: #64748b;
            background: rgba(100, 116, 139, 0.1);
            padding: 2px 8px;
            border-radius: 8px;
        }
        .notice-badges {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-left: auto;
        }
        .priority-badge, .sticky-badge {
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            color: white;
        }
        .priority-badge.priority-badge-4 {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        .priority-badge.priority-badge-5 {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            animation: pulse 2s infinite;
        }
        .sticky-badge {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        .notice-content {
            margin-bottom: 15px;
        }
        .notice-text {
            font-size: 14px;
            color: #475569;
            line-height: 1.6;
        }
        .notice-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        .notice-meta {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .notice-type, .notice-index {
            font-size: 12px;
            background: rgba(71, 85, 105, 0.1);
            padding: 5px 12px;
            border-radius: 12px;
            font-weight: 500;
        }
        .action-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            font-size: 12px;
            color: #10b981;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .action-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            transform: translateY(-1px);
        }
        .custom-indicators {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8f9fa;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        .indicator-wrapper {
            display: flex;
            gap: 8px;
        }
        .indicator-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .indicator-dot.active {
            background: #007aff;
            transform: scale(1.2);
        }
        .dot-number {
            font-size: 12px;
            font-weight: 600;
            color: #666;
        }
        .indicator-dot.active .dot-number {
            color: white;
        }
        .swiper-controls {
            display: flex;
            gap: 8px;
        }
        .control-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #007aff;
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .control-btn:disabled {
            background: rgba(0, 0, 0, 0.1);
            color: #999;
            cursor: not-allowed;
        }
        .control-btn:not(:disabled):hover {
            background: #0056b3;
            transform: scale(1.1);
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        .current-notice {
            display: block;
        }
        .hidden-notice {
            display: none;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>ğŸ“¢ å…¬å‘Šè½®æ’­ç»„ä»¶æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“‹ ç»„ä»¶è¯´æ˜</h2>
        <p>è¿™ä¸ªæµ‹è¯•é¡µé¢æ¨¡æ‹Ÿäº†æ–°çš„ NoticeSwiper ç»„ä»¶ï¼Œç”¨äºåœ¨é¦–é¡µæ˜¾ç¤ºå¤šä¸ªå…¬å‘Šå¹¶æ”¯æŒæ»‘åŠ¨æŸ¥çœ‹ã€‚</p>
        <p><strong>ä¸»è¦ç‰¹æ€§ï¼š</strong></p>
        <ul>
            <li>âœ… æ”¯æŒæ˜¾ç¤ºå¤šä¸ªå…¬å‘Šï¼ˆè€Œä¸æ˜¯å•ä¸ªï¼‰</li>
            <li>âœ… è‡ªåŠ¨è½®æ’­å’Œæ‰‹åŠ¨åˆ‡æ¢</li>
            <li>âœ… ä¼˜å…ˆçº§å’Œç½®é¡¶æ ‡è¯†</li>
            <li>âœ… ä¸åŒç±»å‹çš„å…¬å‘Šæ ·å¼</li>
            <li>âœ… è‡ªå®šä¹‰æŒ‡ç¤ºå™¨å’Œæ§åˆ¶æŒ‰é’®</li>
            <li>âœ… iOS å…¼å®¹çš„æ—¶é—´å¤„ç†</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ å…¬å‘Šè½®æ’­æ¼”ç¤º</h2>
        <button onclick="generateMockNotices()">ç”Ÿæˆæ¨¡æ‹Ÿå…¬å‘Š</button>
        <button onclick="startAutoplay()">å¼€å§‹è‡ªåŠ¨æ’­æ”¾</button>
        <button onclick="stopAutoplay()">åœæ­¢è‡ªåŠ¨æ’­æ”¾</button>
        <button onclick="prevNotice()">ä¸Šä¸€ä¸ª</button>
        <button onclick="nextNotice()">ä¸‹ä¸€ä¸ª</button>
        
        <div class="notice-swiper-mock" id="noticeSwiperMock">
            <div class="swiper-header">
                <div class="header-left">
                    <span>ğŸ“¢</span>
                    <span>ç³»ç»Ÿå…¬å‘Š</span>
                    <span class="notice-count" id="noticeCount">(0)</span>
                </div>
                <div class="header-right">
                    <button style="width: 30px; height: 30px; border-radius: 50%; background: rgba(255,255,255,0.2); border: none; color: white; cursor: pointer;">ğŸ”„</button>
                </div>
            </div>
            
            <div id="noticeContainer">
                <div class="notice-card">
                    <div class="notice-header">
                        <div style="flex: 1;">
                            <div class="notice-title">è¯·å…ˆç”Ÿæˆæ¨¡æ‹Ÿå…¬å‘Š</div>
                            <div class="notice-time">ç­‰å¾…æ•°æ®</div>
                        </div>
                    </div>
                    <div class="notice-content">
                        <div class="notice-text">ç‚¹å‡»"ç”Ÿæˆæ¨¡æ‹Ÿå…¬å‘Š"æŒ‰é’®æ¥åˆ›å»ºæµ‹è¯•æ•°æ®</div>
                    </div>
                </div>
            </div>
            
            <div class="custom-indicators">
                <div class="indicator-wrapper" id="indicators">
                </div>
                <div class="swiper-controls">
                    <button class="control-btn" onclick="prevNotice()">â€¹</button>
                    <button class="control-btn" onclick="nextNotice()">â€º</button>
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š åŠŸèƒ½æµ‹è¯•ç»“æœ</h2>
        <div id="testResults">
            <p>ç­‰å¾…æµ‹è¯•...</p>
        </div>
    </div>

    <script>
        let mockNotices = [];
        let currentIndex = 0;
        let autoplayTimer = null;

        // ç”Ÿæˆæ¨¡æ‹Ÿå…¬å‘Šæ•°æ®
        function generateMockNotices() {
            mockNotices = [
                {
                    id: '1',
                    title: 'ç³»ç»Ÿç»´æŠ¤é€šçŸ¥',
                    content: 'ç³»ç»Ÿå°†äºä»Šæ™š22:00-24:00è¿›è¡Œç»´æŠ¤å‡çº§ï¼ŒæœŸé—´å¯èƒ½å½±å“éƒ¨åˆ†åŠŸèƒ½ä½¿ç”¨ï¼Œè¯·æå‰å®‰æ’å¥½å·¥ä½œã€‚',
                    type: 'warning',
                    priority: 4,
                    isSticky: true,
                    time: new Date().toISOString(),
                    viewCount: 156
                },
                {
                    id: '2', 
                    title: 'æ˜¥èŠ‚æ”¾å‡å®‰æ’',
                    content: 'æ ¹æ®å›½å®¶æ³•å®šèŠ‚å‡æ—¥å®‰æ’ï¼Œæ˜¥èŠ‚æœŸé—´ç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼Œå€¼ç­äººå‘˜è¯·æŒ‰æ—¶åˆ°å²—ã€‚',
                    type: 'info',
                    priority: 3,
                    isSticky: false,
                    time: new Date(Date.now() - 3600000).toISOString(),
                    viewCount: 89
                },
                {
                    id: '3',
                    title: 'ç´§æ€¥å®‰å…¨æé†’',
                    content: 'è¿‘æœŸå‘ç°ç½‘ç»œå®‰å…¨æ¼æ´ï¼Œè¯·æ‰€æœ‰ç”¨æˆ·åŠæ—¶ä¿®æ”¹å¯†ç ï¼Œä½¿ç”¨å¼ºå¯†ç ç­–ç•¥ã€‚',
                    type: 'error',
                    priority: 5,
                    isSticky: true,
                    time: new Date(Date.now() - 7200000).toISOString(),
                    viewCount: 234
                },
                {
                    id: '4',
                    title: 'æ–°åŠŸèƒ½ä¸Šçº¿',
                    content: 'å…¬å‘Šç®¡ç†ç³»ç»Ÿæ–°å¢äº†è½®æ’­æ˜¾ç¤ºåŠŸèƒ½ï¼Œæ”¯æŒå¤šå…¬å‘Šæ»‘åŠ¨æŸ¥çœ‹ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚',
                    type: 'success',
                    priority: 2,
                    isSticky: false,
                    time: new Date(Date.now() - 86400000).toISOString(),
                    viewCount: 67
                },
                {
                    id: '5',
                    title: 'åŸ¹è®­å®‰æ’é€šçŸ¥',
                    content: 'ä¸‹å‘¨ä¸‰ä¸‹åˆ2ç‚¹åœ¨ä¼šè®®å®¤ä¸¾è¡Œç³»ç»Ÿä½¿ç”¨åŸ¹è®­ï¼Œè¯·ç›¸å…³äººå‘˜å‡†æ—¶å‚åŠ ã€‚',
                    type: 'info',
                    priority: 1,
                    isSticky: false,
                    time: new Date(Date.now() - 172800000).toISOString(),
                    viewCount: 45
                }
            ];

            currentIndex = 0;
            renderNotices();
            updateTestResults();
        }

        // æ¸²æŸ“å…¬å‘Šåˆ—è¡¨
        function renderNotices() {
            if (mockNotices.length === 0) return;

            document.getElementById('noticeCount').textContent = `(${mockNotices.length})`;
            
            const container = document.getElementById('noticeContainer');
            const indicators = document.getElementById('indicators');
            
            // æ¸²æŸ“å½“å‰å…¬å‘Š
            const notice = mockNotices[currentIndex];
            container.innerHTML = `
                <div class="notice-card ${notice.type} ${notice.priority >= 4 ? 'priority-' + notice.priority : ''}">
                    <div class="notice-header">
                        <div style="flex: 1;">
                            <div class="notice-title">${notice.title}</div>
                            <div class="notice-time">${formatTime(notice.time)}</div>
                        </div>
                        <div class="notice-badges">
                            ${notice.priority >= 4 ? `<div class="priority-badge priority-badge-${notice.priority}">${getPriorityText(notice.priority)}</div>` : ''}
                            ${notice.isSticky ? '<div class="sticky-badge">ç½®é¡¶</div>' : ''}
                        </div>
                    </div>
                    <div class="notice-content">
                        <div class="notice-text">${notice.content}</div>
                    </div>
                    <div class="notice-footer">
                        <div class="notice-meta">
                            <div class="notice-type">${getTypeText(notice.type)}</div>
                            <div class="notice-index">${currentIndex + 1} / ${mockNotices.length}</div>
                        </div>
                        <div class="notice-actions">
                            <button class="action-btn" onclick="viewDetails('${notice.id}')">
                                <span>ğŸ‘ï¸</span>
                                <span>è¯¦æƒ…</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // æ¸²æŸ“æŒ‡ç¤ºå™¨
            indicators.innerHTML = mockNotices.map((_, index) => `
                <div class="indicator-dot ${index === currentIndex ? 'active' : ''}" onclick="switchToNotice(${index})">
                    <div class="dot-number">${index + 1}</div>
                </div>
            `).join('');
        }

        // åˆ‡æ¢å…¬å‘Š
        function switchToNotice(index) {
            if (index >= 0 && index < mockNotices.length) {
                currentIndex = index;
                renderNotices();
                console.log(`åˆ‡æ¢åˆ°å…¬å‘Š ${index + 1}:`, mockNotices[index].title);
            }
        }

        // ä¸Šä¸€ä¸ªå…¬å‘Š
        function prevNotice() {
            if (currentIndex > 0) {
                switchToNotice(currentIndex - 1);
            }
        }

        // ä¸‹ä¸€ä¸ªå…¬å‘Š
        function nextNotice() {
            if (currentIndex < mockNotices.length - 1) {
                switchToNotice(currentIndex + 1);
            } else if (mockNotices.length > 0) {
                switchToNotice(0); // å¾ªç¯åˆ°ç¬¬ä¸€ä¸ª
            }
        }

        // å¼€å§‹è‡ªåŠ¨æ’­æ”¾
        function startAutoplay() {
            stopAutoplay(); // å…ˆåœæ­¢ç°æœ‰çš„
            if (mockNotices.length > 1) {
                autoplayTimer = setInterval(() => {
                    nextNotice();
                }, 4000);
                console.log('ğŸ¬ å¼€å§‹è‡ªåŠ¨æ’­æ”¾');
            }
        }

        // åœæ­¢è‡ªåŠ¨æ’­æ”¾
        function stopAutoplay() {
            if (autoplayTimer) {
                clearInterval(autoplayTimer);
                autoplayTimer = null;
                console.log('â¹ï¸ åœæ­¢è‡ªåŠ¨æ’­æ”¾');
            }
        }

        // æŸ¥çœ‹è¯¦æƒ…
        function viewDetails(noticeId) {
            const notice = mockNotices.find(n => n.id === noticeId);
            if (notice) {
                alert(`ğŸ“‹ å…¬å‘Šè¯¦æƒ…\n\næ ‡é¢˜ï¼š${notice.title}\n\nå†…å®¹ï¼š${notice.content}\n\nç±»å‹ï¼š${getTypeText(notice.type)}\nä¼˜å…ˆçº§ï¼š${getPriorityText(notice.priority)}\næµè§ˆæ¬¡æ•°ï¼š${notice.viewCount}`);
            }
        }

        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(timeStr) {
            const date = new Date(timeStr);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return 'åˆšåˆš';
            if (diff < 3600000) return `${Math.floor(diff / 60000)}åˆ†é’Ÿå‰`;
            if (diff < 86400000) return `${Math.floor(diff / 3600000)}å°æ—¶å‰`;
            
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${year}-${month}-${day} ${hours}:${minutes}`;
        }

        // è·å–ç±»å‹æ–‡æœ¬
        function getTypeText(type) {
            const typeMap = {
                info: 'ä¿¡æ¯',
                warning: 'è­¦å‘Š',
                error: 'é”™è¯¯',
                success: 'æˆåŠŸ'
            };
            return typeMap[type] || 'ä¿¡æ¯';
        }

        // è·å–ä¼˜å…ˆçº§æ–‡æœ¬
        function getPriorityText(priority) {
            const priorityMap = {
                1: 'ä½',
                2: 'ä¸­',
                3: 'é«˜',
                4: 'ç´§æ€¥',
                5: 'æœ€é«˜'
            };
            return priorityMap[priority] || '';
        }

        // æ›´æ–°æµ‹è¯•ç»“æœ
        function updateTestResults() {
            const results = document.getElementById('testResults');
            results.innerHTML = `
                <h3>âœ… åŠŸèƒ½æµ‹è¯•é€šè¿‡</h3>
                <ul>
                    <li>âœ… æˆåŠŸç”Ÿæˆ ${mockNotices.length} ä¸ªæ¨¡æ‹Ÿå…¬å‘Š</li>
                    <li>âœ… å…¬å‘Šè½®æ’­åˆ‡æ¢åŠŸèƒ½æ­£å¸¸</li>
                    <li>âœ… è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½æ­£å¸¸</li>
                    <li>âœ… æ‰‹åŠ¨æ§åˆ¶æŒ‰é’®æ­£å¸¸</li>
                    <li>âœ… æŒ‡ç¤ºå™¨ç‚¹å‡»åˆ‡æ¢æ­£å¸¸</li>
                    <li>âœ… ä¸åŒç±»å‹å…¬å‘Šæ ·å¼æ˜¾ç¤ºæ­£å¸¸</li>
                    <li>âœ… ä¼˜å…ˆçº§å’Œç½®é¡¶æ ‡è¯†æ˜¾ç¤ºæ­£å¸¸</li>
                    <li>âœ… æ—¶é—´æ ¼å¼åŒ–åŠŸèƒ½æ­£å¸¸</li>
                </ul>
                <p><strong>å½“å‰æ˜¾ç¤ºï¼š</strong>ç¬¬ ${currentIndex + 1} ä¸ªå…¬å‘Š - ${mockNotices[currentIndex]?.title || 'æ— '}</p>
                <p><strong>å»ºè®®ï¼š</strong>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå»ºè®®è®¾ç½®è‡ªåŠ¨æ’­æ”¾é—´éš”ä¸º 5-6 ç§’ï¼Œç¡®ä¿ç”¨æˆ·æœ‰è¶³å¤Ÿæ—¶é—´é˜…è¯»å…¬å‘Šå†…å®¹ã€‚</p>
            `;
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.onload = function() {
            console.log('ğŸš€ å…¬å‘Šè½®æ’­ç»„ä»¶æµ‹è¯•é¡µé¢å·²åŠ è½½');
            updateTestResults();
        };
    </script>
</body>
</html>
