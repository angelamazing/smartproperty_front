# 前端对接文档索引

## 📚 文档概览

本文档索引为前端开发人员提供完整的时间处理对接指南，包含所有必要的文档和资源。

## 🎯 核心文档

### 1. 快速开始
- **[前端对接快速指南](./前端对接快速指南.md)** - 5分钟快速上手
- **[前端时间处理工具类](./frontend-time-utils.js)** - 可直接使用的工具类文件

### 2. 详细文档
- **[前端时间处理对接完整文档](./前端时间处理对接完整文档.md)** - 完整的使用指南和示例
- **[前端API接口时间处理文档](./前端API接口时间处理文档.md)** - API接口对接规范

### 3. 技术规范
- **[统一时间处理方案及前端对接文档](./统一时间处理方案及前端对接文档.md)** - 整体技术方案
- **[后端时间处理工具类](../utils/timeUtils.js)** - 后端工具类参考

## 🛠️ 实用资源

### 1. 代码示例
- **[后端时间处理示例](../examples/time-handling-examples.js)** - 后端时间处理示例
- **[前端时间处理示例](../examples/frontend-time-examples.js)** - 前端时间处理示例
- **[前端时间处理测试页面](../examples/frontend-time-test.html)** - 在线测试页面

### 2. 工具类文件
- **[前端时间处理工具类](./frontend-time-utils.js)** - 完整的前端工具类
- **[后端时间处理工具类](../utils/timeUtils.js)** - 后端工具类

## 🚀 快速开始流程

### 步骤1：安装依赖
```bash
npm install dayjs
```

### 步骤2：复制工具类
将 `frontend-time-utils.js` 复制到你的项目中

### 步骤3：基本使用
```javascript
import { TimeUtils } from '@/utils/frontend-time-utils';

// 格式化显示时间
const displayTime = TimeUtils.formatTime('2024-01-15T10:30:00.000Z', 'YYYY-MM-DD HH:mm');
// 结果: 2024-01-15 18:30

// 获取相对时间
const relativeTime = TimeUtils.getRelativeTime('2024-01-15T10:30:00.000Z');
// 结果: 3小时前

// 提交时间给后端
const utcTime = TimeUtils.toUTCForSubmit('2024-01-15 18:30:00');
// 结果: 2024-01-15T10:30:00.000Z
```

## 📋 常用场景

### 1. Vue组件使用
```vue
<template>
  <div>
    <p>创建时间: {{ formatTime(item.createTime, 'YYYY-MM-DD HH:mm') }}</p>
    <p>更新时间: {{ getRelativeTime(item.updateTime) }}</p>
  </div>
</template>

<script setup>
import { TimeUtils } from '@/utils/frontend-time-utils';

const formatTime = (time, format) => TimeUtils.formatTime(time, format);
const getRelativeTime = (time) => TimeUtils.getRelativeTime(time);
</script>
```

### 2. React组件使用
```jsx
import React from 'react';
import { useTime } from '@/hooks/useTime';

const TimeDisplay = ({ item }) => {
  const { formatTime, getRelativeTime } = useTime();

  return (
    <div>
      <p>创建时间: {formatTime(item.createTime, 'YYYY-MM-DD HH:mm')}</p>
      <p>更新时间: {getRelativeTime(item.updateTime)}</p>
    </div>
  );
};
```

### 3. API接口对接
```javascript
// 获取数据
const fetchOrders = async () => {
  const response = await fetch('/api/orders');
  const data = await response.json();
  
  return data.map(order => ({
    ...order,
    createTimeDisplay: TimeUtils.formatTime(order.createTime, 'YYYY-MM-DD HH:mm'),
    updateTimeDisplay: TimeUtils.getRelativeTime(order.updateTime)
  }));
};

// 提交数据
const submitOrder = async (formData) => {
  const submitData = {
    ...formData,
    eventTime: TimeUtils.toUTCForSubmit(formData.eventTime),
    deadline: TimeUtils.toUTCForSubmit(formData.deadline)
  };
  
  const response = await fetch('/api/orders', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(submitData)
  });
  
  return await response.json();
};
```

## 🔧 核心方法速查

| 方法 | 说明 | 示例 |
|------|------|------|
| `formatTime(time, format)` | 格式化UTC时间为北京时间 | `formatTime('2024-01-15T10:30:00.000Z', 'YYYY-MM-DD HH:mm')` |
| `getRelativeTime(time)` | 获取相对时间 | `getRelativeTime('2024-01-15T10:30:00.000Z')` |
| `toUTCForSubmit(time)` | 将北京时间转换为UTC时间 | `toUTCForSubmit('2024-01-15 18:30:00')` |
| `getCurrentDate()` | 获取当前日期 | `getCurrentDate()` |
| `getCurrentTime()` | 获取当前时间 | `getCurrentTime()` |
| `isValidTime(time)` | 验证时间格式 | `isValidTime('2024-01-15T10:30:00.000Z')` |
| `safeFormatTime(time, format)` | 安全格式化 | `safeFormatTime(time, 'YYYY-MM-DD HH:mm')` |

## ⚠️ 重要注意事项

### 1. 时间处理原则
- **后端返回**：所有时间字段都是UTC时间（ISO 8601格式）
- **前端显示**：统一转换为北京时间显示
- **前端提交**：将北京时间转换为UTC时间提交给后端
- **工具类**：使用统一的时间处理工具类，禁止直接使用原生Date对象

### 2. 时间格式约定
- **API返回格式**：`2024-01-15T10:30:00.000Z`（UTC时间）
- **前端显示格式**：`2024-01-15 18:30:00`（北京时间）
- **前端提交格式**：`2024-01-15T10:30:00.000Z`（UTC时间）

### 3. 性能优化
- 大量数据渲染时使用 `TimeCache` 缓存
- 避免重复的时间格式化计算
- 使用延迟格式化优化渲染性能

## 🧪 测试和验证

### 1. 在线测试
打开 `examples/frontend-time-test.html` 在浏览器中测试各种时间处理功能

### 2. 单元测试
```javascript
// 测试时间格式化
const testFormatTime = () => {
  const result = TimeUtils.formatTime('2024-01-15T10:30:00.000Z', 'YYYY-MM-DD HH:mm');
  console.assert(result === '2024-01-15 18:30', '时间格式化测试失败');
};

// 测试时间提交
const testToUTCForSubmit = () => {
  const result = TimeUtils.toUTCForSubmit('2024-01-15 18:30:00');
  console.assert(result === '2024-01-15T10:30:00.000Z', '时间提交测试失败');
};
```

## 📞 技术支持

### 1. 常见问题
- **时间显示错误**：检查是否正确使用了TimeUtils工具类
- **时区问题**：确保所有时间操作都通过工具类处理
- **性能问题**：使用TimeCache缓存优化大量数据渲染

### 2. 获取帮助
- 查看 [前端时间处理对接完整文档](./前端时间处理对接完整文档.md)
- 参考 [前端API接口时间处理文档](./前端API接口时间处理文档.md)
- 运行 [前端时间处理测试页面](../examples/frontend-time-test.html)

### 3. 联系方式
如有问题，请参考相关文档或联系技术支持团队。

---

**最后更新**：2024年1月15日  
**版本**：v1.0.0  
**维护者**：前端开发团队