# 前端对接快速指南

## 🚀 快速开始

### 1. 安装依赖
```bash
npm install dayjs
```

### 2. 复制时间处理工具类
将 `frontend-time-utils.js` 复制到你的项目中

### 3. 基本使用

```javascript
import { TimeUtils } from '@/utils/frontend-time-utils';

// 格式化显示时间
const displayTime = TimeUtils.formatTime('2024-01-15T10:30:00.000Z', 'YYYY-MM-DD HH:mm');
// 结果: 2024-01-15 18:30

// 获取相对时间
const relativeTime = TimeUtils.getRelativeTime('2024-01-15T10:30:00.000Z');
// 结果: 3小时前

// 提交时间给后端
const utcTime = TimeUtils.toUTCForSubmit('2024-01-15 18:30:00');
// 结果: 2024-01-15T10:30:00.000Z
```

## 🎨 Vue组件使用

### 全局过滤器（Vue 2）
```javascript
// main.js
import { TimeUtils } from '@/utils/frontend-time-utils';

Vue.filter('formatTime', (time, format) => TimeUtils.formatTime(time, format));
Vue.filter('relativeTime', (time) => TimeUtils.getRelativeTime(time));
```

### 模板中使用
```vue
<template>
  <div>
    <p>创建时间: {{ item.createTime | formatTime('YYYY-MM-DD HH:mm') }}</p>
    <p>更新时间: {{ item.updateTime | relativeTime }}</p>
  </div>
</template>
```

### Composition API（Vue 3）
```vue
<template>
  <div>
    <p>创建时间: {{ formatTime(item.createTime, 'YYYY-MM-DD HH:mm') }}</p>
    <p>更新时间: {{ getRelativeTime(item.updateTime) }}</p>
  </div>
</template>

<script setup>
import { TimeUtils } from '@/utils/frontend-time-utils';

const formatTime = (time, format) => TimeUtils.formatTime(time, format);
const getRelativeTime = (time) => TimeUtils.getRelativeTime(time);
</script>
```

## ⚛️ React组件使用

### 自定义Hook
```javascript
// hooks/useTime.js
import { useMemo } from 'react';
import { TimeUtils } from '@/utils/frontend-time-utils';

export const useTime = () => {
  const formatTime = useMemo(() => {
    return (time, format) => TimeUtils.formatTime(time, format);
  }, []);

  const getRelativeTime = useMemo(() => {
    return (time) => TimeUtils.getRelativeTime(time);
  }, []);

  return { formatTime, getRelativeTime };
};
```

### 组件中使用
```jsx
import React from 'react';
import { useTime } from '@/hooks/useTime';

const TimeDisplay = ({ item }) => {
  const { formatTime, getRelativeTime } = useTime();

  return (
    <div>
      <p>创建时间: {formatTime(item.createTime, 'YYYY-MM-DD HH:mm')}</p>
      <p>更新时间: {getRelativeTime(item.updateTime)}</p>
    </div>
  );
};
```

## 📋 常用场景

### 1. 表格显示
```vue
<el-table-column prop="createTime" label="创建时间">
  <template #default="{ row }">
    {{ formatTime(row.createTime, 'YYYY-MM-DD HH:mm') }}
  </template>
</el-table-column>
```

### 2. 表单提交
```javascript
const handleSubmit = () => {
  const submitData = {
    eventTime: TimeUtils.toUTCForSubmit(form.eventTime),
    deadline: TimeUtils.toUTCForSubmit(form.deadline)
  };
  
  // 提交给后端
  api.submitData(submitData);
};
```

### 3. 时间验证
```javascript
const validateTime = (timeString) => {
  return TimeUtils.isValidTime(timeString);
};
```

## ⚠️ 注意事项

1. **后端返回的是UTC时间**，前端需要转换为北京时间显示
2. **前端提交给后端的时间**，需要转换为UTC时间
3. **统一使用TimeUtils工具类**，不要直接使用原生Date对象
4. **时间格式**：API使用ISO 8601格式，显示使用北京时间格式

## 🔧 核心方法

| 方法 | 说明 | 示例 |
|------|------|------|
| `formatTime(time, format)` | 格式化UTC时间为北京时间 | `formatTime('2024-01-15T10:30:00.000Z', 'YYYY-MM-DD HH:mm')` |
| `getRelativeTime(time)` | 获取相对时间 | `getRelativeTime('2024-01-15T10:30:00.000Z')` |
| `toUTCForSubmit(time)` | 将北京时间转换为UTC时间 | `toUTCForSubmit('2024-01-15 18:30:00')` |
| `getCurrentDate()` | 获取当前日期 | `getCurrentDate()` |
| `getCurrentTime()` | 获取当前时间 | `getCurrentTime()` |
| `isValidTime(time)` | 验证时间格式 | `isValidTime('2024-01-15T10:30:00.000Z')` |

## 📞 需要帮助？

查看完整文档：[前端时间处理对接完整文档](./前端时间处理对接完整文档.md)