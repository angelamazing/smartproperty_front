æˆ‘æ¥ä¸ºæ‚¨æä¾›æ‰«ç å°±é¤ç™»è®°åŠŸèƒ½çš„å®Œæ•´æ¥å£æ–‡æ¡£ã€‚


[1 tool called]

# ğŸ“± æ‰«ç å°±é¤ç™»è®°åŠŸèƒ½å®Œæ•´æ¥å£æ–‡æ¡£

## ğŸ“– åŠŸèƒ½æ¦‚è¿°

æ‰«ç å°±é¤ç™»è®°åŠŸèƒ½ä¸ºç”¨æˆ·æä¾›æç®€çš„å°±é¤ç™»è®°ä½“éªŒã€‚ç”¨æˆ·é€šè¿‡æ‰«æé¤å…å¼ è´´çš„äºŒç»´ç ï¼Œç³»ç»Ÿæ ¹æ®æ‰«ç æ—¶é—´è‡ªåŠ¨åˆ¤æ–­é¤æ¬¡ï¼ˆæ—©é¤ã€åˆé¤ã€æ™šé¤ï¼‰ï¼Œå¹¶å®Œæˆå°±é¤ç™»è®°ã€‚æ”¯æŒå¾®ä¿¡æ‰«ç å’Œå†…éƒ¨æ‰«ç ä¸¤ç§æ–¹å¼ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- âœ… **è‡ªåŠ¨é¤æ¬¡åˆ¤æ–­**: æ ¹æ®æ‰«ç æ—¶é—´è‡ªåŠ¨è¯†åˆ«æ—©é¤(6:00-10:00)ã€åˆé¤(11:00-14:00)ã€æ™šé¤(17:00-20:00)
- âœ… **ä¸šåŠ¡è§„åˆ™éªŒè¯**: æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æŠ¥é¤ã€æ˜¯å¦é‡å¤ç™»è®°ç­‰
- âœ… **äºŒç»´ç ç®¡ç†**: æ”¯æŒäºŒç»´ç çš„åˆ›å»ºã€ç®¡ç†å’ŒçŠ¶æ€æ§åˆ¶
- âœ… **æ•°æ®ç»Ÿè®¡**: æä¾›å„é¤åˆ«å°±é¤æ•°æ®ç»Ÿè®¡åŠŸèƒ½
- âœ… **å†å²æŸ¥è¯¢**: æ”¯æŒç”¨æˆ·å°±é¤ç™»è®°å†å²è®°å½•æŸ¥è¯¢

## ğŸ”— æ¥å£åˆ—è¡¨

### 1. æ‰«ç å°±é¤ç™»è®°

**æ¥å£åœ°å€**: `POST /api/qr-scan/scan`

**åŠŸèƒ½æè¿°**: å¤„ç†ç”¨æˆ·æ‰«ç å°±é¤ç™»è®°è¯·æ±‚

**æƒé™è¦æ±‚**: å·²ç™»å½•ç”¨æˆ·

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "qrCode": "DINING_QR_MAIN_001",
  "scanTime": "2025-09-09T12:30:00.000Z"
}
```

**å‚æ•°è¯´æ˜**:
- `qrCode`: äºŒç»´ç æ ‡è¯†ï¼Œå¿…å¡«ï¼Œæœ€å¤§100å­—ç¬¦
- `scanTime`: æ‰«ç æ—¶é—´ï¼Œå¿…å¡«ï¼ŒISO 8601æ ¼å¼

**æˆåŠŸå“åº”**:
```json
{
  "success": true,
  "message": "ç™»è®°æˆåŠŸï¼[åˆé¤] 2025-09-09 12:30",
  "data": {
    "userId": "user-uuid",
    "userName": "å¼ ä¸‰",
    "mealType": "lunch",
    "mealTypeName": "åˆé¤",
    "diningDate": "2025-09-09",
    "scanTime": "2025-09-09 12:30:00",
    "qrCodeInfo": {
      "name": "é¤å…ä¸»å…¥å£äºŒç»´ç ",
      "location": "é¤å…ä¸»å…¥å£"
    }
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "message": "æ‚¨å°šæœªæŠ¥é¤ï¼Œæ— æ³•è¿›è¡Œå°±é¤ç™»è®°",
  "error": "æ‚¨å°šæœªæŠ¥é¤ï¼Œæ— æ³•è¿›è¡Œå°±é¤ç™»è®°",
  "code": "400",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

### 2. è·å–ç”¨æˆ·å°±é¤ç™»è®°å†å²

**æ¥å£åœ°å€**: `GET /api/qr-scan/history`

**åŠŸèƒ½æè¿°**: è·å–ç”¨æˆ·çš„å†å²å°±é¤ç™»è®°è®°å½•

**æƒé™è¦æ±‚**: å·²ç™»å½•ç”¨æˆ·

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
```

**è¯·æ±‚å‚æ•°**:
```
GET /api/qr-scan/history?startDate=2025-09-01&endDate=2025-09-09&mealType=lunch&limit=20&offset=0
```

**å‚æ•°è¯´æ˜**:
- `startDate`: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DD
- `endDate`: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DD
- `mealType`: é¤æ¬¡ç±»å‹ï¼Œå¯é€‰ï¼Œæšä¸¾å€¼ï¼šbreakfast/lunch/dinner
- `limit`: æ¯é¡µæ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤50ï¼Œæœ€å¤§100
- `offset`: åç§»é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤0

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–ç™»è®°å†å²æˆåŠŸ",
  "data": [
    {
      "_id": "registration-uuid",
      "userId": "user-uuid",
      "userName": "å¼ ä¸‰",
      "qrCodeId": "qr-uuid",
      "qrCode": "DINING_QR_MAIN_001",
      "scanTime": "2025-09-09T12:30:00.000Z",
      "mealType": "lunch",
      "mealTypeName": "åˆé¤",
      "diningDate": "2025-09-09",
      "status": "success",
      "scanTimeFormatted": "2025-09-09 12:30:00",
      "qrCodeName": "é¤å…ä¸»å…¥å£äºŒç»´ç ",
      "qrCodeLocation": "é¤å…ä¸»å…¥å£"
    }
  ],
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

### 3. è·å–ä»Šæ—¥å°±é¤æ¦‚è§ˆ

**æ¥å£åœ°å€**: `GET /api/qr-scan/today-overview`

**åŠŸèƒ½æè¿°**: è·å–ç”¨æˆ·ä»Šæ—¥å„é¤æ¬¡çš„æŠ¥é¤å’Œç™»è®°çŠ¶æ€

**æƒé™è¦æ±‚**: å·²ç™»å½•ç”¨æˆ·

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
```

**è¯·æ±‚å‚æ•°**: æ— 

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–ä»Šæ—¥æ¦‚è§ˆæˆåŠŸ",
  "data": {
    "date": "2025-09-09",
    "breakfast": {
      "ordered": true,
      "registered": true,
      "lastOrderTime": "2025-09-09T08:00:00.000Z",
      "lastScanTime": "2025-09-09T08:30:00.000Z"
    },
    "lunch": {
      "ordered": true,
      "registered": false,
      "lastOrderTime": "2025-09-09T10:00:00.000Z",
      "lastScanTime": null
    },
    "dinner": {
      "ordered": false,
      "registered": false,
      "lastOrderTime": null,
      "lastScanTime": null
    }
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

## ğŸ”§ ç®¡ç†å‘˜åŠŸèƒ½

### 4. è·å–å°±é¤ç»Ÿè®¡ä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/qr-scan/statistics`

**åŠŸèƒ½æè¿°**: è·å–æŒ‡å®šæ—¥æœŸçš„å°±é¤ç»Ÿè®¡æ•°æ®

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜åŠä»¥ä¸Š

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
```

**è¯·æ±‚å‚æ•°**:
```
GET /api/qr-scan/statistics?date=2025-09-09
```

**å‚æ•°è¯´æ˜**:
- `date`: ç»Ÿè®¡æ—¥æœŸï¼Œå¯é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼Œé»˜è®¤ä»Šå¤©

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–å°±é¤ç»Ÿè®¡æˆåŠŸ",
  "data": {
    "date": "2025-09-09",
    "breakfast": {
      "registrations": 25,
      "users": 20
    },
    "lunch": {
      "registrations": 45,
      "users": 40
    },
    "dinner": {
      "registrations": 30,
      "users": 28
    },
    "total": {
      "registrations": 100,
      "users": 88
    }
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

### 5. åˆ›å»ºäºŒç»´ç 

**æ¥å£åœ°å€**: `POST /api/qr-scan/qr-codes`

**åŠŸèƒ½æè¿°**: åˆ›å»ºæ–°çš„äºŒç»´ç 

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜åŠä»¥ä¸Š

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "name": "é¤å…BåŒºäºŒç»´ç ",
  "location": "é¤å…BåŒºå…¥å£",
  "description": "é¤å…BåŒºé€šç”¨äºŒç»´ç ï¼Œæ”¯æŒæ‰€æœ‰é¤æ¬¡ç™»è®°"
}
```

**å‚æ•°è¯´æ˜**:
- `name`: äºŒç»´ç åç§°ï¼Œå¿…å¡«ï¼Œ2-100å­—ç¬¦
- `location`: å¼ è´´ä½ç½®ï¼Œå¿…å¡«ï¼Œ2-200å­—ç¬¦
- `description`: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ï¼Œæœ€å¤§500å­—ç¬¦

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "äºŒç»´ç åˆ›å»ºæˆåŠŸ",
  "data": {
    "qrId": "qr-uuid",
    "code": "DINING_QR_1705123456789_ABC123DEF",
    "message": "äºŒç»´ç åˆ›å»ºæˆåŠŸ"
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

### 6. è·å–äºŒç»´ç åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/qr-scan/qr-codes`

**åŠŸèƒ½æè¿°**: è·å–äºŒç»´ç åˆ—è¡¨

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜åŠä»¥ä¸Š

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
```

**è¯·æ±‚å‚æ•°**:
```
GET /api/qr-scan/qr-codes?status=active&limit=50&offset=0
```

**å‚æ•°è¯´æ˜**:
- `status`: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ï¼Œæšä¸¾å€¼ï¼šactive/inactive
- `limit`: æ¯é¡µæ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤100ï¼Œæœ€å¤§200
- `offset`: åç§»é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤0

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–äºŒç»´ç åˆ—è¡¨æˆåŠŸ",
  "data": [
    {
      "_id": "qr-uuid",
      "code": "DINING_QR_MAIN_001",
      "name": "é¤å…ä¸»å…¥å£äºŒç»´ç ",
      "location": "é¤å…ä¸»å…¥å£",
      "description": "é¤å…ä¸»å…¥å£é€šç”¨äºŒç»´ç ï¼Œæ”¯æŒæ‰€æœ‰é¤æ¬¡ç™»è®°",
      "status": "active",
      "createTime": "2025-09-09T08:00:00.000Z",
      "updateTime": "2025-09-09T08:00:00.000Z"
    }
  ],
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

### 7. è·å–äºŒç»´ç è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/qr-scan/qr-codes/:qrId`

**åŠŸèƒ½æè¿°**: è·å–æŒ‡å®šäºŒç»´ç çš„è¯¦ç»†ä¿¡æ¯å’Œä½¿ç”¨ç»Ÿè®¡

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜åŠä»¥ä¸Š

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
```

**è¯·æ±‚å‚æ•°**: è·¯å¾„å‚æ•°
- `qrId`: äºŒç»´ç ID

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–äºŒç»´ç è¯¦æƒ…æˆåŠŸ",
  "data": {
    "_id": "qr-uuid",
    "code": "DINING_QR_MAIN_001",
    "name": "é¤å…ä¸»å…¥å£äºŒç»´ç ",
    "location": "é¤å…ä¸»å…¥å£",
    "description": "é¤å…ä¸»å…¥å£é€šç”¨äºŒç»´ç ï¼Œæ”¯æŒæ‰€æœ‰é¤æ¬¡ç™»è®°",
    "status": "active",
    "createTime": "2025-09-09T08:00:00.000Z",
    "updateTime": "2025-09-09T08:00:00.000Z",
    "usageStats": {
      "totalScans": 150,
      "uniqueUsers": 120,
      "successfulScans": 145,
      "failedScans": 5
    }
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

### 8. æ›´æ–°äºŒç»´ç çŠ¶æ€

**æ¥å£åœ°å€**: `PUT /api/qr-scan/qr-codes/:qrId/status`

**åŠŸèƒ½æè¿°**: æ›´æ–°äºŒç»´ç çš„å¯ç”¨/åœç”¨çŠ¶æ€

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜åŠä»¥ä¸Š

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "status": "inactive"
}
```

**å‚æ•°è¯´æ˜**:
- `status`: çŠ¶æ€ï¼Œå¿…å¡«ï¼Œæšä¸¾å€¼ï¼šactive/inactive

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "äºŒç»´ç çŠ¶æ€æ›´æ–°æˆåŠŸ",
  "data": {
    "qrId": "qr-uuid",
    "status": "inactive"
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

## ğŸ“‹ ä¸šåŠ¡è§„åˆ™

### æ‰«ç ç™»è®°è§„åˆ™

1. **æ—¶é—´é™åˆ¶**: åªæœ‰åœ¨å°±é¤æ—¶é—´å†…æ‰«ç æ‰èƒ½æˆåŠŸç™»è®°
   - æ—©é¤æ—¶é—´: 6:00-10:00
   - åˆé¤æ—¶é—´: 11:00-14:00
   - æ™šé¤æ—¶é—´: 17:00-20:00

2. **æŠ¥é¤éªŒè¯**: ç”¨æˆ·å¿…é¡»å…ˆæŠ¥é¤æ‰èƒ½è¿›è¡Œå°±é¤ç™»è®°
   - âš ï¸ **é‡è¦**: åªæœ‰éƒ¨é—¨ç®¡ç†å‘˜å¯ä»¥ä¸ºéƒ¨é—¨æˆå‘˜æŠ¥é¤
   - æ™®é€šç”¨æˆ·æ— æ³•è‡ªè¡ŒæŠ¥é¤ï¼Œéœ€è¦éƒ¨é—¨ç®¡ç†å‘˜ä»£ä¸ºæŠ¥é¤

3. **é‡å¤ç™»è®°**: åŒä¸€ç”¨æˆ·åŒä¸€é¤æ¬¡åªèƒ½ç™»è®°ä¸€æ¬¡

4. **äºŒç»´ç æœ‰æ•ˆæ€§**: åªæœ‰çŠ¶æ€ä¸º"active"çš„äºŒç»´ç æ‰èƒ½ä½¿ç”¨

### é”™è¯¯å¤„ç†

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| å½“å‰æ—¶é—´ä¸åœ¨å°±é¤æ—¶é—´å†… | æ‰«ç æ—¶é—´ä¸åœ¨è§„å®šå°±é¤æ—¶é—´å†… | åœ¨å°±é¤æ—¶é—´å†…æ‰«ç  |
| æ‚¨å°šæœªæŠ¥é¤ï¼Œæ— æ³•è¿›è¡Œå°±é¤ç™»è®° | ç”¨æˆ·æœªæŠ¥é¤ | å…ˆè¿›è¡ŒæŠ¥é¤æ“ä½œ |
| æ‚¨å·²ç™»è®°è¿‡æœ¬æ¬¡å°±é¤ | é‡å¤ç™»è®° | æ— éœ€é‡å¤æ“ä½œ |
| äºŒç»´ç æ— æ•ˆæˆ–å·²åœç”¨ | äºŒç»´ç ä¸å­˜åœ¨æˆ–å·²åœç”¨ | è”ç³»ç®¡ç†å‘˜æ£€æŸ¥äºŒç»´ç çŠ¶æ€ |
| ç”¨æˆ·ä¸å­˜åœ¨æˆ–å·²è¢«ç¦ç”¨ | ç”¨æˆ·çŠ¶æ€å¼‚å¸¸ | è”ç³»ç®¡ç†å‘˜æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ |

## ğŸš€ ä½¿ç”¨æµç¨‹

### ç”¨æˆ·æ‰«ç æµç¨‹

1. **å‡†å¤‡é˜¶æ®µ**
   - ç®¡ç†å‘˜ä»åå°è·å–äºŒç»´ç 
   - æ‰“å°å¹¶å¼ è´´åœ¨é¤å…å„ä½ç½®
   - âš ï¸ **é‡è¦**: éƒ¨é—¨ç®¡ç†å‘˜éœ€è¦å…ˆä¸ºéƒ¨é—¨æˆå‘˜æŠ¥é¤

2. **æ‰«ç ç™»è®°**
   - ç”¨æˆ·åˆ°è¾¾é¤å…
   - ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«æˆ–å°ç¨‹åºå†…éƒ¨æ‰«ç åŠŸèƒ½
   - æ‰«æäºŒç»´ç 
   - ç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­é¤æ¬¡å¹¶å®Œæˆç™»è®°

3. **ç»“æœåé¦ˆ**
   - æˆåŠŸ: æ˜¾ç¤º"ç™»è®°æˆåŠŸï¼[é¤æ¬¡] æ—¥æœŸ æ—¶é—´"
   - å¤±è´¥: æ˜¾ç¤ºå…·ä½“å¤±è´¥åŸå› ï¼ˆå¦‚"æ‚¨å°šæœªæŠ¥é¤ï¼Œæ— æ³•è¿›è¡Œå°±é¤ç™»è®°"ï¼‰

### ç®¡ç†å‘˜ç®¡ç†æµç¨‹

1. **äºŒç»´ç ç®¡ç†**
   - åˆ›å»ºæ–°äºŒç»´ç 
   - è®¾ç½®å¼ è´´ä½ç½®å’Œæè¿°
   - ç®¡ç†äºŒç»´ç çŠ¶æ€

2. **æ•°æ®ç»Ÿè®¡**
   - æŸ¥çœ‹å„é¤åˆ«å°±é¤ç»Ÿè®¡
   - åˆ†æå°±é¤æ•°æ®è¶‹åŠ¿
   - å¯¼å‡ºç»Ÿè®¡æŠ¥è¡¨

## ğŸ”’ å®‰å…¨è€ƒè™‘

1. **æƒé™æ§åˆ¶**: æ‰€æœ‰æ¥å£éƒ½éœ€è¦ç›¸åº”çš„æƒé™éªŒè¯
2. **æ•°æ®éªŒè¯**: ä¸¥æ ¼çš„å‚æ•°éªŒè¯å’Œä¸šåŠ¡è§„åˆ™æ£€æŸ¥
3. **æ—¥å¿—è®°å½•**: å®Œæ•´çš„æ“ä½œæ—¥å¿—å’Œé”™è¯¯è®°å½•
4. **é˜²é‡å¤**: é˜²æ­¢é‡å¤ç™»è®°å’Œæ¶æ„æ‰«ç 

## ï¿½ï¿½ æ•°æ®åº“è®¾è®¡

### æ–°å¢è¡¨ç»“æ„

#### qr_codes (äºŒç»´ç ç®¡ç†è¡¨)
```sql
CREATE TABLE qr_codes (
  _id VARCHAR(36) PRIMARY KEY,
  code VARCHAR(100) UNIQUE NOT NULL,
  name VARCHAR(100) NOT NULL,
  location VARCHAR(200),
  description TEXT,
  status ENUM('active', 'inactive') DEFAULT 'active',
  createTime TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updateTime TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### dining_registrations (å°±é¤ç™»è®°è¡¨)
```sql
CREATE TABLE dining_registrations (
  _id VARCHAR(36) PRIMARY KEY,
  userId VARCHAR(36) NOT NULL,
  userName VARCHAR(50) NOT NULL,
  qrCodeId VARCHAR(36) NOT NULL,
  qrCode VARCHAR(100) NOT NULL,
  scanTime TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  mealType ENUM('breakfast', 'lunch', 'dinner') NOT NULL,
  diningDate DATE NOT NULL,
  orderId VARCHAR(36),
  status ENUM('success', 'failed') DEFAULT 'success',
  failureReason TEXT,
  createTime TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  
  UNIQUE KEY uk_user_date_meal (userId, diningDate, mealType),
  FOREIGN KEY (userId) REFERENCES users(_id) ON DELETE CASCADE,
  FOREIGN KEY (qrCodeId) REFERENCES qr_codes(_id) ON DELETE CASCADE,
  FOREIGN KEY (orderId) REFERENCES dining_orders(_id) ON DELETE SET NULL
);
```

#### dining_orders è¡¨æ–°å¢å­—æ®µ
```sql
ALTER TABLE dining_orders ADD COLUMN actualDiningTime TIMESTAMP NULL COMMENT 'å®é™…å°±é¤æ—¶é—´';
ALTER TABLE dining_orders ADD COLUMN diningStatus ENUM('ordered', 'dined', 'cancelled') DEFAULT 'ordered' COMMENT 'å°±é¤çŠ¶æ€';
```

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

### cURL æµ‹è¯•å‘½ä»¤

```bash
# 1. æ‰«ç å°±é¤ç™»è®°
curl -X POST http://localhost:3000/api/qr-scan/scan \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "qrCode": "DINING_QR_MAIN_001",
    "scanTime": "2025-09-09T12:30:00.000Z"
  }'

# 2. è·å–ç™»è®°å†å²
curl -X GET "http://localhost:3000/api/qr-scan/history?limit=10" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 3. è·å–ä»Šæ—¥æ¦‚è§ˆ
curl -X GET http://localhost:3000/api/qr-scan/today-overview \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 4. è·å–å°±é¤ç»Ÿè®¡
curl -X GET "http://localhost:3000/api/qr-scan/statistics?date=2025-09-09" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 5. åˆ›å»ºäºŒç»´ç 
curl -X POST http://localhost:3000/api/qr-scan/qr-codes \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "é¤å…CåŒºäºŒç»´ç ",
    "location": "é¤å…CåŒºå…¥å£",
    "description": "é¤å…CåŒºé€šç”¨äºŒç»´ç "
  }'

# 6. è·å–äºŒç»´ç åˆ—è¡¨
curl -X GET "http://localhost:3000/api/qr-scan/qr-codes?status=active" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 7. è·å–äºŒç»´ç è¯¦æƒ…
curl -X GET http://localhost:3000/api/qr-scan/qr-codes/qr-uuid \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 8. æ›´æ–°äºŒç»´ç çŠ¶æ€
curl -X PUT http://localhost:3000/api/qr-scan/qr-codes/qr-uuid/status \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "inactive"}'
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025å¹´9æœˆ  
**ç»´æŠ¤å›¢é˜Ÿ**: æ¹–åŒ—çœåœ°è´¨å±€ç¬¬ä¸‰åœ°è´¨å¤§é˜Ÿ