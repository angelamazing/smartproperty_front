# å‰ç«¯å¯¹æ¥ - ç¡®è®¤å°±é¤æ¥å£æ–‡æ¡£

## ğŸ“‹ æ¥å£æ¦‚è¿°

æœ¬æ–‡æ¡£ä¸“é—¨ä¸ºå‰ç«¯å¼€å‘äººå‘˜æä¾›ç¡®è®¤å°±é¤åŠŸèƒ½çš„APIæ¥å£è¯´æ˜ï¼ŒåŒ…å«å®Œæ•´çš„è¯·æ±‚å‚æ•°ã€å“åº”æ ¼å¼ã€é”™è¯¯å¤„ç†å’Œä½¿ç”¨ç¤ºä¾‹ã€‚

**åŸºç¡€è·¯å¾„**: `/api/dining-confirmation`

**è®¤è¯æ–¹å¼**: æ‰€æœ‰æ¥å£éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWT Token

## ğŸ” è®¤è¯é…ç½®

### è¯·æ±‚å¤´è®¾ç½®
```javascript
const headers = {
  'Authorization': `Bearer ${token}`,
  'Content-Type': 'application/json'
};
```

### Tokenè·å–
```javascript
// ç™»å½•åè·å–token
const loginResponse = await fetch('/api/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ username, password })
});
const { data: { token } } = await loginResponse.json();
```

## ğŸ“± ç”¨æˆ·ç«¯æ¥å£

### 1. è·å–ç”¨æˆ·å°±é¤ç¡®è®¤çŠ¶æ€

**æ¥å£åœ°å€**: `GET /api/dining-confirmation/status`

**åŠŸèƒ½æè¿°**: è·å–ç”¨æˆ·æŒ‡å®šæ—¥æœŸçš„å°±é¤ç¡®è®¤çŠ¶æ€ï¼Œæ˜¾ç¤ºæ¯ä¸ªé¤æ¬¡çš„æŠ¥é¤å’Œç¡®è®¤æƒ…å†µ

**è¯·æ±‚å‚æ•°**:
```javascript
const params = {
  date: '2024-01-15'  // å¯é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼Œé»˜è®¤ä»Šæ—¥
};

const queryString = new URLSearchParams(params).toString();
const response = await fetch(`/api/dining-confirmation/status?${queryString}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```

**å“åº”æ•°æ®ç»“æ„**:
```javascript
{
  "success": true,
  "message": "è·å–å°±é¤ç¡®è®¤çŠ¶æ€æˆåŠŸ",
  "data": {
    "userId": "user_id_1",
    "userName": "å¼ ä¸‰",
    "department": "æŠ€æœ¯éƒ¨",
    "queryDate": "2024-01-15",
    "mealConfirmationStatus": {
      "breakfast": {
        "isRegistered": true,           // æ˜¯å¦å·²æŠ¥é¤
        "orderId": "order_id_1",        // è®¢å•ID
        "status": "confirmed",          // æŠ¥é¤çŠ¶æ€ï¼špending/confirmed/completed/cancelled
        "diningStatus": "dined",        // å°±é¤çŠ¶æ€ï¼šordered/dined/cancelled
        "statusText": "å·²ç¡®è®¤",         // æŠ¥é¤çŠ¶æ€ä¸­æ–‡
        "confirmationText": "å·²å°±é¤",   // å°±é¤çŠ¶æ€ä¸­æ–‡
        "actualDiningTime": "2024-01-15 08:30:00",  // å®é™…å°±é¤æ—¶é—´
        "registerTime": "2024-01-15 07:00:00",      // æŠ¥é¤æ—¶é—´
        "remark": "ä»Šæ—¥æ—©é¤"            // å¤‡æ³¨
      },
      "lunch": {
        "isRegistered": true,
        "orderId": "order_id_2",
        "status": "confirmed",
        "diningStatus": "ordered",      // å·²æŠ¥é¤ä½†æœªç¡®è®¤å°±é¤
        "statusText": "å·²ç¡®è®¤",
        "confirmationText": "å·²æŠ¥é¤",
        "actualDiningTime": null,       // æœªç¡®è®¤å°±é¤ï¼Œæ—¶é—´ä¸ºç©º
        "registerTime": "2024-01-15 10:00:00",
        "remark": "ä»Šæ—¥åˆé¤"
      },
      "dinner": {
        "isRegistered": false,           // æœªæŠ¥é¤
        "orderId": null,
        "status": null,
        "diningStatus": null,
        "statusText": "æœªæŠ¥é¤",
        "confirmationText": "æœªç¡®è®¤",
        "actualDiningTime": null,
        "registerTime": null,
        "remark": null
      }
    },
    "summary": {
      "totalRegistered": 2,             // æ€»æŠ¥é¤æ•°
      "totalConfirmed": 1,             // æ€»ç¡®è®¤å°±é¤æ•°
      "pendingConfirmation": 1,         // å¾…ç¡®è®¤å°±é¤æ•°
      "unregisteredCount": 1           // æœªæŠ¥é¤æ•°
    }
  }
}
```

**å‰ç«¯ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// Vue.js ç¤ºä¾‹
async fetchDiningStatus(date = null) {
  try {
    const params = date ? { date } : {};
    const queryString = new URLSearchParams(params).toString();
    
    const response = await fetch(`/api/dining-confirmation/status?${queryString}`, {
      headers: { 'Authorization': `Bearer ${this.token}` }
    });
    
    const result = await response.json();
    
    if (result.success) {
      this.diningStatus = result.data;
      this.updateMealStatusDisplay();
    } else {
      this.showError(result.message);
    }
  } catch (error) {
    this.showError('è·å–å°±é¤çŠ¶æ€å¤±è´¥');
  }
}

// æ›´æ–°é¤æ¬¡çŠ¶æ€æ˜¾ç¤º
updateMealStatusDisplay() {
  const meals = ['breakfast', 'lunch', 'dinner'];
  meals.forEach(mealType => {
    const status = this.diningStatus.mealConfirmationStatus[mealType];
    this.updateMealCard(mealType, status);
  });
}
```

---

### 2. ç”¨æˆ·æ‰‹åŠ¨ç¡®è®¤å°±é¤

**æ¥å£åœ°å€**: `POST /api/dining-confirmation/manual/:orderId`

**åŠŸèƒ½æè¿°**: ç”¨æˆ·è‡ªå·±ç¡®è®¤å·²å°±é¤

**è¯·æ±‚å‚æ•°**:
```javascript
const orderId = 'order_id_1';
const response = await fetch(`/api/dining-confirmation/manual/${orderId}`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    confirmationType: 'manual'  // å¯é€‰ï¼Œé»˜è®¤ä¸ºmanual
  })
});
```

**å“åº”æ•°æ®ç»“æ„**:
```javascript
{
  "success": true,
  "message": "ç¡®è®¤å°±é¤æˆåŠŸ",
  "data": {
    "orderId": "order_id_1",
    "confirmationType": "manual",
    "actualDiningTime": "2024-01-15 12:30:00",
    "message": "ç¡®è®¤å°±é¤æˆåŠŸ"
  }
}
```

**å‰ç«¯ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// ç¡®è®¤å°±é¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
async confirmDining(orderId) {
  try {
    // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
    const confirmed = await this.showConfirmDialog('ç¡®è®¤å·²å°±é¤ï¼Ÿ');
    if (!confirmed) return;

    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    this.showLoading('æ­£åœ¨ç¡®è®¤å°±é¤...');

    const response = await fetch(`/api/dining-confirmation/manual/${orderId}`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        confirmationType: 'manual'
      })
    });

    const result = await response.json();
    
    if (result.success) {
      this.showSuccess('ç¡®è®¤å°±é¤æˆåŠŸï¼');
      // åˆ·æ–°çŠ¶æ€
      await this.fetchDiningStatus();
    } else {
      this.showError(result.message);
    }
  } catch (error) {
    this.showError('ç¡®è®¤å°±é¤å¤±è´¥');
  } finally {
    this.hideLoading();
  }
}
```

---

### 3. è·å–å°±é¤ç¡®è®¤å†å²è®°å½•

**æ¥å£åœ°å€**: `GET /api/dining-confirmation/history`

**åŠŸèƒ½æè¿°**: è·å–ç”¨æˆ·çš„å°±é¤ç¡®è®¤å†å²è®°å½•

**è¯·æ±‚å‚æ•°**:
```javascript
const params = {
  date: '2024-01-15',           // å•æ—¥æŸ¥è¯¢
  startDate: '2024-01-01',      // å¼€å§‹æ—¥æœŸ
  endDate: '2024-01-31',        // ç»“æŸæ—¥æœŸ
  diningStatus: 'dined',        // å°±é¤çŠ¶æ€ï¼šordered/dined/cancelled
  page: 1,                      // é¡µç 
  pageSize: 20                  // æ¯é¡µå¤§å°
};

const queryString = new URLSearchParams(params).toString();
const response = await fetch(`/api/dining-confirmation/history?${queryString}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```

**å“åº”æ•°æ®ç»“æ„**:
```javascript
{
  "success": true,
  "message": "è·å–å°±é¤ç¡®è®¤å†å²æˆåŠŸ",
  "data": {
    "records": [
      {
        "orderId": "order_id_1",
        "diningDate": "2024-01-15",
        "mealType": "breakfast",
        "mealTypeName": "æ—©é¤",
        "status": "confirmed",
        "diningStatus": "dined",
        "statusText": "å·²ç¡®è®¤",
        "confirmationText": "å·²å°±é¤",
        "actualDiningTime": "2024-01-15 08:30:00",
        "registerTime": "2024-01-15 07:00:00",
        "remark": "ä»Šæ—¥æ—©é¤",
        "confirmationType": "manual",
        "confirmationTime": "2024-01-15 08:30:00",
        "confirmedBy": null
      }
    ],
    "total": 1,
    "page": 1,
    "pageSize": 20,
    "hasMore": false
  }
}
```

**å‰ç«¯ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// è·å–å†å²è®°å½•
async fetchDiningHistory(filters = {}) {
  try {
    const params = {
      page: this.currentPage,
      pageSize: this.pageSize,
      ...filters
    };
    
    const queryString = new URLSearchParams(params).toString();
    const response = await fetch(`/api/dining-confirmation/history?${queryString}`, {
      headers: { 'Authorization': `Bearer ${this.token}` }
    });
    
    const result = await response.json();
    
    if (result.success) {
      this.historyRecords = result.data.records;
      this.totalRecords = result.data.total;
      this.hasMore = result.data.hasMore;
    } else {
      this.showError(result.message);
    }
  } catch (error) {
    this.showError('è·å–å†å²è®°å½•å¤±è´¥');
  }
}
```

## ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜ç«¯æ¥å£

### 4. ç®¡ç†å‘˜ä»£ç¡®è®¤å°±é¤

**æ¥å£åœ°å€**: `POST /api/dining-confirmation/admin/:orderId`

**åŠŸèƒ½æè¿°**: ç®¡ç†å‘˜ä»£ä¸ºç¡®è®¤ç”¨æˆ·å·²å°±é¤

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜ã€éªŒè¯å‘˜

**è¯·æ±‚å‚æ•°**:
```javascript
const orderId = 'order_id_1';
const response = await fetch(`/api/dining-confirmation/admin/${orderId}`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${adminToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    remark: 'ç®¡ç†å‘˜ä»£ç¡®è®¤å°±é¤'  // å¯é€‰
  })
});
```

**å“åº”æ•°æ®ç»“æ„**:
```javascript
{
  "success": true,
  "message": "ç®¡ç†å‘˜ä»£ç¡®è®¤å°±é¤æˆåŠŸ",
  "data": {
    "orderId": "order_id_1",
    "confirmationType": "admin",
    "actualDiningTime": "2024-01-15 12:30:00",
    "confirmedBy": "admin_id",
    "message": "ç®¡ç†å‘˜ä»£ç¡®è®¤å°±é¤æˆåŠŸ"
  }
}
```

---

### 5. æ‰¹é‡ç¡®è®¤å°±é¤

**æ¥å£åœ°å€**: `POST /api/dining-confirmation/batch`

**åŠŸèƒ½æè¿°**: ç®¡ç†å‘˜æ‰¹é‡ç¡®è®¤å¤šä¸ªè®¢å•çš„å°±é¤çŠ¶æ€

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜ã€éªŒè¯å‘˜

**è¯·æ±‚å‚æ•°**:
```javascript
const response = await fetch('/api/dining-confirmation/batch', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${adminToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    orderIds: ['order_id_1', 'order_id_2', 'order_id_3'],
    remark: 'æ‰¹é‡ç¡®è®¤å°±é¤'  // å¯é€‰
  })
});
```

**å“åº”æ•°æ®ç»“æ„**:
```javascript
{
  "success": true,
  "message": "æ‰¹é‡ç¡®è®¤å®Œæˆï¼ŒæˆåŠŸ 2 ä¸ª",
  "data": {
    "successCount": 2,
    "totalCount": 3,
    "errors": [
      {
        "orderId": "order_id_3",
        "error": "è¯¥è®¢å•å·²ç¡®è®¤å°±é¤"
      }
    ]
  }
}
```

**å‰ç«¯ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// æ‰¹é‡ç¡®è®¤å°±é¤
async batchConfirmDining(selectedOrders) {
  try {
    const confirmed = await this.showConfirmDialog(
      `ç¡®è®¤æ‰¹é‡ç¡®è®¤ ${selectedOrders.length} ä¸ªè®¢å•çš„å°±é¤çŠ¶æ€ï¼Ÿ`
    );
    if (!confirmed) return;

    this.showLoading('æ­£åœ¨æ‰¹é‡ç¡®è®¤...');

    const response = await fetch('/api/dining-confirmation/batch', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.adminToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        orderIds: selectedOrders.map(order => order.orderId),
        remark: 'æ‰¹é‡ç¡®è®¤å°±é¤'
      })
    });

    const result = await response.json();
    
    if (result.success) {
      const { successCount, totalCount, errors } = result.data;
      this.showSuccess(`æ‰¹é‡ç¡®è®¤å®Œæˆï¼ŒæˆåŠŸ ${successCount}/${totalCount} ä¸ª`);
      
      if (errors.length > 0) {
        this.showErrors(errors);
      }
      
      // åˆ·æ–°åˆ—è¡¨
      await this.fetchPendingOrders();
    } else {
      this.showError(result.message);
    }
  } catch (error) {
    this.showError('æ‰¹é‡ç¡®è®¤å¤±è´¥');
  } finally {
    this.hideLoading();
  }
}
```

---

### 6. è·å–å¾…ç¡®è®¤å°±é¤åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/dining-confirmation/pending`

**åŠŸèƒ½æè¿°**: è·å–å¾…ç¡®è®¤å°±é¤çš„è®¢å•åˆ—è¡¨

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜ã€éªŒè¯å‘˜

**è¯·æ±‚å‚æ•°**:
```javascript
const params = {
  date: '2024-01-15',           // æŸ¥è¯¢æ—¥æœŸï¼Œé»˜è®¤ä»Šæ—¥
  departmentId: 'dept_id_1',    // éƒ¨é—¨IDï¼Œå¯é€‰
  mealType: 'lunch',            // é¤æ¬¡ç±»å‹ï¼šbreakfast/lunch/dinnerï¼Œå¯é€‰
  page: 1,                      // é¡µç 
  pageSize: 20                  // æ¯é¡µå¤§å°
};

const queryString = new URLSearchParams(params).toString();
const response = await fetch(`/api/dining-confirmation/pending?${queryString}`, {
  headers: { 'Authorization': `Bearer ${adminToken}` }
});
```

**å“åº”æ•°æ®ç»“æ„**:
```javascript
{
  "success": true,
  "message": "è·å–å¾…ç¡®è®¤å°±é¤åˆ—è¡¨æˆåŠŸ",
  "data": {
    "records": [
      {
        "orderId": "order_id_1",
        "deptName": "æŠ€æœ¯éƒ¨",
        "userId": "user_id_1",
        "userName": "å¼ ä¸‰",
        "mealType": "lunch",
        "mealTypeName": "åˆé¤",
        "diningDate": "2024-01-15",
        "registerTime": "2024-01-15 10:00:00",
        "remark": "ä»Šæ—¥åˆé¤",
        "currentUserDept": "æŠ€æœ¯éƒ¨"
      }
    ],
    "total": 1,
    "page": 1,
    "pageSize": 20,
    "hasMore": false
  }
}
```

---

### 7. è·å–éƒ¨é—¨å°±é¤ç¡®è®¤ç»Ÿè®¡

**æ¥å£åœ°å€**: `GET /api/dining-confirmation/stats`

**åŠŸèƒ½æè¿°**: è·å–éƒ¨é—¨å°±é¤ç¡®è®¤ç»Ÿè®¡æ•°æ®

**æƒé™è¦æ±‚**: éƒ¨é—¨ç®¡ç†å‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜ã€éªŒè¯å‘˜

**è¯·æ±‚å‚æ•°**:
```javascript
const params = {
  date: '2024-01-15',           // æŸ¥è¯¢æ—¥æœŸï¼Œé»˜è®¤ä»Šæ—¥
  departmentId: 'dept_id_1'     // éƒ¨é—¨IDï¼Œå¯é€‰
};

const queryString = new URLSearchParams(params).toString();
const response = await fetch(`/api/dining-confirmation/stats?${queryString}`, {
  headers: { 'Authorization': `Bearer ${adminToken}` }
});
```

**å“åº”æ•°æ®ç»“æ„**:
```javascript
{
  "success": true,
  "message": "è·å–éƒ¨é—¨å°±é¤ç¡®è®¤ç»Ÿè®¡æˆåŠŸ",
  "data": {
    "queryDate": "2024-01-15",
    "totalStats": {
      "totalOrders": 156,
      "pendingConfirmation": 45,
      "confirmedDining": 98,
      "cancelledOrders": 13
    },
    "mealStats": [
      {
        "mealType": "breakfast",
        "mealTypeName": "æ—©é¤",
        "totalOrders": 45,
        "pendingConfirmation": 12,
        "confirmedDining": 30,
        "cancelledOrders": 3
      },
      {
        "mealType": "lunch",
        "mealTypeName": "åˆé¤",
        "totalOrders": 78,
        "pendingConfirmation": 25,
        "confirmedDining": 48,
        "cancelledOrders": 5
      },
      {
        "mealType": "dinner",
        "mealTypeName": "æ™šé¤",
        "totalOrders": 33,
        "pendingConfirmation": 8,
        "confirmedDining": 20,
        "cancelledOrders": 5
      }
    ],
    "departmentStats": [
      {
        "deptName": "æŠ€æœ¯éƒ¨",
        "totalOrders": 89,
        "pendingConfirmation": 25,
        "confirmedDining": 58,
        "cancelledOrders": 6
      },
      {
        "deptName": "äººäº‹éƒ¨",
        "totalOrders": 45,
        "pendingConfirmation": 12,
        "confirmedDining": 28,
        "cancelledOrders": 5
      }
    ]
  }
}
```

## ğŸ¨ å‰ç«¯UIç»„ä»¶å»ºè®®

### 1. ç”¨æˆ·ç«¯ç»„ä»¶

#### å°±é¤çŠ¶æ€å¡ç‰‡
```vue
<template>
  <div class="dining-status-card">
    <div class="meal-card" v-for="meal in meals" :key="meal.type">
      <div class="meal-header">
        <h3>{{ meal.name }}</h3>
        <span class="status-badge" :class="getStatusClass(meal.status)">
          {{ meal.statusText }}
        </span>
      </div>
      
      <div class="meal-info">
        <p v-if="meal.isRegistered">
          æŠ¥é¤æ—¶é—´: {{ formatTime(meal.registerTime) }}
        </p>
        <p v-if="meal.diningStatus === 'dined'">
          å°±é¤æ—¶é—´: {{ formatTime(meal.actualDiningTime) }}
        </p>
      </div>
      
      <div class="meal-actions">
        <button 
          v-if="meal.isRegistered && meal.diningStatus === 'ordered'"
          @click="confirmDining(meal.orderId)"
          class="confirm-btn"
        >
          ç¡®è®¤å°±é¤
        </button>
        <span v-else-if="meal.diningStatus === 'dined'" class="confirmed-text">
          å·²ç¡®è®¤å°±é¤
        </span>
      </div>
    </div>
  </div>
</template>
```

#### ç¡®è®¤å°±é¤æŒ‰é’®
```vue
<template>
  <button 
    @click="handleConfirmDining"
    :disabled="loading"
    class="confirm-dining-btn"
  >
    <span v-if="loading">ç¡®è®¤ä¸­...</span>
    <span v-else>ç¡®è®¤å°±é¤</span>
  </button>
</template>

<script>
export default {
  methods: {
    async handleConfirmDining() {
      const confirmed = await this.$confirm('ç¡®è®¤å·²å°±é¤ï¼Ÿ', 'æç¤º', {
        confirmButtonText: 'ç¡®è®¤',
        cancelButtonText: 'å–æ¶ˆ',
        type: 'warning'
      });
      
      if (confirmed) {
        await this.confirmDining(this.orderId);
      }
    }
  }
}
</script>
```

### 2. ç®¡ç†å‘˜ç«¯ç»„ä»¶

#### å¾…ç¡®è®¤åˆ—è¡¨
```vue
<template>
  <div class="pending-confirmations">
    <div class="list-header">
      <h3>å¾…ç¡®è®¤å°±é¤åˆ—è¡¨</h3>
      <div class="actions">
        <button @click="batchConfirm" :disabled="selectedOrders.length === 0">
          æ‰¹é‡ç¡®è®¤ ({{ selectedOrders.length }})
        </button>
      </div>
    </div>
    
    <el-table 
      :data="pendingOrders" 
      @selection-change="handleSelectionChange"
    >
      <el-table-column type="selection" width="55"></el-table-column>
      <el-table-column prop="userName" label="ç”¨æˆ·å§“å"></el-table-column>
      <el-table-column prop="deptName" label="éƒ¨é—¨"></el-table-column>
      <el-table-column prop="mealTypeName" label="é¤æ¬¡"></el-table-column>
      <el-table-column prop="diningDate" label="å°±é¤æ—¥æœŸ"></el-table-column>
      <el-table-column prop="registerTime" label="æŠ¥é¤æ—¶é—´"></el-table-column>
      <el-table-column label="æ“ä½œ">
        <template #default="scope">
          <el-button 
            size="small" 
            @click="confirmSingle(scope.row)"
          >
            ç¡®è®¤å°±é¤
          </el-button>
        </template>
      </el-table-column>
    </el-table>
  </div>
</template>
```

#### ç»Ÿè®¡å›¾è¡¨
```vue
<template>
  <div class="dining-stats">
    <div class="stats-overview">
      <div class="stat-card">
        <h4>æ€»æŠ¥é¤æ•°</h4>
        <span class="stat-number">{{ stats.totalStats.totalOrders }}</span>
      </div>
      <div class="stat-card">
        <h4>å¾…ç¡®è®¤</h4>
        <span class="stat-number pending">{{ stats.totalStats.pendingConfirmation }}</span>
      </div>
      <div class="stat-card">
        <h4>å·²ç¡®è®¤</h4>
        <span class="stat-number confirmed">{{ stats.totalStats.confirmedDining }}</span>
      </div>
    </div>
    
    <div class="meal-stats-chart">
      <h4>å„é¤æ¬¡ç»Ÿè®¡</h4>
      <div class="chart-container">
        <!-- è¿™é‡Œå¯ä»¥é›†æˆå›¾è¡¨åº“ï¼Œå¦‚ ECharts -->
      </div>
    </div>
  </div>
</template>
```

## ğŸš¨ é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç 
```javascript
const errorCodes = {
  400: 'è¯·æ±‚å‚æ•°é”™è¯¯',
  401: 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•',
  403: 'æƒé™ä¸è¶³',
  404: 'èµ„æºä¸å­˜åœ¨',
  409: 'ä¸šåŠ¡å†²çªï¼ˆå¦‚é‡å¤ç¡®è®¤ï¼‰',
  500: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
};
```

### é”™è¯¯å¤„ç†ç¤ºä¾‹
```javascript
async handleApiCall(apiFunction) {
  try {
    const result = await apiFunction();
    return result;
  } catch (error) {
    if (error.response) {
      const { status, data } = error.response;
      switch (status) {
        case 401:
          this.$router.push('/login');
          break;
        case 403:
          this.showError('æƒé™ä¸è¶³');
          break;
        case 409:
          this.showError(data.message || 'æ“ä½œå†²çª');
          break;
        default:
          this.showError(data.message || 'æ“ä½œå¤±è´¥');
      }
    } else {
      this.showError('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
    }
  }
}
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

### å“åº”å¼è®¾è®¡
```css
/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
  .dining-status-card {
    padding: 10px;
  }
  
  .meal-card {
    margin-bottom: 15px;
    padding: 15px;
  }
  
  .confirm-btn {
    width: 100%;
    padding: 12px;
    font-size: 16px;
  }
}
```

### è§¦æ‘¸ä¼˜åŒ–
```javascript
// é˜²æ­¢é‡å¤ç‚¹å‡»
let isConfirming = false;

async confirmDining(orderId) {
  if (isConfirming) return;
  
  isConfirming = true;
  try {
    await this.performConfirmDining(orderId);
  } finally {
    isConfirming = false;
  }
}
```

## ğŸ”„ çŠ¶æ€ç®¡ç†å»ºè®®

### Vuex Store ç¤ºä¾‹
```javascript
// store/modules/diningConfirmation.js
export default {
  namespaced: true,
  state: {
    diningStatus: null,
    historyRecords: [],
    pendingOrders: [],
    stats: null
  },
  
  mutations: {
    SET_DINING_STATUS(state, status) {
      state.diningStatus = status;
    },
    UPDATE_MEAL_STATUS(state, { mealType, status }) {
      if (state.diningStatus) {
        state.diningStatus.mealConfirmationStatus[mealType] = status;
      }
    }
  },
  
  actions: {
    async fetchDiningStatus({ commit }, date) {
      const response = await api.getDiningStatus(date);
      commit('SET_DINING_STATUS', response.data);
      return response.data;
    },
    
    async confirmDining({ commit, dispatch }, orderId) {
      const response = await api.confirmDining(orderId);
      // åˆ·æ–°çŠ¶æ€
      await dispatch('fetchDiningStatus');
      return response.data;
    }
  }
};
```

## ğŸ“‹ æµ‹è¯•ç”¨ä¾‹

### ç”¨æˆ·ç«¯æµ‹è¯•
```javascript
// æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹
describe('ç¡®è®¤å°±é¤åŠŸèƒ½', () => {
  test('è·å–å°±é¤çŠ¶æ€', async () => {
    const response = await fetchDiningStatus();
    expect(response.success).toBe(true);
    expect(response.data.mealConfirmationStatus).toBeDefined();
  });
  
  test('ç¡®è®¤å°±é¤', async () => {
    const response = await confirmDining('test_order_id');
    expect(response.success).toBe(true);
    expect(response.data.confirmationType).toBe('manual');
  });
});
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ  
**é€‚ç”¨æ¡†æ¶**: Vue.js 3.x, React, Angular  
**ç»´æŠ¤å›¢é˜Ÿ**: æ¹–åŒ—çœåœ°è´¨å±€ç¬¬ä¸‰åœ°è´¨å¤§é˜Ÿ
