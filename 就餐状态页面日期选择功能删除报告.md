# å°±é¤çŠ¶æ€é¡µé¢æ—¥æœŸé€‰æ‹©åŠŸèƒ½åˆ é™¤æŠ¥å‘Š

## ä¿®æ”¹æ¦‚è¿°

æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œåˆ é™¤äº†å°±é¤çŠ¶æ€é¡µé¢çš„æ—¥æœŸé€‰æ‹©åŠŸèƒ½ï¼Œè®©é¡µé¢é»˜è®¤åªæ˜¾ç¤ºå½“å¤©çš„æ•°æ®ã€‚

## ä¿®æ”¹å†…å®¹

### æ–‡ä»¶ä¿®æ”¹

**æ–‡ä»¶**: `src/pages/dining/dining-status.vue`

### 1. æ¨¡æ¿ä¿®æ”¹

#### åˆ é™¤é¡µé¢æ ‡é¢˜åŒºåŸŸçš„æ—¥æœŸé€‰æ‹©å™¨
**ä¿®æ”¹å‰**:
```html
<!-- é¡µé¢æ ‡é¢˜ -->
<view class="page-header">
  <text class="page-title">å°±é¤çŠ¶æ€</text>
  <view class="date-selector" @click="showDatePicker = true">
    <text class="date-text">{{ selectedDate }}</text>
    <text class="iconfont">ğŸ“…</text>
  </view>
</view>
```

**ä¿®æ”¹å**:
```html
<!-- é¡µé¢æ ‡é¢˜ -->
<view class="page-header">
  <text class="page-title">å°±é¤çŠ¶æ€</text>
</view>
```

#### åˆ é™¤æ—¥æœŸé€‰æ‹©å™¨å¼¹çª—
**åˆ é™¤å†…å®¹**:
```html
<!-- æ—¥æœŸé€‰æ‹©å™¨ -->
<uni-popup ref="datePickerPopup" type="bottom" :mask-click="true">
  <view class="date-picker-popup">
    <view class="popup-header">
      <text class="popup-title">é€‰æ‹©æ—¥æœŸ</text>
      <button class="close-btn" @click="showDatePicker = false">Ã—</button>
    </view>
    <picker 
      mode="date" 
      :value="selectedDate" 
      @change="onDateChange"
      :start="getMinDate()"
      :end="getMaxDate()"
    >
      <view class="picker-display">
        <text>{{ selectedDate }}</text>
      </view>
    </picker>
  </view>
</uni-popup>
```

### 2. è„šæœ¬ä¿®æ”¹

#### åˆ é™¤æ•°æ®å±æ€§
**ä¿®æ”¹å‰**:
```javascript
data() {
  return {
    selectedDate: '',
    diningStatus: null,
    userInfo: null,
    isProcessing: false,
    showDatePicker: false,
    mealTypes: [...]
  }
}
```

**ä¿®æ”¹å**:
```javascript
data() {
  return {
    diningStatus: null,
    userInfo: null,
    isProcessing: false,
    mealTypes: [...]
  }
}
```

#### ç®€åŒ–åˆå§‹åŒ–æ–¹æ³•
**ä¿®æ”¹å‰**:
```javascript
initPage() {
  // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©ï¼ˆä½¿ç”¨TimeUtilsç¡®ä¿iOSå…¼å®¹æ€§ï¼‰
  this.selectedDate = this.$getCurrentDate()
  
  // è·å–ç”¨æˆ·ä¿¡æ¯
  this.loadUserInfo()
  
  // åŠ è½½å°±é¤çŠ¶æ€
  this.loadDiningStatus()
}
```

**ä¿®æ”¹å**:
```javascript
initPage() {
  // è·å–ç”¨æˆ·ä¿¡æ¯
  this.loadUserInfo()
  
  // åŠ è½½å°±é¤çŠ¶æ€
  this.loadDiningStatus()
}
```

#### ä¿®æ”¹åŠ è½½å°±é¤çŠ¶æ€æ–¹æ³•
**ä¿®æ”¹å‰**:
```javascript
async loadDiningStatus() {
  try {
    uni.showLoading({ title: 'åŠ è½½ä¸­...' })
    
    const response = await api.diningConfirmation.getStatus(this.selectedDate)
```

**ä¿®æ”¹å**:
```javascript
async loadDiningStatus() {
  try {
    uni.showLoading({ title: 'åŠ è½½ä¸­...' })
    
    // ç›´æ¥ä½¿ç”¨ä»Šå¤©çš„æ—¥æœŸ
    const today = this.$getCurrentDate()
    const response = await api.diningConfirmation.getStatus(today)
```

#### ä¿®æ”¹å»æŠ¥é¤æ–¹æ³•
**ä¿®æ”¹å‰**:
```javascript
goToRegister(mealType) {
  // ä½¿ç”¨æ™ºèƒ½å¯¼èˆªå‡½æ•°ï¼Œè‡ªåŠ¨åˆ¤æ–­é¡µé¢ç±»å‹
  this.$smartNavigate(`/pages/dining/dining?mealType=${mealType}&date=${this.selectedDate}`)
}
```

**ä¿®æ”¹å**:
```javascript
goToRegister(mealType) {
  // ä½¿ç”¨æ™ºèƒ½å¯¼èˆªå‡½æ•°ï¼Œè‡ªåŠ¨åˆ¤æ–­é¡µé¢ç±»å‹ï¼Œä½¿ç”¨ä»Šå¤©çš„æ—¥æœŸ
  const today = this.$getCurrentDate()
  this.$smartNavigate(`/pages/dining/dining?mealType=${mealType}&date=${today}`)
}
```

#### åˆ é™¤æ—¥æœŸç›¸å…³æ–¹æ³•
**åˆ é™¤çš„æ–¹æ³•**:
- `onDateChange(e)` - æ—¥æœŸå˜åŒ–å¤„ç†
- `getMinDate()` - è·å–æœ€å°æ—¥æœŸ
- `getMaxDate()` - è·å–æœ€å¤§æ—¥æœŸ

### 3. æ ·å¼ä¿®æ”¹

#### ç®€åŒ–é¡µé¢æ ‡é¢˜æ ·å¼
**ä¿®æ”¹å‰**:
```scss
.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30rpx;
}
```

**ä¿®æ”¹å**:
```scss
.page-header {
  margin-bottom: 30rpx;
}
```

#### åˆ é™¤æ—¥æœŸé€‰æ‹©å™¨ç›¸å…³æ ·å¼
**åˆ é™¤çš„æ ·å¼**:
- `.date-selector` - æ—¥æœŸé€‰æ‹©å™¨æ ·å¼
- `.date-text` - æ—¥æœŸæ–‡æœ¬æ ·å¼
- `.iconfont` - å›¾æ ‡å­—ä½“æ ·å¼
- `.date-picker-popup` - æ—¥æœŸé€‰æ‹©å™¨å¼¹çª—æ ·å¼
- `.popup-header` - å¼¹çª—å¤´éƒ¨æ ·å¼
- `.popup-title` - å¼¹çª—æ ‡é¢˜æ ·å¼
- `.close-btn` - å…³é—­æŒ‰é’®æ ·å¼
- `.picker-display` - é€‰æ‹©å™¨æ˜¾ç¤ºæ ·å¼

## åŠŸèƒ½å˜åŒ–

### ä¿®æ”¹å‰
- é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºæ—¥æœŸé€‰æ‹©å™¨
- ç”¨æˆ·å¯ä»¥ç‚¹å‡»é€‰æ‹©ä¸åŒæ—¥æœŸ
- æ˜¾ç¤ºé€‰ä¸­æ—¥æœŸçš„å°±é¤çŠ¶æ€
- æ”¯æŒæŸ¥çœ‹å†å²æ—¥æœŸçš„æ•°æ®

### ä¿®æ”¹å
- é¡µé¢é¡¶éƒ¨åªæ˜¾ç¤ºæ ‡é¢˜
- è‡ªåŠ¨æ˜¾ç¤ºå½“å¤©çš„å°±é¤çŠ¶æ€
- æ— æ³•é€‰æ‹©å…¶ä»–æ—¥æœŸ
- ç®€åŒ–äº†ç”¨æˆ·ç•Œé¢

## æŠ€æœ¯ç»†èŠ‚

### æ—¥æœŸå¤„ç†
- ä½¿ç”¨ `this.$getCurrentDate()` è·å–å½“å¤©æ—¥æœŸ
- åœ¨ `loadDiningStatus()` æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨å½“å¤©æ—¥æœŸ
- åœ¨ `goToRegister()` æ–¹æ³•ä¸­ä¼ é€’å½“å¤©æ—¥æœŸ

### ä»£ç ç®€åŒ–
- åˆ é™¤äº†ä¸å¿…è¦çš„çŠ¶æ€ç®¡ç†
- ç§»é™¤äº†æ—¥æœŸé€‰æ‹©ç›¸å…³çš„UIç»„ä»¶
- ç®€åŒ–äº†é¡µé¢é€»è¾‘

### ç”¨æˆ·ä½“éªŒ
- ç•Œé¢æ›´åŠ ç®€æ´
- å‡å°‘äº†ç”¨æˆ·æ“ä½œæ­¥éª¤
- ä¸“æ³¨äºå½“å¤©æ•°æ®çš„å±•ç¤º

## æµ‹è¯•éªŒè¯

### åŠŸèƒ½æµ‹è¯•
1. **é¡µé¢åŠ è½½**: é¡µé¢æ­£å¸¸åŠ è½½ï¼Œæ˜¾ç¤ºå½“å¤©æ•°æ®
2. **æ•°æ®å±•ç¤º**: æ­£ç¡®æ˜¾ç¤ºå½“å¤©çš„å°±é¤çŠ¶æ€
3. **å»æŠ¥é¤**: ç‚¹å‡»"å»æŠ¥é¤"æŒ‰é’®ï¼Œæ­£ç¡®è·³è½¬åˆ°æŠ¥é¤é¡µé¢
4. **ç¡®è®¤å°±é¤**: ç¡®è®¤å°±é¤åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### ç•Œé¢æµ‹è¯•
1. **æ ‡é¢˜æ˜¾ç¤º**: é¡µé¢æ ‡é¢˜æ­£å¸¸æ˜¾ç¤º
2. **å¸ƒå±€è°ƒæ•´**: åˆ é™¤æ—¥æœŸé€‰æ‹©å™¨åå¸ƒå±€æ­£å¸¸
3. **å“åº”å¼**: åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹æ˜¾ç¤ºæ­£å¸¸

## å½±å“è¯„ä¼°

### æ­£é¢å½±å“
- ç®€åŒ–äº†ç”¨æˆ·ç•Œé¢
- å‡å°‘äº†ç”¨æˆ·æ“ä½œå¤æ‚åº¦
- æé«˜äº†é¡µé¢åŠ è½½æ€§èƒ½
- ä»£ç æ›´åŠ ç®€æ´æ˜“ç»´æŠ¤

### æ½œåœ¨å½±å“
- ç”¨æˆ·æ— æ³•æŸ¥çœ‹å†å²æ•°æ®
- åŠŸèƒ½ç›¸å¯¹å•ä¸€åŒ–

## æ€»ç»“

æˆåŠŸåˆ é™¤äº†å°±é¤çŠ¶æ€é¡µé¢çš„æ—¥æœŸé€‰æ‹©åŠŸèƒ½ï¼Œé¡µé¢ç°åœ¨é»˜è®¤åªæ˜¾ç¤ºå½“å¤©çš„æ•°æ®ã€‚ä¿®æ”¹åçš„é¡µé¢æ›´åŠ ç®€æ´ï¼Œç”¨æˆ·ä½“éªŒæ›´åŠ ç›´è§‚ï¼ŒåŒæ—¶ä¿æŒäº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„æ­£å¸¸å·¥ä½œã€‚

## ç›¸å…³æ–‡ä»¶

- `src/pages/dining/dining-status.vue` - ä¸»è¦ä¿®æ”¹æ–‡ä»¶
- æ— å…¶ä»–æ–‡ä»¶éœ€è¦ä¿®æ”¹

## åç»­å»ºè®®

1. å¦‚æœç”¨æˆ·éœ€è¦æŸ¥çœ‹å†å²æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘åœ¨å…¶ä»–é¡µé¢æ·»åŠ æ­¤åŠŸèƒ½
2. å¯ä»¥è€ƒè™‘åœ¨é¡µé¢æ ‡é¢˜ä¸‹æ–¹æ·»åŠ ä¸€ä¸ªç®€å•çš„æ—¥æœŸæ˜¾ç¤ºï¼Œè®©ç”¨æˆ·çŸ¥é“å½“å‰æŸ¥çœ‹çš„æ˜¯å“ªä¸€å¤©çš„æ•°æ®
3. ä¿æŒä»£ç çš„ç®€æ´æ€§ï¼Œé¿å…æ·»åŠ ä¸å¿…è¦çš„åŠŸèƒ½
